<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico?v=5.1.4">


  <link rel="mask-icon" href="/images/favicon.ico?v=5.1.4" color="#222">





  <meta name="keywords" content="JSP," />





  <link rel="alternate" href="/atom.xml" title="CloudPai" type="application/atom+xml" />






<meta name="description" content="JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】什么是 JSPJSP 全名为 Java Server Pages，java 服务器页面。JSP 是一种基于文本的程序，其特点就是 HTML 和 Java 代码共同存在！ 为什么需要 JSPJSP 是为了简化 Servlet 的工作出现的替代品，Servlet 输出 HTML 非常困难，JSP 就是替代 Servlet 输出 HT">
<meta name="keywords" content="JSP">
<meta property="og:type" content="article">
<meta property="og:title" content="JSP 学习">
<meta property="og:url" content="http://cloudpai.site/2018/03/29/2018-03-29/index.html">
<meta property="og:site_name" content="CloudPai">
<meta property="og:description" content="JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】什么是 JSPJSP 全名为 Java Server Pages，java 服务器页面。JSP 是一种基于文本的程序，其特点就是 HTML 和 Java 代码共同存在！ 为什么需要 JSPJSP 是为了简化 Servlet 的工作出现的替代品，Servlet 输出 HTML 非常困难，JSP 就是替代 Servlet 输出 HT">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-5aa3eb24457b7763.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1a5c6f9e8c159312.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-5a60a2fc73a50e2e.gif">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6a90157c276600bf.gif">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-ae2c1f51076d6138.gif">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-ca2b7bb62072b285.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-fe7aed74ad07e4c3.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-7e8507bd19417b29.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-c22a79c005e6a74f.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-c1d888eec73cd952.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-13946bb94e1fd47e.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1177fc72a27bc197.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-a3ea5cc0aaeac316.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-d9158ca455a4cbcd.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-9246398b02927c2d.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-ff3813739e1edcac.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-cac72e1d7fd069cc.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-4af427c5b16c28bd.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-4b9421d3248cbc00.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-184fffd2ed6196f3.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6e955c82fc04745c.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-7c0ba6661832b56b.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1a4e2fd181f26779.png">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5291509-a3bd1c9994f6c38e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5291509-45ede5abcdc5d248.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5291509-b28e3066227877cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5291509-eeb0da05e44a3a5d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-f467a9ac0b141238.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-4d75bdf940a45a61.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-eecf68c20b68d28f.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-5438349f470b0f63.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6f4096d2361dafac.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-ab30f70ae60fa3d2.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-db74734b9e4f5e47.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-55bebec45ca03ea5.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-48a6fac5f90e300d.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-73d993ac4bfeaf55.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1159a4356c5dab26.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-78851abb8bd4ebed.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-7118b79a9b40325d.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-cab9e2562182e36b.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-965346ecf0900a04.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-020fa3891994ca79.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-81a2addeffbf3fe7.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-85f2a85076c27b80.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-cfda73e429e5fb3a.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6f18061e6389d975.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-68b1befdc036732d.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-4d2595613461cfdd.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-a335c99c4956ded5.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6a61bd3dcf0ed277.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-22cf7a45555fa9c2.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-4208386b31611d56.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1be134715fbdd406.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-ccb6fcd825283b4c.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-490b580e44406703.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6766dbf496b60b3b.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-34dfa15cdebcfbdb.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6f59946161c7dc5a.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-0a45ae588c1a4e85.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6bc51adc26c7e2e1.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-7f6a306d4f93fd33.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-14f46763cd2a4da4.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-77da6d836f44e56a">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-208810226431b8dd.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-394f652ceb7217d2.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-035d6f74091c7806">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-b2a2a8bdf67e0d0d">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-d1ee4f89c07cfb77.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-6dbc1f38dd6dc91b.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-7d717234ebdb22b6.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-1263d39ee6e9f420.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-92fa0939537488a2.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-f77a28b33bbf91b9.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/5291509-9f18a6df11400b3d.png">
<meta property="og:updated_time" content="2018-03-31T09:49:00.201Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JSP 学习">
<meta name="twitter:description" content="JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】什么是 JSPJSP 全名为 Java Server Pages，java 服务器页面。JSP 是一种基于文本的程序，其特点就是 HTML 和 Java 代码共同存在！ 为什么需要 JSPJSP 是为了简化 Servlet 的工作出现的替代品，Servlet 输出 HTML 非常困难，JSP 就是替代 Servlet 输出 HT">
<meta name="twitter:image" content="https://upload-images.jianshu.io/upload_images/5291509-5aa3eb24457b7763.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"always","offset":12,"b2t":false,"scrollpercent":false,"onmobile":true},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: 'TZAS2SFOJR',
      apiKey: 'e2a9cd036eede8026382b302001ec261',
      indexName: 'cloudpai_blogs_search',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://cloudpai.site/2018/03/29/2018-03-29/"/>





  <title>JSP 学习 | CloudPai</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-114643720-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">CloudPai</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">个人博客</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            时间轴
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>




 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://cloudpai.site/2018/03/29/2018-03-29/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="CloudPai">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="http://p4lmrb1gp.bkt.clouddn.com/君名-squashed.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CloudPai">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JSP 学习</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-03-29T18:22:55+08:00">
                2018-03-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">更新于&#58;</span>
              
              <time title="更新于" itemprop="dateModified" datetime="2018-03-31T17:49:00+08:00">
                2018-03-31
              </time>
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/03/29/2018-03-29/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2018/03/29/2018-03-29/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          
            <div class="post-wordcount">
              
                
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">字数统计&#58;</span>
                
                <span title="字数统计">
                  16,750
                </span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">
                  72
                </span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <script src="/assets/js/APlayer.min.js"> </script><h1 id="JSP-第一篇【JSP-介绍、工作原理、生命周期、语法、指令、行为】"><a href="#JSP-第一篇【JSP-介绍、工作原理、生命周期、语法、指令、行为】" class="headerlink" title="JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】"></a>JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】</h1><h2 id="什么是-JSP"><a href="#什么是-JSP" class="headerlink" title="什么是 JSP"></a>什么是 JSP</h2><p>JSP 全名为 Java Server Pages，java 服务器页面。JSP 是一种基于文本的程序，<strong>其特点就是 HTML 和 Java 代码共同存在</strong>！</p>
<h2 id="为什么需要-JSP"><a href="#为什么需要-JSP" class="headerlink" title="为什么需要 JSP"></a>为什么需要 JSP</h2><p><strong>JSP 是为了简化 Servlet 的工作出现的替代品，Servlet 输出 HTML 非常困难，JSP 就是替代 Servlet 输出 HTML 的。</strong></p>
<h2 id="简单使用一下-JSP"><a href="#简单使用一下-JSP" class="headerlink" title="简单使用一下 JSP"></a>简单使用一下 JSP</h2><ul>
<li>在 idea 下生成一个 JSP，我们来看一下 JSP 长什么样子</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;简单使用JSP&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>看起来就像一个 HTML 页面</strong>，前面也说了：JSP 的特点就是 HTML 和 Java 代码共同存在</li>
<li>我们向浏览器输出一句 HelloWorld，<strong>至于 &lt;%%&gt; 这个东西，我先不解释！</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;简单使用JSP&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String s = &quot;HelloWorld&quot;;</span><br><span class="line">    out.println(s);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-5aa3eb24457b7763.png" alt=""></p>
<h2 id="JSP-的工作原理"><a href="#JSP-的工作原理" class="headerlink" title="JSP 的工作原理"></a>JSP 的工作原理</h2><ul>
<li>在 Tomcat 博客中我提到过：<strong>Tomcat 访问任何的资源都是在访问 Servlet</strong>！，当然了，JSP 也不例外！<strong>JSP 本身就是一种 Servlet</strong>。为什么我说 JSP 本身就是一种 Servlet 呢？<strong>其实 JSP 在第一次被访问的时候会被编译为 HttpJspPage 类（该类是 HttpServlet 的一个子类）</strong></li>
<li>刚才我简单使用了一下 JSP，<strong>它被编译成了这么一个 Servlet</strong>:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">package org.apache.jsp;</span><br><span class="line"></span><br><span class="line">import javax.servlet.*;</span><br><span class="line">import javax.servlet.http.*;</span><br><span class="line">import javax.servlet.jsp.*;</span><br><span class="line">import java.util.Date;</span><br><span class="line"></span><br><span class="line">public final class _1_jsp extends org.apache.jasper.runtime.HttpJspBase</span><br><span class="line">    implements org.apache.jasper.runtime.JspSourceDependent &#123;</span><br><span class="line"></span><br><span class="line">  private static final JspFactory _jspxFactory = JspFactory.getDefaultFactory();</span><br><span class="line"></span><br><span class="line">  private static java.util.List&lt;String&gt; _jspx_dependants;</span><br><span class="line"></span><br><span class="line">  private javax.el.ExpressionFactory _el_expressionfactory;</span><br><span class="line">  private org.apache.tomcat.InstanceManager _jsp_instancemanager;</span><br><span class="line"></span><br><span class="line">  public java.util.List&lt;String&gt; getDependants() &#123;</span><br><span class="line">    return _jspx_dependants;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspInit() &#123;</span><br><span class="line">    _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();</span><br><span class="line">    _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspDestroy() &#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  public void _jspService(final HttpServletRequest request, final HttpServletResponse response)</span><br><span class="line">        throws java.io.IOException, ServletException &#123;</span><br><span class="line"></span><br><span class="line">    final PageContext pageContext;</span><br><span class="line">    HttpSession session = null;</span><br><span class="line">    final ServletContext application;</span><br><span class="line">    final ServletConfig config;</span><br><span class="line">    JspWriter out = null;</span><br><span class="line">    final Object page = this;</span><br><span class="line">    JspWriter _jspx_out = null;</span><br><span class="line">    PageContext _jspx_page_context = null;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      response.setContentType(&quot;text/html;charset=UTF-8&quot;);</span><br><span class="line">      pageContext = _jspxFactory.getPageContext(this, request, response,</span><br><span class="line">                null, true, 8192, true);</span><br><span class="line">      _jspx_page_context = pageContext;</span><br><span class="line">      application = pageContext.getServletContext();</span><br><span class="line">      config = pageContext.getServletConfig();</span><br><span class="line">      session = pageContext.getSession();</span><br><span class="line">      out = pageContext.getOut();</span><br><span class="line">      _jspx_out = out;</span><br><span class="line"></span><br><span class="line">      out.write(&quot;\r\n&quot;);</span><br><span class="line">      out.write(&quot;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;html&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;head&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;    &lt;title&gt;简单使用JSP&lt;/title&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;/head&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;body&gt;\r\n&quot;);</span><br><span class="line"></span><br><span class="line">    String s = &quot;HelloWorda&quot;;</span><br><span class="line">    out.println(s);</span><br><span class="line"></span><br><span class="line">      out.write(&quot;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;/body&gt;\r\n&quot;);</span><br><span class="line">      out.write(&quot;&lt;/html&gt;\r\n&quot;);</span><br><span class="line">    &#125; catch (Throwable t) &#123;</span><br><span class="line">      if (!(t instanceof SkipPageException))&#123;</span><br><span class="line">        out = _jspx_out;</span><br><span class="line">        if (out != null &amp;&amp; out.getBufferSize() != 0)</span><br><span class="line">          try &#123; out.clearBuffer(); &#125; catch (java.io.IOException e) &#123;&#125;</span><br><span class="line">        if (_jspx_page_context != null) _jspx_page_context.handlePageException(t);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; finally &#123;</span><br><span class="line">      _jspxFactory.releasePageContext(_jspx_page_context);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>编译过程是这样子的：<strong>浏览器第一次请求 1.jsp 时，Tomcat 会将 1.jsp 转化成 1_jsp.java 这么一个类，并将该文件编译成 class 文件。编译完毕后再运行 class 文件来响应浏览器的请求</strong>。</li>
<li>以后访问 1.jsp 就不再重新编译 jsp 文件了，直接调用 class 文件来响应浏览器。当然了，<strong>如果 Tomcat 检测到 JSP 页面改动了的话，会重新编译的</strong>。</li>
<li>既然 JSP 是一个 Servlet，<strong>那 JSP 页面中的 HTML 排版标签是怎么样被发送到浏览器的</strong>？我们来看下上面 1_jsp.java 的源码就知道了。原来就是用 write() 出去的罢了。<strong>说到底，JSP 就是封装了 Servlet 的 java 程序罢了。</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">out.write(&quot;\r\n&quot;);</span><br><span class="line">out.write(&quot;\r\n&quot;);</span><br><span class="line">out.write(&quot;&lt;html&gt;\r\n&quot;);</span><br><span class="line">out.write(&quot;&lt;head&gt;\r\n&quot;);</span><br><span class="line">out.write(&quot;    &lt;title&gt;简单使用JSP&lt;/title&gt;\r\n&quot;);</span><br><span class="line">out.write(&quot;&lt;/head&gt;\r\n&quot;);</span><br><span class="line">out.write(&quot;&lt;body&gt;\r\n&quot;);</span><br></pre></td></tr></table></figure>
<ul>
<li>有人可能也会问：<strong>JSP 页面的代码服务器是怎么执行的</strong>？再看回 1_jsp.java 文件，<strong>java 代码就直接在类中的 service() 中。</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">String s = &quot;HelloWorda&quot;;</span><br><span class="line">out.println(s);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>JSP 比 Servlet 更方便更简单的一个重要原因就是：内置了 9 个对象！</strong>内置对象有：out、session、response、request、config、page、application、pageContext、exception，这几个内置对象不在这里讲。现在先知道一下即可！</li>
</ul>
<hr>
<h2 id="JSP-生命周期"><a href="#JSP-生命周期" class="headerlink" title="JSP 生命周期"></a>JSP 生命周期</h2><p>JSP 也是 Servlet，运行时只有一个实例，<strong>JSP 初始化和销毁时也会调用 Servlet 的 init() 和 destroy() 方法</strong>。另外，JSP 还有自己初始化和销毁的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public void _jspInit() &#123;</span><br><span class="line">  _el_expressionfactory = _jspxFactory.getJspApplicationContext(getServletConfig().getServletContext()).getExpressionFactory();</span><br><span class="line">  _jsp_instancemanager = org.apache.jasper.runtime.InstanceManagerFactory.getInstanceManager(getServletConfig());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">public void _jspDestroy() &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="JSP-的语法"><a href="#JSP-的语法" class="headerlink" title="JSP 的语法"></a>JSP 的语法</h2><p>JSP 代码可以分为两部分：</p>
<ol>
<li><strong>模板数据：就是 HTML 代码</strong></li>
<li><strong>元素：JSP 页面中的 java 代码、JSP 指令、JSP 标签</strong></li>
</ol>
<h3 id="JSP-脚本"><a href="#JSP-脚本" class="headerlink" title="JSP 脚本"></a>JSP 脚本</h3><ul>
<li><p><strong>JSP 的脚本就是 JSP 页面中的 java 代码</strong>，也叫做 scriptlet。<strong>JSP 的脚本必须使用 &lt;%%&gt; 括起来，不然会被当成是模板数据的！</strong></p>
</li>
<li><p>JSP 脚本有三种方式：</p>
<ul>
<li>&lt;%%&gt;【定义局部变量，编写语句】</li>
<li>&lt;%!%&gt;【定义类或方法，<strong>但是没人这样用！</strong>】</li>
<li>&lt;%=%&gt;（也称之为<strong>表达式输出</strong>）【输出各种类型的变量，int、double、String、Object 等】</li>
</ul>
</li>
<li>如果过多地使用 &lt;%%&gt; 会导致代码混乱，JSP 还提供了一种 scriptlet 标签，<strong>使用此标签和 &lt;%%&gt; 有相同的功能，只不过它更美观了一些</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:scriptlet&gt;</span><br><span class="line"></span><br><span class="line">    String s = &quot;HelloWorld&quot;;</span><br><span class="line">    out.println(s);</span><br><span class="line"></span><br><span class="line">&lt;/jsp:scriptlet&gt;</span><br></pre></td></tr></table></figure>
<h3 id="JSP-注释"><a href="#JSP-注释" class="headerlink" title="JSP 注释"></a>JSP 注释</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--这是JSP注释--%&gt;</span><br><span class="line">&lt;%--%&gt;</span><br><span class="line"></span><br><span class="line">//这是java的当行注释</span><br><span class="line">//</span><br><span class="line"></span><br><span class="line">/*这是java的多行注释*/</span><br><span class="line">/**/</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="JSP-指令"><a href="#JSP-指令" class="headerlink" title="JSP 指令"></a>JSP 指令</h3><p><strong>JSP 指令用来声明 JSP 页面的相关属性，例如编码方式、文档类型等等</strong></p>
<p>JSP 指令的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@指令  属性名=&quot;值&quot;  %&gt;</span><br></pre></td></tr></table></figure>
<h4 id="page-指令"><a href="#page-指令" class="headerlink" title="page 指令"></a>page 指令</h4><ul>
<li>我在 idea 生成的 JSP 页面就有 page 指令了。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>page 指令常见属性：</p>
</li>
<li><p>language=”java”</p>
</li>
<li><p>extends=”package.class”</p>
</li>
<li><p><strong>import</strong>=”{package.class | package.*}, …”</p>
</li>
<li><p><strong>session=”true | false”</strong></p>
</li>
<li><p>buffer=”none | 8kb | sizekb”</p>
</li>
<li><p>autoFlush=”true | false”</p>
</li>
<li><p>isThreadSafe=”true | false”</p>
</li>
<li><p>info=”text”</p>
</li>
<li><p><strong>errorPage=”relative_url”</strong></p>
</li>
<li><p><strong>isErrorPage=”true | false”</strong></p>
</li>
<li><p><strong>contentType=”mimeType ;charset=characterSet” | “text/html ; charset=ISO-8859-1”</strong></p>
</li>
<li><p><strong>pageEncoding=”characterSet | ISO-8859-1”</strong></p>
</li>
<li><p><strong>isELIgnored=”true | false”</strong></p>
</li>
<li><p>一般地，在 eclipse 或 idea 这些高级开发工具上开发，<strong>我们只需要在 page 指令中指定 contentType=”text/html;charset=UTF-8”，就不会出现中文乱码问题！</strong></p>
</li>
<li><p>当然了 contentType <strong>不仅仅可以指定以 text/html 的方式显示，还可以使用其他的形式显示出来。在 conf/web.xml 文件中可以查询出来</strong></p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1a5c6f9e8c159312.png" alt=""></p>
<ul>
<li>比如，<strong>我以 doc 形式显示 jsp 的数据</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;application/msword;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;简单使用JSP&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">    1111</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果是这样子的：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-5a60a2fc73a50e2e.gif" alt=""></p>
<ul>
<li>我们上网的时候，<strong>如果我们操作不当，或者服务器出错了，页面都是会出现友好提示的</strong>！这个也能通过 page 指令来实现<strong>跳转到友好提示页面上</strong>！</li>
<li>page 指令 <strong>errorPage = 和 isErrorPage</strong> 这两个属性，下面我们来看一下怎么使用！</li>
<li>1.jsp 出现了错误，<strong>通过 page 指令的 errorPage 属性跳转到 error.jsp 页面</strong>上</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; errorPage=&quot;error.jsp&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;该页面出错了！&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;%--模拟页面出错了！！！--%&gt;</span><br><span class="line">    &lt;%</span><br><span class="line">        int result = 2 / 0;</span><br><span class="line">    %&gt;</span><br><span class="line">    你好呀</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>error.jsp 页面要通过 page 指令的 isErrorPage 属性设置页面就是错误页面</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isErrorPage=&quot;true&quot;   %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;友好提示页面&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        服务器正忙着呢！</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>下面是效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6a90157c276600bf.gif" alt=""></p>
<ul>
<li>当然了，<strong>细心的朋友可以发现地址栏是没有变化的，所以属于是服务器跳转</strong>。以上的做法是单个页面设置的，如果我会有很多错误（JSP 多的情况下，错误就会多），单个设置太麻烦了！</li>
<li>我们可以在 web.xml 文件中全局设置错误页，<strong>只要发生了 404 错误或者空指针异常的错误都会跳转到 error.jsp 页面上</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">    &lt;error-code&gt;404&lt;/error-code&gt;</span><br><span class="line">    &lt;location&gt;/error.jsp&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br><span class="line"></span><br><span class="line">&lt;error-page&gt;</span><br><span class="line">    &lt;exception-type&gt;java.lang.NullPointerException&lt;/exception-type&gt;</span><br><span class="line">    &lt;location&gt;/error.jsp&lt;/location&gt;</span><br><span class="line">&lt;/error-page&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>随便输个资源进行，会发生发 404 错误的，跳转到错误页面</strong>。下面是效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-ae2c1f51076d6138.gif" alt=""></p>
<hr>
<h4 id="include-指令"><a href="#include-指令" class="headerlink" title="include 指令"></a>include 指令</h4><ul>
<li><p><strong>在讲解 request 对象的时候，我们曾经使用过 request.getRequestDispatcher(String url).include(request,response) 来对页头和页尾面进行包含</strong></p>
</li>
<li><p>inclue 指令也是做这样的事情，我们来试验一下吧！</p>
</li>
<li><p>这是页头</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot;   %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;页头&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    我是页头</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>这是页尾</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">我是页尾</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 1.jsp 中把页头和页尾包含进来</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;包含页头和页尾进来&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@include file=&quot;head.jsp&quot; %&gt;</span><br><span class="line">&lt;%@include file=&quot;foot.jsp&quot; %&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问 1.jsp</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-ca2b7bb62072b285.png" alt=""></p>
<ul>
<li><strong>include 指令是静态包含</strong>。静态包含的意思就是：<strong>把文件的代码内容都包含进来，再编译！</strong>，看一下 jsp 的源代码就知道了！</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-fe7aed74ad07e4c3.png" alt=""></p>
<ul>
<li>jsp 还提供另一种包含文件的方式：<strong>JSP 行为 — 动态包含</strong>。jsp 行为在下面会讲到！</li>
</ul>
<hr>
<h4 id="taglib-指令"><a href="#taglib-指令" class="headerlink" title="taglib 指令"></a>taglib 指令</h4><ul>
<li><strong>JSP 支持标签技术，要使用标签技术就先得声明标签库和标签前缀。taglib 指令就是用来指明 JSP 页面内使用标签库技术。</strong></li>
<li>这里就不详细说明了，等到学习 JSP 标签的时候再使用吧！现在记住有这个指令即可。</li>
</ul>
<hr>
<h3 id="JSP-行为"><a href="#JSP-行为" class="headerlink" title="JSP 行为"></a>JSP 行为</h3><blockquote>
<p><strong>JSP 行为（JSP Actions）是一组 JSP 内置的标签</strong>，只书写少量的标记代码就能够使用 JSP 提供丰富的功能，<strong>JSP 行为是对常用的 JSP 功能的抽象和封装</strong>。</p>
</blockquote>
<p>为什么我不把它直接称为 JSP 标签呢？<strong>我把这些 JSP 内置的标签称之为 JSP 行为，能够和 JSTL 标签区分开来</strong>。当然了，你也可以把它称之为 JSP 标签，你不要搞混就行了。我个人喜欢把这些 JSP 内置标签称之为 JSP 行为。</p>
<h4 id="include-行为"><a href="#include-行为" class="headerlink" title="include 行为"></a>include 行为</h4><ul>
<li>上面已经提及到了，<strong>include 指令是静态包含，include 行为是动态包含</strong>。<strong>其实 include 行为就是封装了 request.getRequestDispatcher(String url).include(request,response)</strong></li>
<li>include 行为语法是这个样子的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:include page=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们先来使用一下把，<strong>在 1.jsp 页面中也将页头和页尾包含进来</strong>。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;包含页头和页尾进来&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    &lt;jsp:include page=&quot;head.jsp&quot;/&gt;</span><br><span class="line">    &lt;jsp:include page=&quot;foot.jsp&quot;/&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>访问 1.jsp 页面看一下效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-7e8507bd19417b29.png" alt=""></p>
<ul>
<li>使用 jsp 行为来包含文件，jsp 源文件是这样子的：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-c22a79c005e6a74f.png" alt=""></p>
<ul>
<li><p>jsp 行为包含文件就是<strong>先编译被包含的页面，再将页面的结果写入到包含的页面中（1.jsp)</strong></p>
</li>
<li><p>当然了，现在有静态包含和动态包含，使用哪一个更好呢？<strong>答案是：动态包含</strong>。</p>
</li>
<li><p>动态包含可以<strong>向被包含的页面传递参数（用处不大）</strong>，并且是<strong>分别处理包含页面的（将被包含页面编译后得出的结果再写进包含页面）【如果有相同名称的参数，使用静态包含就会报错！】</strong>！</p>
</li>
<li><p>模拟一下场景吧，现在我的头页面有个名为 s 的字符串变量</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot;   %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;title&gt;页头&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%</span><br><span class="line">        String s = &quot;zhongfucheng&quot;;</span><br><span class="line">    %&gt;</span><br><span class="line">    我是页头呀</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我的页尾也有个名为 s 的字符串变量</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;页尾&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String s = &quot;zhongfucheng&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">我是页尾呀</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>现在我使用静态包含看看会发生什么，出现异常了。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-c1d888eec73cd952.png" alt=""></p>
<ul>
<li>出现异常的原因很简单，就是<strong>同一个文件中有两个相同的变量 s</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-13946bb94e1fd47e.png" alt=""></p>
<ul>
<li><strong>使用动态包含就可以避免这种情况</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1177fc72a27bc197.png" alt=""> <img src="https://upload-images.jianshu.io/upload_images/5291509-a3ea5cc0aaeac316.png" alt=""></p>
<hr>
<h4 id="param-行为"><a href="#param-行为" class="headerlink" title="param 行为"></a>param 行为</h4><ul>
<li><strong>当使用</strong></li>
</ul>
<h4 id="forward-行为"><a href="#forward-行为" class="headerlink" title="forward 行为"></a>forward 行为</h4><ul>
<li>在讲解 request 对象的时候，我们使用 request.getRequestDispatcher(String url).forward(request,response) 进行跳转。<strong>其实 forward 行为就是对其封装</strong>！</li>
<li>我们来看一下 forward 的语法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>好的，我们来使用一下吧。<strong>访问 1.jsp 页面就跳转到 head.jsp 页面中</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;访问1.jsp就跳转到head.jsp&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:forward page=&quot;head.jsp&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>看一下效果</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-d9158ca455a4cbcd.png" alt=""></p>
<ul>
<li><strong>如果我要传递参数，就要在 forward 行为嵌套 param 行为</strong></li>
<li>在跳转到 head.jsp 时传入参数 username 值为 zhongfucheng</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:forward page=&quot;head.jsp&quot;&gt;</span><br><span class="line">    &lt;jsp:param /&gt;</span><br><span class="line">&lt;/jsp:forward&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>在 head.jsp 页面中获取到传递过来的参数</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    String ss = request.getParameter(&quot;username&quot;);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">获取到的参数是：</span><br><span class="line">&lt;%=ss%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果如下图所示</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-9246398b02927c2d.png" alt=""></p>
<h4 id="directive-行为"><a href="#directive-行为" class="headerlink" title="directive 行为"></a>directive 行为</h4><ul>
<li><strong>directive 的中文意思就是指令</strong>。<strong>该行为就是替代指令 %@% 的语法的</strong></li>
<li>我们来试一下能不能用的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:directive.include file=&quot;head.jsp&quot;&gt;&lt;/jsp:directive.include&gt;</span><br><span class="line">&lt;jsp:directive.include file=&quot;foot.jsp&quot;&gt;&lt;/jsp:directive.include&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>看下效果，正常可以包含页面：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-ff3813739e1edcac.png" alt=""></p>
<ul>
<li><strong>使用该指令可以让 JSP 页面更加美观</strong>！</li>
<li>使用 scriptlet 行为<code>&lt;jsp:scriptlet&gt;</code>替代 &lt;%%&gt; 是同样一个道理</li>
</ul>
<h4 id="javaBean-行为"><a href="#javaBean-行为" class="headerlink" title="javaBean 行为"></a>javaBean 行为</h4><ul>
<li><strong>JSP 还提供了操作 javaBean 对象的行为</strong>，<strong>在这里就不详细说明了，后面会讲到的！现在记住 JSP 提供了 javaBean 行为来操作简单类即可！</strong><ul>
<li><code>&lt;jsp:useBean id=&quot;&quot;/&gt;</code></li>
<li><code>&lt;jsp:setProperty /&gt;</code></li>
<li><code>&lt;jsp:getProperty /&gt;</code></li>
</ul>
</li>
</ul>
<h1 id="JSP-第二篇【内置对象的介绍、4-种属性范围、应用场景】"><a href="#JSP-第二篇【内置对象的介绍、4-种属性范围、应用场景】" class="headerlink" title="JSP 第二篇【内置对象的介绍、4 种属性范围、应用场景】"></a>JSP 第二篇【内置对象的介绍、4 种属性范围、应用场景】</h1><h2 id="什么是-JSP-内置对象"><a href="#什么是-JSP-内置对象" class="headerlink" title="什么是 JSP 内置对象"></a>什么是 JSP 内置对象</h2><blockquote>
<p>JSP 引擎在调用 JSP 对应的 jspServlet 时，<strong>会传递或创建 9 个与 web 开发相关的对象供 jspServlet 使用</strong>。JSP 技术的设计者为便于开发人员在编写 JSP 页面时获得这些 web 对象的引用，特意定义了 9 个相应的变量，<strong>开发人员在 JSP 页面中通过这些变量就可以快速获得这 9 大对象的引用</strong></p>
</blockquote>
<p>细心的朋友会发现，<strong>我们没有在 JSP 页面上定义过 out 对象，却可以直接使用！其实 out 对象就是 JSP 内置对象之一</strong>。</p>
<p>九个内置对象：</p>
<ul>
<li><strong>pageContext</strong></li>
<li>page</li>
<li>config</li>
<li><strong>request</strong></li>
<li><strong>response</strong></li>
<li><strong>session</strong></li>
<li><strong>application</strong></li>
<li>exception</li>
<li>out</li>
</ul>
<hr>
<h2 id="out-对象"><a href="#out-对象" class="headerlink" title="out 对象"></a>out 对象</h2><p>out 对象的 API</p>
<ul>
<li><p><strong>int getBufferSize()【得到缓存大小】</strong></p>
</li>
<li><p><strong>int getRemaining()【得到未使用缓存的大小】</strong></p>
</li>
<li><p>boolean isAutoFlush()</p>
</li>
<li><p>void println()</p>
</li>
<li><p>void flush()</p>
</li>
<li><p>void close()</p>
</li>
<li><p>void clearBuffer()</p>
</li>
<li><p>void clear()</p>
</li>
<li><p><strong>out 对象用于向浏览器输出数据，与之对应的是 Servlet 的 PrintWriter 对象</strong>。然而这个 out 对象的类型并不是 PrintWriter，是 JspWriter</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-cac72e1d7fd069cc.png" alt=""></p>
<ul>
<li><p>我们可以简单理解为：<strong>JspWriter 就是带缓存的 PrintWrieter</strong>。</p>
</li>
<li><p>out 对象的原理如下：</p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-4af427c5b16c28bd.png" alt=""></p>
<ul>
<li>只有向 out 对象中写入了内容，且<strong>满足如下任何一个条件时，out 对象才去调用 ServletResponse.getWriter 方法</strong>，并<strong>通过该方法返回的 PrintWriter 对象将 out 对象的缓冲区中的内容真正写入到 Servlet 引擎提供的缓冲区中</strong>：<ul>
<li><strong>设置 page 指令的 buffer 属性关闭了 out 对象的缓存功能</strong></li>
<li><strong>out 对象的缓冲区已满</strong></li>
<li><strong>整个 JSP 页面结束</strong></li>
</ul>
</li>
<li><strong>一般我们在 JSP 页面输出都是用表达式（&lt;%=%&gt;)，所以 out 对象用得并不是很多</strong>！</li>
</ul>
<hr>
<h2 id="request"><a href="#request" class="headerlink" title="request"></a>request</h2><ul>
<li><strong>内置对象 request 其实就是 HttpServletRequest</strong>，在 Servlet 讲解的时候已经详细说明了，没什么好说的</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-4b9421d3248cbc00.png" alt=""></p>
<h2 id="response"><a href="#response" class="headerlink" title="response"></a>response</h2><ul>
<li><strong>内置对象 response 其实就是 HttpServletResponse</strong>，在 Servlet 讲解的时候已经详细说明了，没什么好说的</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-184fffd2ed6196f3.png" alt=""></p>
<h2 id="config"><a href="#config" class="headerlink" title="config"></a>config</h2><ul>
<li><strong>内置对象 config 其实就是 ServletConfig</strong>，在 Servlet 讲解的时候已经详细说明了，没什么好说的</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6e955c82fc04745c.png" alt=""></p>
<h2 id="session"><a href="#session" class="headerlink" title="session"></a>session</h2><ul>
<li><strong>内置对象 session 其实就是 HttpSession。</strong>，在 Servlet 讲解的时候已经详细说明了，没什么好说的</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-7c0ba6661832b56b.png" alt=""></p>
<p>注意：<strong>在 page 指令配置如下信息，session 将不可使用</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@page session=&quot;false&quot; %&gt;</span><br></pre></td></tr></table></figure>
<h2 id="application"><a href="#application" class="headerlink" title="application"></a>application</h2><ul>
<li><strong>内置对象 application 其实就是 ServletContext 对象</strong>，在 Servlet 讲解的时候已经详细说明了，没什么好说的</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1a4e2fd181f26779.png" alt=""></p>
<h2 id="page"><a href="#page" class="headerlink" title="page"></a>page</h2><ul>
<li>内置对象 page 是 HttpJasPage 对象，<strong>其实 page 对象代表的就是当前 JSP 页面，是当前 JSP 编译后的 Servlet 类的对象</strong>。也就是说：<strong>page 对象相当于普通 java 类的 this</strong></li>
</ul>
<h2 id="exception"><a href="#exception" class="headerlink" title="exception"></a>exception</h2><ul>
<li><p><strong>内置对象 exception 是 java.lang.Exception 类的对象，exception 封装了 JSP 页面抛出的异常信息。</strong>exception 经常被用来处理错误页面</p>
</li>
<li><p>前面我们已<strong>经讲过了怎么设置错误页面了</strong>，下面我们就来简单使用一下 exception 对象吧</p>
</li>
<li><p>1.jsp 页面</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; errorPage=&quot;error.jsp&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--模拟空指针异常的错误--%&gt;&lt;% String sss = null; sss.length();%&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">*   error.jsp页面</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; isErrorPage=&quot;true&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;错误页面&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    out.println(&quot;程序抛出了异常：&quot; + exception);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/5291509-a3bd1c9994f6c38e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<h2 id="pageContext"><a href="#pageContext" class="headerlink" title="pageContext"></a>pageContext</h2><p><strong>pageContext是内置对象中最重要的一个对象，它代表着JSP页面编译后的内容（也就是JSP页面的运行环境）！</strong></p>
<h3 id="pageContext获取8个内置对象"><a href="#pageContext获取8个内置对象" class="headerlink" title="pageContext获取8个内置对象"></a>pageContext获取8个内置对象</h3><ul>
<li>既然它代表了JSP页面编译后的内容，理所当然的：<strong>它封装了对其他8大内置对象的引用！</strong>，也就是说，<strong>通过pageContext可以获取到其他的8个内置对象！</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;获取八大内置对象&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getSession());</span><br><span class="line">    System.out.println(pageContext.getRequest());</span><br><span class="line">    System.out.println(pageContext.getResponse());</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getException());</span><br><span class="line"></span><br><span class="line">    System.out.println(pageContext.getPage());</span><br><span class="line">    System.out.println(pageContext.getServletConfig());</span><br><span class="line">    System.out.println(pageContext.getServletContext());</span><br><span class="line">    System.out.println(pageContext.getOut());</span><br><span class="line"></span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<h3 id="pageContext作为域对象"><a href="#pageContext作为域对象" class="headerlink" title="pageContext作为域对象"></a>pageContext作为域对象</h3><ul>
<li>类似于request，session，ServletContext作为域对象而言<strong>都有以下三个方法</strong>：<ul>
<li><strong>setAttribute(String name,Objcet o)</strong></li>
<li><strong>getAttribute(String name)</strong></li>
<li><strong>removeAttribute(String name)</strong></li>
</ul>
</li>
<li><p>当然了，pageContext也不例外，<strong>pageContext也有这三个方法</strong>！</p>
</li>
<li><p>pageContext本质上代表的是当前JSP页面编译后的内容，<strong>作为域对象而言，它就代表着当前JSP页面（也就是page）</strong>！也就是说：<strong>pageContext域对象只在page范围内有效，超出了page范围就无效了</strong>！</p>
</li>
<li><p>首先来看看在<strong>page范围内能不能使用</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;使用page域对象&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(&quot;name&quot;, &quot;zhongfucheng&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String value = (String) pageContext.getAttribute(&quot;name&quot;);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>我们现在来试验一下<strong>是不是超出了page范围就无效了！</strong></p>
</li>
<li><p><strong>在2.jsp中request域对象设置属性</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;request域对象设置属性&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    //这是request域对象保存的内容</span><br><span class="line">    request.setAttribute(&quot;name&quot;,&quot;zhongfucheng&quot;);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--跳转到1.jsp中--%&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:forward page=&quot;1.jsp&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>企图在1.jsp中pageContext取出request存进去的属性</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;在page域对象获取属性&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    //企图获取request域对象存进的属性</span><br><span class="line">    String value = (String) pageContext.getAttribute(&quot;name&quot;);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果如下：</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/5291509-45ede5abcdc5d248.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<hr>
<ul>
<li><p>pageContext本质上代表着编译后JSP的内容，<strong>pageContext还可以封装了访问其他域的方法</strong>！</p>
</li>
<li><p>上面的<strong>pageContext默认是page范围的</strong>，<strong>但pageContext对象重载了set、get、removeAttribute这三个方法</strong></p>
<ul>
<li><strong>getAttribute(String name,int scope)</strong></li>
<li><strong>setAttribute(String name,Object value,int scope)</strong></li>
<li><strong>removeAttribute(String name,int scope)</strong></li>
</ul>
</li>
<li><strong>多了一个设置域范围的一个参数，如果不指定默认就是page</strong>。当然了，<strong>pageContext把request、session、application、page这几个域对象封装着了静态变量供我们使用</strong>。<ul>
<li><strong>PageContext.APPLICATION_SCOPE</strong></li>
<li><strong>PageContext.SESSION_SCOPE</strong></li>
<li><strong>PageContext.REQUEST_SCOPE</strong></li>
<li><strong>PageContext.PAGE_SCOPE</strong></li>
</ul>
</li>
<li>刚才我们没有使用重载方法的时候，使用pageContext是无法获取到request域对象设置的属性的。<strong>现在我们使用重载后的方法看一下能不能获取得到</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;在page域对象获取request域对象的属性&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    //使用重载的方法获取request域对象的属性</span><br><span class="line">    String value = (String) pageContext.getAttribute(&quot;name&quot;,pageContext.REQUEST_SCOPE);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/5291509-b28e3066227877cf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<hr>
<ul>
<li>pageContexst还有这么一个方法：<ul>
<li><strong>findAttribute(String name)</strong></li>
</ul>
</li>
<li><p><strong>该方法会查找各个域的属性，从小到大开始寻找！也就是page—&gt;request-&gt;session-&gt;application。</strong>这个是EL表达式的原理！，EL表达式后面会讲到！</p>
</li>
<li><p>我们用此方法看能不能查找出request域对象的属性吧！</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;使用findAttribute&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    //使用findAttribute查找2.jsp中request域对象的属性</span><br><span class="line">    String value = (String) pageContext.findAttribute(&quot;name&quot;);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果如下：</li>
</ul>
<p><img src="http://upload-images.jianshu.io/upload_images/5291509-eeb0da05e44a3a5d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image"></p>
<hr>
<h3 id="引入和跳转"><a href="#引入和跳转" class="headerlink" title="引入和跳转"></a>引入和跳转</h3><p>PageContext类中定义了一个<strong>forward方法和两个include方法来分别简化和替代RequestDispatcher.forward方法和include方法</strong>。</p>
<ul>
<li><strong>pageContext.forward(String url)</strong></li>
<li><strong>pageContext.include(String url)</strong></li>
</ul>
<hr>
<h2 id="4种属性范围"><a href="#4种属性范围" class="headerlink" title="4种属性范围"></a>4种属性范围</h2><p>到目前为止，我们已经学了4种属性范围了。</p>
<p>1.  <strong>page【只在一个页面中保存属性，跳转页面无效】</strong><br>2.  <strong>requet【只在一次请求中保存属性，服务器跳转有效，浏览器跳转无效】</strong><br>3.  <strong>session【在一个会话范围中保存属性，无论何种跳转均有效，关闭浏览器后无效】</strong><br>4.  <strong>application【在整个服务器中保存，所有用户都可以使用】</strong></p>
<hr>
<ul>
<li>4个内置对象都支持以下的方法：</li>
</ul>
<p>1.  <strong>setAttribute(String name, Object o )</strong><br>2.  <strong>getAttribute(String name)</strong><br>3.  <strong>removeAttribute(String name)</strong></p>
<h3 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h3><p>1.  request：如果客户向服务器发请求，产生的数据，<strong>用户看完就没用了，</strong>像这样的数据就存在request域,像新闻数据，属于用户看完就没用的<br>2.  session：如果客户向服务器发请求，产生的数据，<strong>用户用完了等一会儿还有用</strong>，像这样的数据就存在session域中，像购物数据，用户需要看到自己购物信息，并且等一会儿，还要用这个购物数据结帐<br>3.  servletContext：如果客户向服务器发请求，产生的数据，<strong>用户用完了，还要给其它用户用</strong>，像这样的数据就存在servletContext域中，像聊天数据</p>
<hr>
<h1 id="JSP-第三篇【JavaBean-的介绍、JSP-的行为-–JavaBean】"><a href="#JSP-第三篇【JavaBean-的介绍、JSP-的行为-–JavaBean】" class="headerlink" title="JSP 第三篇【JavaBean 的介绍、JSP 的行为 –JavaBean】"></a>JSP 第三篇【JavaBean 的介绍、JSP 的行为 –JavaBean】</h1><h2 id="什么是-javaBean"><a href="#什么是-javaBean" class="headerlink" title="什么是 javaBean"></a>什么是 javaBean</h2><ul>
<li><strong>JavaBean 就是一个普通的 java 类</strong>，也称之为简单 java 对象 –POJO（Plain Ordinary Java Object），<strong>是 Java 程序设计中一种设计模式，是一种基于 Java 平台的软件组件思想</strong></li>
<li>JavaBean 遵循着特定的写法，通常有以下的规则：<ul>
<li><strong>有无参的构造函数</strong></li>
<li><strong>成员属性私有化</strong></li>
<li><strong>封装的属性如果需要被外所操作，必须编写 public 类型的 setter、getter 方法</strong></li>
</ul>
</li>
<li>上面的文字看起来好像很高大上，javaBean 其实非常简单，<strong>下面的代码就是按照特定写法、规则编写的一个 JavaBean 对象</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Person &#123;</span><br><span class="line">    private String username ;</span><br><span class="line">    private int age;</span><br><span class="line"></span><br><span class="line">    public Person() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getUsername() &#123;</span><br><span class="line">        return username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setUsername(String username) &#123;</span><br><span class="line">        this.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int getAge() &#123;</span><br><span class="line">        return age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setAge(int age) &#123;</span><br><span class="line">        this.age = age;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="为什么需要使用-Javabean"><a href="#为什么需要使用-Javabean" class="headerlink" title="为什么需要使用 Javabean"></a>为什么需要使用 Javabean</h2><ul>
<li>使用 javaBean 的好处就是：<strong>封装，重用, 可读</strong>！</li>
<li>下面引用知乎一段回答：</li>
</ul>
<blockquote>
<p>JaveBean 你可以理解为一辆货车，在你的 java 端和 web 页面进行数据传递的载体，你当然可以每个变量单独传递，或者使用集合传递，但是 <strong>javabean 可以使你的数据更有可读性，方便开发时明确变量的意义</strong>，也使其他阅读你代码的人能直接你的意图</p>
</blockquote>
<p>如果把 bean 类与数据库联合使用，一张表使用 bean 类，可以使你的代码更加简洁高效，易于理解，现在大多数框架都会使用这种机制。</p>
<hr>
<h2 id="JSP-行为-–JavaBean"><a href="#JSP-行为-–JavaBean" class="headerlink" title="JSP 行为 –JavaBean"></a>JSP 行为 –JavaBean</h2><ul>
<li><p>JSP 技术提供了<strong>三个关于 JavaBean 组件的动作元素</strong>，即 JSP 行为（标签），它们分别为：</p>
</li>
<li><p><strong><code>&lt;jsp:useBean&gt;</code>【在 JSP 页面中查找 javaBean 对象或者实例化 javaBean 对象】</strong></p>
</li>
<li><p><strong><code>&lt;jsp:setProperty&gt;</code>【设置 javaBean 的属性】</strong></p>
</li>
<li><p><strong><code>&lt;jsp:getProperty&gt;</code>【获取 javaBean 的属性】</strong></p>
</li>
</ul>
<h3 id="jsp-useBean"><a href="#jsp-useBean" class="headerlink" title="jsp:useBean"></a><code>jsp:useBean</code></h3><ul>
<li><code>&lt;jsp:useBean&gt;</code>标签用于<strong>在指定的域范围内查找指定名称的 JavaBean 对象</strong>：<ul>
<li><strong>存在则直接返回该 JavaBean 对象的引用</strong>。</li>
<li><strong>不存在则实例化一个新的 JavaBean 对象并将它以指定的名称存储到指定的域范围中</strong>。</li>
</ul>
</li>
<li><strong>语法：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;实例化对象的名称&quot; class=&quot;类的全名&quot; scope=&quot;保存范围&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>如果 JSP 不支持<code>&lt;jsp:useBean&gt;</code>这个行为，我们要使用 Person 类是这样使用的</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--这里需要导入Person类--%&gt;</span><br><span class="line">&lt;%@ page import=&quot;domain.Person&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    //new出对象</span><br><span class="line">    Person person = new Person();</span><br><span class="line"></span><br><span class="line">    person.setName(&quot;zhongfucheng&quot;);</span><br><span class="line">    System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果如下</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-f467a9ac0b141238.png" alt=""></p>
<ul>
<li>我们使用<code>&lt;jsp:useBean&gt;</code>就显得非常简洁，<strong>不用导包，不用 new 出对象</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    person.setName(&quot;zhongfucheng&quot;);</span><br><span class="line">    System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>也可以实现同样的效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-4d75bdf940a45a61.png" alt=""></p>
<ul>
<li>有人可能会想，<strong>凭什么写一个<code>&lt;jsp:useBean&gt;</code>这样的代码就可以创建出一个对象出来</strong>。</li>
<li>现在我把 JavaBean 中<strong>无参的构造函数改成有参的</strong>，我们看看会出现什么情况，<strong>出现异常了！</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public Person(int age) &#123;</span><br><span class="line">       this.age = age;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-eecf68c20b68d28f.png" alt=""></p>
<ul>
<li><code>&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;page&quot;/&gt;</code>内部原理是这样子的：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-5438349f470b0f63.png" alt=""></p>
<ul>
<li>通过上面的代码我们也<strong>知道了为什么要有一个无参的构造函数</strong>！<strong>内部在 new 对象的时候是没有传递参数进去的！</strong></li>
</ul>
<h3 id="jsp-setProperty"><a href="#jsp-setProperty" class="headerlink" title="jsp:setProperty"></a><code>jsp:setProperty</code></h3><ul>
<li><strong>语法：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:setProerty &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>在语法上可分为 4 种模式</strong></p>
</li>
<li><p>当<strong>我们没有学习到<code>&lt;jsp:setProperty&gt;</code>时</strong>，我们获<strong>取表单的信息，然后导入到 javaBean 对象中是这样的一种情况</strong>：</p>
</li>
<li><p>这是<strong>表单的页面代码</strong>：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;form action=&quot;/zhongfucheng/1.jsp&quot; method=&quot;post&quot;&gt;</span><br><span class="line">    用户名：&lt;input type=&quot;text&quot; &gt;</span><br><span class="line">    年龄：&lt;input type=&quot;text &quot; &gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>这是<strong>处理表单提交过来数据的 jsp 的代码</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    int age = Integer.parseInt(request.getParameter(&quot;age&quot;));</span><br><span class="line"></span><br><span class="line">    person.setAge(age);</span><br><span class="line"></span><br><span class="line">    System.out.println(person.getAge());</span><br><span class="line"></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>这是可以完成的，但是相对来说，比较麻烦！</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6f4096d2361dafac.png" alt=""></p>
<ul>
<li>我们来<strong>使用</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--指定属性名称为age--%&gt;</span><br><span class="line">&lt;jsp:setProperty /&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(person.getAge());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>也可以完成，并且<strong>代码更少，功能更强大</strong>！</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-ab30f70ae60fa3d2.png" alt=""></p>
<ul>
<li>代码更少可以直观看出来，为什么我说它功能更加强大呢？<strong>表单提交过来的数据都是字符串，在我们没有用</strong>！但是</li>
<li>我们再来<strong>使用一下自动匹配来感受它的强大之处吧</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--property的值设置为*就代表自动匹配--%&gt;</span><br><span class="line">&lt;jsp:setProperty /&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    System.out.println(person.getAge());</span><br><span class="line">    System.out.println(person.getName());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们再来看一下效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-db74734b9e4f5e47.png" alt=""></p>
<ul>
<li>看到这里，有人可能会觉得好神奇：<strong>只要设置 property 的值就可以将表单传递过来的数据封装到 JavaBean 对象中了</strong>！这究竟是这样做到的？？？</li>
<li>细心的朋友会发现，<strong>JavaBean 的属性名称和表单的 name 属性设置的名称是一模一样的</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">private String username ;</span><br><span class="line">private int age;</span><br><span class="line"></span><br><span class="line">用户名：&lt;input type=&quot;text&quot; &gt;</span><br><span class="line">年龄：&lt;input type=&quot;text &quot; &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>如果我设置不一样还能不能用？我们试试：表单 name 属性的 username 改成是 user</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">用户名：&lt;input type=&quot;text&quot; &gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们再来<strong>看看还能不能把表单的数据完整地封装 JavaBean 对象中</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-55bebec45ca03ea5.png" alt=""></p>
<ul>
<li>我们可以发现：<strong>要想能够把表单带过来的数据成功封装到 JavaBean 对象上，名字要一致</strong>！也就是说：<strong>JavaBean 属性名要和表单的 name 的名称一致</strong></li>
<li>至于原理，<strong>它是通过反射来做的, 调用了内省的方法</strong>！，我们看编译后的 JSP 就明白了。</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-48a6fac5f90e300d.png" alt=""></p>
<hr>
<h3 id="jsp-getProperty"><a href="#jsp-getProperty" class="headerlink" title="jsp:getProperty"></a><code>jsp:getProperty</code></h3><ul>
<li><strong>语法：</strong></li>
<li>该 jsp 行为十分简单，我们来使用一下就知道了。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--使用&lt;jsp:getProperty&gt;输出--%&gt;</span><br><span class="line">&lt;jsp:getProperty /&gt;</span><br><span class="line">&lt;jsp:getProperty /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-73d993ac4bfeaf55.png" alt=""></p>
<ul>
<li>原理如下</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1159a4356c5dab26.png" alt=""></p>
<hr>
<h1 id="JSP-第四篇【EL-表达式介绍、获取各类数据、11-个内置对象、执行运算、回显数据、自定义函数、fn-方法库】"><a href="#JSP-第四篇【EL-表达式介绍、获取各类数据、11-个内置对象、执行运算、回显数据、自定义函数、fn-方法库】" class="headerlink" title="JSP 第四篇【EL 表达式介绍、获取各类数据、11 个内置对象、执行运算、回显数据、自定义函数、fn 方法库】"></a>JSP 第四篇【EL 表达式介绍、获取各类数据、11 个内置对象、执行运算、回显数据、自定义函数、fn 方法库】</h1><h2 id="什么是-EL-表达式？"><a href="#什么是-EL-表达式？" class="headerlink" title="什么是 EL 表达式？"></a>什么是 EL 表达式？</h2><p><strong>表达式语言（Expression Language，EL）,EL 表达式是用 “${}” 括起来的脚本，用来更方便的读取对象！</strong></p>
<ul>
<li><strong>EL 表达式主要用来读取数据，进行内容的显示！</strong></li>
</ul>
<h2 id="为什么要使用-EL-表达式？"><a href="#为什么要使用-EL-表达式？" class="headerlink" title="为什么要使用 EL 表达式？"></a>为什么要使用 EL 表达式？</h2><ul>
<li><p>为什么要使用 EL 表达式，我们先来看一下<strong>没有 EL 表达式是怎么样读取对象数据的吧</strong>！</p>
</li>
<li><p><strong>在 1.jsp 中设置了 Session 属性</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;向session设置一个属性&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    //向session设置一个属性</span><br><span class="line">    session.setAttribute(&quot;name&quot;, &quot;aaa&quot;);</span><br><span class="line">    System.out.println(&quot;向session设置了一个属性&quot;);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 2.jsp 中获取 Session 设置的属性</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">        String value = (String) session.getAttribute(&quot;name&quot;);</span><br><span class="line">        out.write(value);</span><br><span class="line">%&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>上面看起来，也没有多复杂呀，那我们试试 EL 表达式的！</p>
</li>
<li><p><strong>在 2.jsp 中读取 Session 设置的属性</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">$&#123;name&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>只用了简简单单的几个字母就能输出 Session 设置的属性了！并且输出在浏览器上！</strong></li>
</ul>
<ul>
<li>使用 EL 表达式<strong>可以方便地读取对象中的属性、提交的参数、JavaBean、甚至集合</strong>！</li>
</ul>
<hr>
<h2 id="EL-表达式的作用"><a href="#EL-表达式的作用" class="headerlink" title="EL 表达式的作用"></a>EL 表达式的作用</h2><ul>
<li>首先来<strong>看一下 EL 表达式的语法吧</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$&#123;标识符&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>EL 表达式如果找不到相应的对象属性，返回的的空白字符串 “”，而不是 null，这是 EL 表达式最大的特点！</strong></li>
</ul>
<h3 id="获取各类数据"><a href="#获取各类数据" class="headerlink" title="获取各类数据"></a>获取各类数据</h3><h4 id="获取域对象的数据"><a href="#获取域对象的数据" class="headerlink" title="获取域对象的数据"></a>获取域对象的数据</h4><ul>
<li>上面在例子中，我们已经体验到了<strong>获取 Session 域对象的数据是多么地方便！</strong>其实 EL 表达式可以让我们获取各个域范围的数据</li>
<li><strong>在 1.jsp 中设置 ServeltContext 属性（也就是 application）</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    //向ServletContext设置一个属性</span><br><span class="line">    application.setAttribute(&quot;name&quot;, &quot;aaa&quot;);</span><br><span class="line">    System.out.println(&quot;向application设置了一个属性&quot;);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 2.jsp 中获取 application 的属性</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    $&#123;name&#125;</span><br><span class="line"></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>和 Session 一样，也能获取得到！</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-78851abb8bd4ebed.png" alt=""></p>
<ul>
<li>之前我们来讲 ServletContext 对象的时候讲过一个方法 findAttribute(String name),<strong>EL 表达式语句在执行的时候会调用该方法，用标识符作为关键字分别从 page、request、session、application 四个域中查找相应的对象。</strong>这也解释了为什么 EL 表达式可以仅仅通过标识符就能够获取到存进域对象的数据！</li>
<li><strong>findAttribute() 的查找顺序：从小到大，也就是 page-&gt;request-&gt;session-&gt;application</strong></li>
</ul>
<h4 id="获取-JavaBean-的属性"><a href="#获取-JavaBean-的属性" class="headerlink" title="获取 JavaBean 的属性"></a>获取 JavaBean 的属性</h4><ul>
<li><strong>以前在 JSP 页面获取 JavaBean 的数据是这样子的</strong>：</li>
<li><strong>1.jsp 页面 Session 存进一个 Person 对象，设置 age 的属性为 22</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;session&quot;/&gt;</span><br><span class="line">&lt;jsp:setProperty /&gt;</span><br></pre></td></tr></table></figure>
<p><strong>在 2.jsp 中取出 Session 的属性</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    Person person = (Person) session.getAttribute(&quot;person&quot;);</span><br><span class="line"></span><br><span class="line">    System.out.println(person.getAge());</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>现在我<strong>使用了 EL 表达式读取数据又会非常方便了</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//等同于person.getAge()</span><br><span class="line">$&#123;person.age&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>上面的代码 <strong>等同于调用对象的 getter 方法，内部是通过反射机制完成的</strong>！</li>
</ul>
<h4 id="获取集合的数据"><a href="#获取集合的数据" class="headerlink" title="获取集合的数据"></a>获取集合的数据</h4><ul>
<li><p>集合操作在开发中被广泛地采用，在 <strong>EL 表达式中也很好地支持了集合的操作</strong>！可以<strong>非常方便地读取 Collection 和 Map 集合的内容</strong></p>
</li>
<li><p>为了更好地看出 EL 表达式的强大之处，我们也来对比一下使用 EL 表达式和不使用 EL 表达式的区别</p>
</li>
<li><p>下面<strong>不使用 EL 表达式输出集合的元素</strong></p>
</li>
<li><p><strong>在 1.jsp 页面中设置 session 的属性，session 属性的值是 List 集合，List 集合装载的又是 Person 对象</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    List&lt;Person&gt; list = new ArrayList();</span><br><span class="line"></span><br><span class="line">    Person person1 = new Person();</span><br><span class="line">    person1.setUsername(&quot;zhongfucheng&quot;);</span><br><span class="line"></span><br><span class="line">    Person person2 = new Person();</span><br><span class="line">    person2.setUsername(&quot;ouzicheng&quot;);</span><br><span class="line"></span><br><span class="line">    list.add(person1);</span><br><span class="line">    list.add(person2);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(&quot;list&quot;,list);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 2.jsp 中获取到 session 的属性，并输出到页面上</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    List&lt;Person&gt; list = (List) session.getAttribute(&quot;list&quot;);</span><br><span class="line"></span><br><span class="line">    out.write(list.get(0).getUsername()+&quot;&lt;br&gt;&quot;);</span><br><span class="line"></span><br><span class="line">    out.write(list.get(1).getUsername());</span><br><span class="line"></span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<p><strong>使用 EL 表达式又是怎么样的效果呢？我们来看看</strong>！</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;%--取出list集合的第1个元素（下标从0开始），获取username属性--%&gt;</span><br><span class="line">$&#123;list[0].username&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">&lt;%--取出list集合的第2个元素，获取username属性--%&gt;</span><br><span class="line">$&#123;list[1].username&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>我们再来<strong>使用一下 Map 集合</strong></p>
</li>
<li><p><strong>在 1.jsp 中 session 属性存储了 Map 集合，Map 集合的关键字是字符串，值是 Person 对象</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line"></span><br><span class="line">    Map&lt;String, Person&gt; map = new HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    Person person1 = new Person();</span><br><span class="line">    person1.setUsername(&quot;zhongfucheng1&quot;);</span><br><span class="line"></span><br><span class="line">    Person person2 = new Person();</span><br><span class="line">    person2.setUsername(&quot;ouzicheng1&quot;);</span><br><span class="line"></span><br><span class="line">    map.put(&quot;aa&quot;,person1);</span><br><span class="line">    map.put(&quot;bb&quot;,person2);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(&quot;map&quot;,map);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>看起来好像取出数据的时候是会有点复杂，但是有了 EL 表达式也是非常轻松的</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$&#123;map.aa.username&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">$&#123;map.bb.username&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>效果：</p>
</li>
<li><p>如果 <strong>Map 集合存储的关键字是一个数字，就不能使用 “.” 号运算符了</strong>，如下所示</p>
</li>
</ul>
<ul>
<li>对于这种情况，我们可以<strong>使用 “[]” 的形式读取 Map 集合的数据</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">$&#123;map[&quot;1&quot;].username&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line">$&#123;map[&quot;2&quot;].username&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>EL 表达式配合 JSTL 标签可以很方便的迭代集合，后面讲到 JSTL 标签的时候会用到!</strong> 这里就不详细说明了。</li>
</ul>
<hr>
<h3 id="EL-运算符"><a href="#EL-运算符" class="headerlink" title="EL 运算符"></a>EL 运算符</h3><ul>
<li><strong>EL 表达式支持简单的运算符：加减乘除取摸，逻辑运算符</strong>。<strong>empty 运算符（判断是否为 null)，三目运算符</strong></li>
</ul>
<ul>
<li><strong>empty 运算符可以判断对象是否为 null，用作于流程控制！</strong></li>
<li><strong>三目运算符简化了 if 和 else 语句，简化代码书写</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    List&lt;Person&gt; list = null;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">$&#123;list==null?&quot;list集合为空&quot;:&quot;list集合不为空&quot;&#125;</span><br></pre></td></tr></table></figure>
<hr>
<h3 id="EL-表达式-11-个内置对象"><a href="#EL-表达式-11-个内置对象" class="headerlink" title="EL 表达式 11 个内置对象"></a>EL 表达式 11 个内置对象</h3><p><strong>EL 表达式主要是来对内容的显示，为了显示的方便，EL 表达式提供了 11 个内置对象</strong>。</p>
<ol>
<li><strong>pageContext 对应于 JSP 页面中的 pageContext 对象（注意：取的是 pageContext 对象）</strong></li>
<li><strong>pageScope 代表 page 域中用于保存属性的 Map 对象</strong></li>
<li><strong>requestScope 代表 request 域中用于保存属性的 Map 对象</strong></li>
<li><strong>sessionScope 代表 session 域中用于保存属性的 Map 对象</strong></li>
<li><strong>applicationScope 代表 application 域中用于保存属性的 Map 对象</strong></li>
<li><strong>param 表示一个保存了所有请求参数的 Map 对象</strong></li>
<li><strong>paramValues 表示一个保存了所有请求参数的 Map 对象，它对于某个请求参数，返回的是一个 string[]</strong></li>
<li><strong>header 表示一个保存了所有 http 请求头字段的 Map 对象</strong></li>
<li><strong>headerValues 同上，返回 string[] 数组。</strong></li>
<li><strong>cookie 表示一个保存了所有 cookie 的 Map 对象</strong></li>
<li><strong>initParam 表示一个保存了所有 web 应用初始化参数的 map 对象</strong></li>
</ol>
<ul>
<li>下面<strong>测试各个内置对象</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--pageContext内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(&quot;pageContext1&quot;, &quot;pageContext&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">pageContext内置对象：$&#123;pageContext.getAttribute(&quot;pageContext1&quot;)&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--pageScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    pageContext.setAttribute(&quot;pageScope1&quot;,&quot;pageScope&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">pageScope内置对象:$&#123;pageScope.pageScope1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--requestScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    request.setAttribute(&quot;request1&quot;,&quot;reqeust&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">requestScope内置对象:$&#123;requestScope.request1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--sessionScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    session.setAttribute(&quot;session1&quot;, &quot;session&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">sessionScope内置对象：$&#123;sessionScope.session1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--applicationScope内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    application.setAttribute(&quot;application1&quot;,&quot;application&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">applicationScopt内置对象：$&#123;applicationScope.application1&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--header内置对象--%&gt;</span><br><span class="line">header内置对象：$&#123;header.Host&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--headerValues内置对象,取出第一个Cookie--%&gt;</span><br><span class="line">headerValues内置对象：$&#123;headerValues.Cookie[0]&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--Cookie内置对象--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Cookie cookie = new Cookie(&quot;Cookie1&quot;, &quot;cookie&quot;);</span><br><span class="line">%&gt;</span><br><span class="line">Cookie内置对象：$&#123;cookie.JSESSIONID.value&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--initParam内置对象，需要为该Context配置参数才能看出效果【jsp配置的无效！亲测】--%&gt;</span><br><span class="line"></span><br><span class="line">initParam内置对象:$&#123;initParam.name&#125;</span><br><span class="line"></span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure>
<p><strong>注意事项：</strong></p>
<ul>
<li><p><strong>测试 headerValues 时，如果头里面有 “-” ，例 Accept-Encoding，则要 headerValues[“Accept-Encoding”]</strong></p>
</li>
<li><p><strong>测试 cookie 时，例<code>${cookie.key}</code>取的是 cookie 对象，如访问 cookie 的名称和值，须<code>${cookie.key.name}</code>或<code>${cookie.key.value}</code></strong></p>
</li>
<li><p><strong>测试 initParam 时，初始化参数要的 web.xml 中的配置 Context 的，仅仅是 jsp 的参数是获取不到的</strong></p>
</li>
<li><p>上面已经测过了 9 个内置对象了，<strong>至于 param 和 parmaValues 内置对象一般都是别的页面带数据过来的（表单、地址栏）</strong>！</p>
</li>
<li><p><strong>表单页面</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;form action=&quot;/zhongfucheng/1.jsp&quot; method=&quot;post&quot;&gt;</span><br><span class="line">用户名：&lt;input type=&quot;text&quot; &gt;&lt;br&gt;</span><br><span class="line">年龄：&lt;input type=&quot;text &quot; &gt;&lt;br&gt;</span><br><span class="line">爱好：</span><br><span class="line">&lt;input type=&quot;checkbox&quot; &gt;足球</span><br><span class="line">&lt;input type=&quot;checkbox&quot; &gt;篮球</span><br><span class="line">&lt;input type=&quot;checkbox&quot; &gt;兵乓球&lt;br&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;br&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>处理表单页面：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">$&#123;param.username&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">$&#123;param.age&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">//没有学习jstl之前就一个一个写吧。</span><br><span class="line">$&#123;paramValues.hobbies[0]&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">$&#123;paramValues.hobbies[1]&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">$&#123;paramValues.hobbies[2]&#125;</span><br><span class="line">&lt;br&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>当然了，<strong>使用地址栏方式提交数据给处理页面也是用 param 内置对象去获取数据的</strong>！</li>
</ul>
<hr>
<h3 id="EL-表达式回显数据"><a href="#EL-表达式回显数据" class="headerlink" title="EL 表达式回显数据"></a>EL 表达式回显数据</h3><p>EL 表达式最大的特点就是：<strong>如果获取到的数据为 null，输出空白字符串 “”！这个特点可以让我们数据回显</strong></p>
<ul>
<li>在 1.jsp 中模拟场景</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--模拟数据回显场景--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    User user = new User();</span><br><span class="line">    user.setGender(&quot;male&quot;);</span><br><span class="line"></span><br><span class="line">    //数据回显</span><br><span class="line">    request.setAttribute(&quot;user&quot;,user);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;input type=&quot;radio&quot;  $&#123;user.gender==&apos;male&apos;?&apos;checked&apos;:&apos;&apos; &#125;&gt;男</span><br><span class="line">&lt;input type=&quot;radio&quot;  $&#123;user.gender==&apos;female&apos;?&apos;checked&apos;:&apos;&apos; &#125;&gt;女</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="EL-自定义函数"><a href="#EL-自定义函数" class="headerlink" title="EL 自定义函数"></a>EL 自定义函数</h2><p><strong>EL 自定义函数用于扩展 EL 表达式的功能，可以让 EL 表达式完成普通 Java 程序代码所能完成的功能</strong></p>
<ul>
<li><strong>开发 HTML 转义的 EL 函数</strong></li>
<li>我们<strong>有时候想在 JSP 页面中输出 JSP 代码，但是 JSP 引擎会自动把 HTML 代码解析，输出给浏览器。此时我们就要对 HTML 代码转义</strong>。</li>
</ul>
<p><strong>步骤：</strong></p>
<ul>
<li><strong>编写一个包含静态方法的类</strong>（<strong>EL 表达式只能调用静态方法</strong>），该方法很常用，Tomcat 都有此方法，<strong>可在 \ webapps\examples\WEB-INF\classes\util 中找到</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public static String filter(String message) &#123;</span><br><span class="line"></span><br><span class="line">    if (message == null)</span><br><span class="line">        return (null);</span><br><span class="line"></span><br><span class="line">    char content[] = new char[message.length()];</span><br><span class="line">    message.getChars(0, message.length(), content, 0);</span><br><span class="line">    StringBuilder result = new StringBuilder(content.length + 50);</span><br><span class="line">    for (int i = 0; i &lt; content.length; i++) &#123;</span><br><span class="line">        switch (content[i]) &#123;</span><br><span class="line">        case &apos;&lt;&apos;:</span><br><span class="line">            result.append(&quot;&amp;lt;&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case &apos;&gt;&apos;:</span><br><span class="line">            result.append(&quot;&amp;gt;&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case &apos;&amp;&apos;:</span><br><span class="line">            result.append(&quot;&amp;amp;&quot;);</span><br><span class="line">            break;</span><br><span class="line">        case &apos;&quot;&apos;:</span><br><span class="line">            result.append(&quot;&amp;quot;&quot;);</span><br><span class="line">            break;</span><br><span class="line">        default:</span><br><span class="line">            result.append(content[i]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return (result.toString());</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 WEB/INF 下创建 tld（taglib description）文件，在 tld 文件中描述自定义函数</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;taglib xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd&quot;</span><br><span class="line">        version=&quot;2.1&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">    &lt;short-name&gt;myshortname&lt;/short-name&gt;</span><br><span class="line">    &lt;uri&gt;/zhongfucheng&lt;/uri&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--函数的描述--&gt;</span><br><span class="line">    &lt;function&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--函数的名字--&gt;</span><br><span class="line">        &lt;name&gt;filter&lt;/name&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--函数位置--&gt;</span><br><span class="line">        &lt;function-class&gt;utils.HTMLFilter&lt;/function-class&gt;</span><br><span class="line"></span><br><span class="line">        &lt;!--函数的方法声明--&gt;</span><br><span class="line">        &lt;function-signature&gt;java.lang.String filter(java.lang.String)&lt;/function-signature&gt;</span><br><span class="line">    &lt;/function&gt;</span><br><span class="line"></span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 JSP 页面中导入和使用自定义函数，EL 自定义的函数一般前缀为 “fn”，uri 是 “/WEB-INF/tld 文件名称”</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot; %&gt;</span><br><span class="line">&lt;%@taglib prefix=&quot;fn&quot; uri=&quot;/WEB-INF/zhongfucheng.tld&quot; %&gt;</span><br><span class="line"></span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line"></span><br><span class="line">//完成了HTML转义的功能</span><br><span class="line">$&#123;fn:filter(&quot;&lt;a href=&apos;#&apos;&gt;点我&lt;/a&gt;&quot;)&#125;</span><br><span class="line"></span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p>[图片上传中…(image-1fc61b-1517900786708-3)]</p>
<hr>
<h2 id="EL-函数库（fn-方法库）"><a href="#EL-函数库（fn-方法库）" class="headerlink" title="EL 函数库（fn 方法库）"></a>EL 函数库（fn 方法库）</h2><ul>
<li><p>由于<strong>在 JSP 页面中显示数据时，经常需要对显示的字符串进行处理，SUN 公司针对于一些常见处理定义了一套 EL 函数库供开发者使用</strong>。</p>
</li>
<li><p><strong>其实 EL 函数库就是 fn 方法库，是 JSTL 标签库中的一个库，</strong>也有人称之为 fn 标签库，但是该库<strong>长得不像是标签</strong>，所以称之为 fn 方法库</p>
</li>
<li><p>既然作为 JSTL 标签库中的一个库，<strong>要使用 fn 方法库就需要导入 JSTL 标签</strong>！<strong>要想使用 JSTL 标签库就要导入 jstl.jar 和 standard.jar 包！</strong></p>
</li>
<li><p>所以，要对 fn 方法库做测试，首先<strong>导入开发包（jstl.jar、standard.jar)</strong></p>
</li>
</ul>
<ul>
<li><strong>在 JSP 页面中指明使用标签库</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%@taglib prefix=&quot;fn&quot; uri=&quot;http://java.sun.com/jsp/jstl/functions&quot; %&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>fn 方法库全都是跟字符串有关的（可以把它想成是 String 的方法）</strong></p>
</li>
<li><p><strong>fn:toLowerCase</strong></p>
</li>
<li><p><strong>fn:toUpperCase</strong></p>
</li>
<li><p><strong>fn:trim</strong></p>
</li>
<li><p><strong>fn:length</strong></p>
</li>
<li><p><strong>fn:split</strong></p>
</li>
<li><p><strong>fn:join</strong> 【接收字符数组，拼接字符串】</p>
</li>
<li><p><strong>fn:indexOf</strong></p>
</li>
<li><p><strong>fn:contains</strong></p>
</li>
<li><p><strong>fn:startsWith</strong></p>
</li>
<li><p><strong>fn:replace</strong></p>
</li>
<li><p><strong>fn:substring</strong></p>
</li>
<li><p><strong>fn:substringAfter</strong></p>
</li>
<li><p><strong>fn:endsWith</strong></p>
</li>
<li><p><strong>fn:escapeXml</strong>【忽略 XML 标记字符】</p>
</li>
<li><p><strong>fn:substringBefore</strong></p>
</li>
<li><p>测试代码：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">contains:$&#123;fn:contains(&quot;zhongfucheng&quot;,zhong )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">containsIgnoreCase:$&#123;fn:containsIgnoreCase(&quot;zhongfucheng&quot;,ZHONG )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">endsWith:$&#123;fn:endsWith(&quot;zhongfucheng&quot;,&quot;eng&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">escapeXml:$&#123;fn:escapeXml(&quot;&lt;zhongfucheng&gt;你是谁呀&lt;/zhongfucheng&gt;&quot;)&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">indexOf:$&#123;fn:indexOf(&quot;zhongfucheng&quot;,&quot;g&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">length:$&#123;fn:length(&quot;zhongfucheng&quot;)&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">replace:$&#123;fn:replace(&quot;zhongfucheng&quot;,&quot;zhong&quot; ,&quot;ou&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">split:$&#123;fn:split(&quot;zhong,fu,cheng&quot;,&quot;,&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">startsWith:$&#123;fn:startsWith(&quot;zhongfucheng&quot;,&quot;zho&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">substring:$&#123;fn:substring(&quot;zhongfucheng&quot;,&quot;2&quot; , fn:length(&quot;zhongfucheng&quot;))&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">substringAfter:$&#123;fn:substringAfter(&quot;zhongfucheng&quot;,&quot;zhong&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">substringBefore:$&#123;fn:substringBefore(&quot;zhongfucheng&quot;,&quot;fu&quot; )&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">toLowerCase:$&#123;fn:toLowerCase(&quot;zhonGFUcheng&quot;)&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">toUpperCase:$&#123;fn:toUpperCase(&quot;zhongFUcheng&quot;)&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">trim:$&#123;fn:trim(&quot;              zhong    fucheng    &quot;)&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--将分割成的字符数组用&quot;.&quot;拼接成一个字符串--%&gt;</span><br><span class="line">join:$&#123;fn:join(fn:split(&quot;zhong,fu,cheng&quot;,&quot;,&quot; ),&quot;.&quot; )&#125;&lt;br&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>使用 fn 方法库数据回显</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    User user = new User();</span><br><span class="line">    String likes[] = &#123;&quot;sing&quot;&#125;;</span><br><span class="line">    user.setLikes(likes);</span><br><span class="line"></span><br><span class="line">    //数据回显</span><br><span class="line">    request.setAttribute(&quot;user&quot;,user);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--java的字符数组以&quot;,&quot;号分割开，首先拼接成一个字符串，再判读该字符串有没有包含关键字，如果有就checked--%&gt;</span><br><span class="line">&lt;input type=&quot;checkbox&quot;$&#123; fn:contains(fn:join(user.likes,&quot;,&quot;),&quot;sing&quot;)?&apos;checked&apos;:&apos;&apos; &#125;&gt;唱歌</span><br><span class="line">&lt;input type=&quot;checkbox&quot;$&#123; fn:contains(fn:join(user.likes,&quot;,&quot;),&quot;dance&quot;)?&apos;checked&apos;:&apos;&apos; &#125;&gt;跳舞</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="JSP-第五篇【JSTL-的介绍、core-标签库、fn-方法库、fmt-标签库】"><a href="#JSP-第五篇【JSTL-的介绍、core-标签库、fn-方法库、fmt-标签库】" class="headerlink" title="JSP 第五篇【JSTL 的介绍、core 标签库、fn 方法库、fmt 标签库】"></a>JSP 第五篇【JSTL 的介绍、core 标签库、fn 方法库、fmt 标签库】</h1><h2 id="什么是-JSTL"><a href="#什么是-JSTL" class="headerlink" title="什么是 JSTL"></a>什么是 JSTL</h2><p><strong>JSTL 全称为 JSP Standard Tag Library 即 JSP 标准标签库</strong>。</p>
<p>JSTL 作为最基本的标签库，<strong>提供了一系列的 JSP 标签，实现了基本的功能：集合的遍历、数据的输出、字符串的处理、数据的格式化等等！</strong></p>
<h2 id="为什么要使用-JSTL"><a href="#为什么要使用-JSTL" class="headerlink" title="为什么要使用 JSTL"></a>为什么要使用 JSTL</h2><ul>
<li><strong>EL 表达式不够完美，需要 JSTL 的支持</strong>！在 JSP 中，我们前面已经用到了 EL 表达式，体会到了 EL 表达式的强大功能：<strong>使用 EL 表达式可以很方便地引用一些 JavaBean 以及其属性，不会抛出 NullPointerException 之类的错误！</strong>但是，EL 表达式非常有限，<strong>它不能遍历集合，做逻辑的控制。这时，就需要 JSTL 的支持了</strong>！</li>
<li><strong>Scriptlet 的可读性，维护性，重用性都十分差！</strong>JSTL 与 HTML 代码十分类似，遵循着 XML 标签语法，<strong>使用 JSTL 让 JSP 页面显得整洁，可读性非常好，重用性非常高，可以完成复杂的功能！</strong></li>
<li>在 JSP 中不推荐使用 scriptlet 输出，推荐使用 JSP 标签。</li>
</ul>
<h2 id="使用-JSTL-标签库步骤："><a href="#使用-JSTL-标签库步骤：" class="headerlink" title="使用 JSTL 标签库步骤："></a>使用 JSTL 标签库步骤：</h2><ol>
<li><strong>导入 jstl.jar 和 standard.jar 开发包</strong></li>
<li><strong>在 JSP 页面中用 tablib 指令引入需要用到的 JSTL 标签</strong></li>
</ol>
<h2 id="core-标签库"><a href="#core-标签库" class="headerlink" title="core 标签库"></a>core 标签库</h2><ul>
<li><strong>core 标签库是 JSTL 的核心标签库，实现了最基本的功能：流程控制、迭代输出等操作</strong>！</li>
<li><strong>core 标签库的前缀一般是 c</strong></li>
</ul>
<h3 id="c-out"><a href="#c-out" class="headerlink" title="c:out"></a><code>c:out</code></h3><p><img src="https://upload-images.jianshu.io/upload_images/5291509-7118b79a9b40325d.png" alt=""></p>
<ul>
<li><strong>简单使用一下</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    session.setAttribute(&quot;name&quot;, &quot;zhongfucheng&quot;);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">//&lt;c:out/&gt;标签支持标签体，default属性上的数据可以写在标签体中</span><br><span class="line">//&lt;c:out value=&quot;$&#123;name&#125;&quot; escapeXml=&quot;true&quot;&gt;您要的数据找不着&lt;/c:out&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:out value=&quot;$&#123;name&#125;&quot; default=&quot;您要的数据找不着&quot; escapeXml=&quot;true&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们发现<strong>上面的代码实现的效果和 EL 表达式是一样的</strong>，<strong>它出色的地方就多了两个属性, default 和 escapeXml 属性。</strong>如果我们用到这两个属性，我们就使用该标签，如果没有用到这两个属性就用 EL 表达式就可以了。</li>
</ul>
<hr>
<h3 id="c-set"><a href="#c-set" class="headerlink" title="c:set"></a><code>c:set</code></h3><p><img src="https://upload-images.jianshu.io/upload_images/5291509-cab9e2562182e36b.png" alt=""></p>
<ul>
<li>该标签有 5 个属性，用起来有稍微有些复杂了！现在要记住的就是：<strong>var 属性操作的是 Integer、Double、Float、String 等类型的数据，target 属性操作的是 JavaBean 或 Map 对象的数据，scope 代表的是 Web 域，value 是值，property 是对象的属性</strong>！</li>
</ul>
<h4 id="使用-var-属性"><a href="#使用-var-属性" class="headerlink" title="使用 var 属性"></a>使用 var 属性</h4><ul>
<li><p><strong>既然 var 属性只能操作 Integer、Double、String 等类型，那么存在 var 属性就一定没有 property 属性（property 代表的是对象的成员属性，Integer、String 这些类型哪来的成员变量呀）</strong></p>
</li>
<li><p>下面的代码流程是这样的：<strong>创建了一个 name 的变量，设置的值为 zhongfucheng，范围是 page</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:set var=&quot;name&quot; value=&quot;fucheng&quot; scope=&quot;page&quot;/&gt;</span><br><span class="line"></span><br><span class="line">$&#123;name&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-965346ecf0900a04.png" alt=""></p>
<ul>
<li>当然了，<strong>set 标签也支持标签体，value 的值可以写在标签体里边</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:set var=&quot;name&quot; scope=&quot;page&quot;&gt;</span><br><span class="line">    zhongfucheng</span><br><span class="line">&lt;/c:set&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>使用 var 属性和 scope 属性实现计数器</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--由于下面变量需要做加法运算，所以要定义出来，不然服务器是不知道我的变量是Integer类型的--%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    Integer sessionCount = 0;</span><br><span class="line">    Integer applicationCount = 0;</span><br><span class="line">%&gt;</span><br><span class="line">&lt;c:set var=&quot;sessionCount&quot; value=&quot;$&#123;sessionCount+1&#125;&quot; scope=&quot;session&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:set var=&quot;applicationCount&quot; value=&quot;$&#123;applicationCount+1&#125;&quot; scope=&quot;application&quot;/&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-020fa3891994ca79.png" alt=""></p>
<h4 id="使用-target-属性"><a href="#使用-target-属性" class="headerlink" title="使用 target 属性"></a>使用 target 属性</h4><ul>
<li><strong>使用 target 属性与之配对的是 property 属性，target 属性只能操作 JavaBean 或 Map 对象，property 就是对应的成员变量或 key 了。</strong>。</li>
<li><strong>既然 target 属性操作的是 JavaBean 或 Map 对象，那么一定是通过 EL 表达式来获取到对象了。taget 属性如果获取不到数据会抛出异常！使用 target 属性就一定没有 scope 属性（scope 属性代表的是保存范围，target 的值都是获取来的，难道你还能改变人家的范围？）</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--创建出JavaBean对象，设置为session范围的属性--%&gt;</span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;session&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--获取到person对象，设置age属性的值为32--%&gt;</span><br><span class="line">&lt;c:set target=&quot;$&#123;person&#125;&quot; property=&quot;age&quot; value=&quot;32&quot;/&gt;</span><br><span class="line"></span><br><span class="line">$&#123;person.age&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-81a2addeffbf3fe7.png" alt=""></p>
<h3 id="c-remove"><a href="#c-remove" class="headerlink" title="c:remove"></a><code>c:remove</code></h3><p><strong>remove 标签就相当简单了，只有 var 和 scope 属性，代表的是删除域范围的属性</strong></p>
<ul>
<li>下面简单来测试一下吧：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--创建出JavaBean对象，设置为session范围的属性--%&gt;</span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;session&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--获取到person对象，设置age属性的值为32--%&gt;</span><br><span class="line">&lt;c:set target=&quot;$&#123;person&#125;&quot; property=&quot;age&quot; value=&quot;32&quot;/&gt;</span><br><span class="line"></span><br><span class="line">$&#123;person.age&#125;</span><br><span class="line">&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--删除session属性--%&gt;</span><br><span class="line">&lt;c:remove var=&quot;person&quot; scope=&quot;session&quot;&gt;&lt;/c:remove&gt;</span><br><span class="line">$&#123;person.age==null?&quot;存在session的person对象被删除了！&quot;:&quot;我还在呢！&quot;&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-85f2a85076c27b80.png" alt=""></p>
<h3 id="c-catch"><a href="#c-catch" class="headerlink" title="c:catch"></a><code>c:catch</code></h3><p><strong>该标签主要用来处理程序中产生的异常。</strong></p>
<p><strong>catch 标签也十分简单，只有一个 var 属性，var 属性封装了异常的信息！</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--创建出JavaBean对象，设置为session范围的属性--%&gt;</span><br><span class="line">&lt;jsp:useBean id=&quot;person&quot; class=&quot;domain.Person&quot; scope=&quot;session&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:catch var=&quot;message&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;%--target属性只能是EL表达式，现在我是字符串，获取不到对象，肯定会抛出异常的！--%&gt;</span><br><span class="line">    &lt;c:set target=&quot;person&quot; property=&quot;age&quot; value=&quot;32&quot;/&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c:catch&gt;</span><br><span class="line"></span><br><span class="line">$&#123;message&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-cfda73e429e5fb3a.png" alt=""></p>
<h3 id="c-if"><a href="#c-if" class="headerlink" title="c:if"></a><code>c:if</code></h3><p><img src="https://upload-images.jianshu.io/upload_images/5291509-6f18061e6389d975.png" alt=""></p>
<p><strong>JSTL 提供了 if 标签完成分支语句的实现，test 属性是不可或缺的</strong>。</p>
<p><strong>var 和 scope 属性我看来好像没什么用的（保存执行结果有什么用？）</strong></p>
<ul>
<li><strong>根据传递过来的参数的不同显示不同的页面！</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%--如果带过来的名字是zhongfucheng，那么可以登陆--%&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;param.name==&apos;zhongfucheng&apos;&#125;&quot;&gt;</span><br><span class="line">    用户名：&lt;input type=&quot;text&quot; &gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=&quot;password&quot; &gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;登陆&quot;&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br><span class="line"></span><br><span class="line">&lt;%--如果带过来的名字是ouzicheng，那么就是注册--%&gt;</span><br><span class="line">&lt;c:if test=&quot;$&#123;param.name==&apos;ouzicheng&apos;&#125;&quot;&gt;</span><br><span class="line">    用户名：&lt;input type=&quot;text&quot; &gt;&lt;br&gt;</span><br><span class="line">    密码：&lt;input type=&quot;password&quot; &gt;&lt;br&gt;</span><br><span class="line">    &lt;input type=&quot;submit&quot; value=&quot;注册&quot;&gt;</span><br><span class="line">&lt;/c:if&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>注意地址栏的参数！</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-68b1befdc036732d.png" alt=""> <img src="https://upload-images.jianshu.io/upload_images/5291509-4d2595613461cfdd.png" alt=""></p>
<hr>
<h3 id="c-choose"><a href="#c-choose" class="headerlink" title="c:choose"></a><code>c:choose</code></h3><p><strong>if 标签没有 else 的功能，如果需要类似于 java 中的 if else 流程就需要使用 choose 标签。</strong></p>
<p><strong>choose 标签需要联合 when 和 otherwise 标签一起使用！</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:choose&gt;</span><br><span class="line">    &lt;c:when test=&quot;$&#123;param.name==&apos;zhongfucheng&apos;&#125;&quot;&gt;</span><br><span class="line">        你好啊，zhongfucheng</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:when test=&quot;$&#123;param.name==&apos;ouzicheng&apos;&#125;&quot;&gt;</span><br><span class="line">        你好啊，ouzicheng</span><br><span class="line">    &lt;/c:when&gt;</span><br><span class="line">    &lt;c:otherwise&gt;</span><br><span class="line">        你是谁啊？别随便过来！</span><br><span class="line">    &lt;/c:otherwise&gt;</span><br><span class="line">&lt;/c:choose&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-a335c99c4956ded5.png" alt=""> <img src="https://upload-images.jianshu.io/upload_images/5291509-6a61bd3dcf0ed277.png" alt=""></p>
<hr>
<h3 id="c-forEach"><a href="#c-forEach" class="headerlink" title="c:forEach"></a><code>c:forEach</code></h3><p><img src="https://upload-images.jianshu.io/upload_images/5291509-22cf7a45555fa9c2.png" alt=""></p>
<p><strong>forEach 为循环标签，相当于 Java 中的 while 和 for</strong></p>
<ul>
<li><p><strong>之前我们在使用 EL 表达式获取到集合的数据，遍历集合都是用 scriptlet 代码循环，现在我们学了 forEach 标签就可以舍弃 scriptlet 代码了。</strong></p>
</li>
<li><p><strong>向 Session 中设置属性，属性的类型是 List 集合</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    List list = new ArrayList&lt;&gt;();</span><br><span class="line">    list.add(&quot;zhongfucheng&quot;);</span><br><span class="line">    list.add(&quot;ouzicheng&quot;);</span><br><span class="line">    list.add(&quot;xiaoming&quot;);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(&quot;list&quot;, list);</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>遍历 session 属性中的 List 集合, items：即将要迭代的集合。var：当前迭代到的元素</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:forEach  var=&quot;list&quot; items=&quot;$&#123;list&#125;&quot; &gt;</span><br><span class="line">    $&#123;list&#125;&lt;br&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-4208386b31611d56.png" alt=""></p>
<ul>
<li><strong>遍历 Map 对象有稍微地不一样，我们来看一下，var 属性保存的不是每个迭代的对象，而是 Map.Entry。</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;%</span><br><span class="line">    Map map = new HashMap();</span><br><span class="line">    map.put(&quot;1&quot;, &quot;zhongfucheng&quot;);</span><br><span class="line">    map.put(&quot;2&quot;, &quot;xiaohong&quot;);</span><br><span class="line">    map.put(&quot;3&quot;, &quot;xiaoming&quot;);</span><br><span class="line"></span><br><span class="line">    session.setAttribute(&quot;map&quot;,map);</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;c:forEach  var=&quot;me&quot; items=&quot;$&#123;map&#125;&quot; &gt;</span><br><span class="line"></span><br><span class="line">    $&#123;me.key&#125;  $&#123;me.value&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1be134715fbdd406.png" alt=""></p>
<ul>
<li><p><strong>begin 默认从 0 开始、end 默认为集合的最后一个元素、step 默认为 1</strong></p>
</li>
<li><p><strong>varStatus 代表着当前对象被迭代的信息，它有以下的属性</strong>。</p>
<ul>
<li><strong>index【返回当前是第几个对象，从 0 开始计数】</strong></li>
<li><strong>count【已经遍历多少个对象了，从 1 开始计数】</strong></li>
<li>first【是否是第一个】</li>
<li>last【是否是最后一个】</li>
<li><strong>current【当前被迭代的对象】</strong></li>
<li>begin【开始的位置】</li>
<li>end【最后的位置】</li>
<li>step【步长】</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:forEach  var=&quot;list&quot; items=&quot;$&#123;list&#125;&quot; varStatus=&quot;varStatus&quot; &gt;</span><br><span class="line"></span><br><span class="line">    $&#123;list&#125;您的下标是:$&#123;varStatus.index&#125;&lt;br&gt;</span><br><span class="line"></span><br><span class="line">&lt;/c:forEach&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-ccb6fcd825283b4c.png" alt=""></p>
<hr>
<h3 id="c-forTokens"><a href="#c-forTokens" class="headerlink" title="c:forTokens"></a><code>c:forTokens</code></h3><p><strong>该标签类似于 String 类的 split() 和 for 循环的一种集合</strong></p>
<p><strong>它与 forEach 标签非常相似，都有 begin、end、step、items、var、varStatus 属性，不同的是 forTokens 标签的 items 属性里面是字符串，这个字符串会被 delims 属性的内容分割成多个字符串！</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:forTokens items=&quot;zhongfucheng,ouzicheng,xiaoming,xiaohong&quot; var=&quot;name&quot; delims=&quot;,&quot; &gt;</span><br><span class="line">    $&#123;name&#125;</span><br><span class="line">&lt;/c:forTokens&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果图：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-490b580e44406703.png" alt=""></p>
<hr>
<h3 id="c-import"><a href="#c-import" class="headerlink" title="c:import"></a><code>c:import</code></h3><p><strong>import 标签类似于 JSP 行为<code>&lt;jsp:include/&gt;</code>和 JSP 指令<code>&lt;%include&gt;</code></strong></p>
<p>import 标签的属性：</p>
<ol>
<li><strong>url【指定要包含的路径，Internet 所有的 url 都可以】</strong></li>
<li><strong>context【访问同一个 web 容器的其他资源，以 “/“ 开头】</strong></li>
<li><strong>var【保存导入的文件的内容，以 String 类型存储】</strong></li>
<li><strong>socpe【保存的范围，默认是 page】</strong></li>
<li><strong>charEncoding【字符编码】</strong></li>
<li><strong>varReader【保存导入文件的内容，以 Reader 类型存储】</strong></li>
</ol>
<p>当然了，<strong>import 标签功能更加更大</strong>！强大在哪里呢？<strong>import 标签可以引入 Internet 网页上的内容，也就是说，csdn 也可以引入进来！</strong></p>
<ul>
<li>我们来用一下把！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:import url=&quot;http://www.csdn.net&quot; charEncoding=&quot;UTF-8&quot; /&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>我们一看，是没有样式的</strong>：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6766dbf496b60b3b.png" alt=""></p>
<ul>
<li><strong>打印 csdn 的源代码</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:import url=&quot;http://www.csdn.net&quot; charEncoding=&quot;UTF-8&quot; var=&quot;net&quot;/&gt;</span><br><span class="line"></span><br><span class="line">CSDN的源码是：&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;</span><br><span class="line">&lt;c:out value=&quot;$&#123;net&#125;&quot; escapeXml=&quot;true&quot;&gt;&lt;/c:out&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-34dfa15cdebcfbdb.png" alt=""></p>
<hr>
<h3 id="c-param"><a href="#c-param" class="headerlink" title="c:param"></a><code>c:param</code></h3><ul>
<li>在 JSP 页面进行 URL 的相关操作时，<strong>经常要在 URL 地址后面附加一些参数。</strong></li>
</ul>
<hr>
<h3 id="c-url"><a href="#c-url" class="headerlink" title="c:url"></a><code>c:url</code></h3><p>url 标签十分实用！在浏览器禁用 Cookie 的时候，我们之前学 Servlet 时解决办法是：response.encodeURL()。<strong>url 标签也可以实现这样的功能，再配合 param 标签使用，就十分实用了！</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6f59946161c7dc5a.png" alt=""></p>
<ul>
<li>我们<strong>配合 param 标签来使用一下吧</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:url value=&quot;2.jsp&quot; var=&quot;url&quot;&gt;</span><br><span class="line">    &lt;c:param 中国！&quot;&gt;</span><br><span class="line">    &lt;/c:param&gt;</span><br><span class="line">&lt;/c:url&gt;</span><br><span class="line"></span><br><span class="line">&lt;a href=&quot;$&#123;url&#125;&quot;&gt;我经过了URL地址重写！&lt;/a&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-0a45ae588c1a4e85.png" alt=""></p>
<hr>
<h3 id="c-redirect"><a href="#c-redirect" class="headerlink" title="c:redirect"></a><code>c:redirect</code></h3><p><strong>redirect 标签用于实现 Redirect 功能，当然了，此标签也能够配合 param 标签使用！</strong></p>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6bc51adc26c7e2e1.png" alt=""></p>
<ul>
<li>简单使用一下，<strong>重定向到 2.jsp，带了一个参数</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;c:redirect url=&quot;2.jsp&quot; &gt;</span><br><span class="line">    &lt;c:param &gt;</span><br><span class="line">    &lt;/c:param&gt;</span><br><span class="line">&lt;/c:redirect&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 2.jsp 中获取到参数</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-7f6a306d4f93fd33.png" alt=""></p>
<hr>
<h2 id="fmt-标签库"><a href="#fmt-标签库" class="headerlink" title="fmt 标签库"></a>fmt 标签库</h2><p><strong>fmt 标签库也叫做国际化标签库</strong>。这里就不详细说明了，等我讲到 Web 国际化的时候才讲吧！</p>
<h2 id="fn-方法库"><a href="#fn-方法库" class="headerlink" title="fn 方法库"></a>fn 方法库</h2><p><strong>fn 方法库也叫做 EL 函数库、fn 标签库。这个在讲解 EL 表达式的时候有详细的说明，可转移到我 EL 表达式的博文中</strong>！</p>
<hr>
<h1 id="JSP第六篇【自定义标签之传统标签】"><a href="#JSP第六篇【自定义标签之传统标签】" class="headerlink" title="JSP第六篇【自定义标签之传统标签】"></a>JSP第六篇【自定义标签之传统标签】</h1><h2 id="为什么要使用自定义标签？"><a href="#为什么要使用自定义标签？" class="headerlink" title="为什么要使用自定义标签？"></a>为什么要使用自定义标签？</h2><p><strong>JSTL 标签库只提供了简单的输出等功能，没有实现任何的 HTML 代码封装，并且某些复杂类型转换，或者逻辑处理的时候，JSTL 标签库完成不了，需要自定义标签!</strong></p>
<h2 id="编写自定义标签的步骤："><a href="#编写自定义标签的步骤：" class="headerlink" title="编写自定义标签的步骤："></a>编写自定义标签的步骤：</h2><ol>
<li><strong>编写一个实现 Tag 接口的 Java 类【标签处理器类】</strong></li>
<li><strong>在 WEB-INF 目录下创建 tld(Tag Library Descriptor) 文件，在 tld 文件中对标签处理类（实现 Tag 接口的 Java 类）进行描述</strong></li>
</ol>
<h2 id="快速入门"><a href="#快速入门" class="headerlink" title="快速入门"></a>快速入门</h2><ul>
<li><p>目标：<strong>使用标签输出客户机的 IP 地址</strong>！</p>
</li>
<li><p>按照步骤来：<strong>首先编写一个实现 Tag 接口的 Java 类</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class showIp implements Tag &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setPageContext(PageContext pageContext) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void setParent(Tag tag) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public Tag getParent() &#123;</span><br><span class="line">        return null;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doEndTag() throws JspException &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void release() &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>既然要获取到客户机的 IP 地址，那么 request 对象是必不可少的</strong>。现在问题来了，<strong>在 Tag 重写的方法好像不能直接获取到 request 对象啊</strong>。</li>
<li>经过我一番仔细的观察，发现了下面这个方法：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">@Override</span><br><span class="line">public void setPageContext(PageContext pageContext) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>既然能获取到 pageContext 对象，那么其他 8 大内置对象还不是随随便便？</strong>于是乎，我就<strong>定义一个成员变量 pageContext，在 setPageContext() 方法中传递过来的 pageContext 赋值给我定义的成员变量即可</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">private PageContext pageContext = null;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void setPageContext(PageContext pageContext) &#123;</span><br><span class="line">    this.pageContext = pageContext;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>好的，看回我们的需求：使用标签输出客户机的 IP 地址。<strong>在上面剩余 5 个方法中，最有可能就是在 doStartTag() 方法中编写代码</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">    //获取到request对象</span><br><span class="line">    HttpServletRequest httpServletRequest = (HttpServletRequest) pageContext.getRequest();</span><br><span class="line"></span><br><span class="line">    //获取到客户机的ip地址</span><br><span class="line">    String ip = httpServletRequest.getRemoteAddr();</span><br><span class="line"></span><br><span class="line">    //获取输出到浏览器的对象</span><br><span class="line">    JspWriter jspWriter = pageContext.getOut();</span><br><span class="line"></span><br><span class="line">    //下面的异常只能捕获，因为子类的异常不能比父类多</span><br><span class="line">    try &#123;</span><br><span class="line">        jspWriter.write(ip);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>接着，<strong>编写tld文件，描述实现 Tag 接口的 Java 类【标签处理类】</strong>。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;taglib xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot;</span><br><span class="line">        xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">        xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd&quot;</span><br><span class="line">        version=&quot;2.1&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">    &lt;short-name&gt;zhongfucheng&lt;/short-name&gt;</span><br><span class="line">    &lt;uri&gt;/zhongfucheng&lt;/uri&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Invoke &apos;Generate&apos; action to add tags or functions --&gt;</span><br><span class="line">    &lt;tag&gt;</span><br><span class="line">        &lt;name&gt;viewIp&lt;/name&gt;</span><br><span class="line">        &lt;tag-class&gt;tag.showIp&lt;/tag-class&gt;</span><br><span class="line">        &lt;body-content&gt;empty&lt;/body-content&gt;</span><br><span class="line">    &lt;/tag&gt;</span><br><span class="line"></span><br><span class="line">&lt;/taglib&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>下面我们<strong>来测试一下看能不能用</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-14f46763cd2a4da4.png" alt=""></p>
<hr>
<h3 id="标签处理类详细说明"><a href="#标签处理类详细说明" class="headerlink" title="标签处理类详细说明"></a>标签处理类详细说明</h3><p><strong>看完上面的程序，大部分人都是懵逼的。因为还不知道它具体是怎么用的，调用顺序是什么</strong>。</p>
<ul>
<li><strong>首先我们来看一下 Tag 接口的源码</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public interface Tag extends JspTag &#123;</span><br><span class="line">    int SKIP_BODY = 0;</span><br><span class="line">    int EVAL_BODY_INCLUDE = 1;</span><br><span class="line">    int SKIP_PAGE = 5;</span><br><span class="line">    int EVAL_PAGE = 6;</span><br><span class="line"></span><br><span class="line">    void setPageContext(PageContext var1);</span><br><span class="line"></span><br><span class="line">    void setParent(Tag var1);</span><br><span class="line"></span><br><span class="line">    Tag getParent();</span><br><span class="line"></span><br><span class="line">    int doStartTag() throws JspException;</span><br><span class="line"></span><br><span class="line">    int doEndTag() throws JspException;</span><br><span class="line"></span><br><span class="line">    void release();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>上面程序的执行流程：</strong><ul>
<li><strong>JSP 引擎遇到自定义标签，首先创建标签处理器类的实例对象</strong>。</li>
<li>JSP 引擎实例化完标签处理器类后，<strong>调用 setPageContext() 方法，将 pageContext 对象传递给标签处理器类，使得标签处理器类可以通过 pageContext 对象与 JSP 页面进行通信！</strong></li>
<li>setPageContext() 方法执行完后，<strong>调用 setParent() 方法，将当前标签的父标签传递给当前处理器类，如果当前标签没有父标签，则传入 null</strong></li>
<li><strong>当 WEB 容器执行到自定义标签的开始标记时，调用 doStartTag() 方法。</strong></li>
<li><strong>当 WEB 容器执行到自定义标签的结束标记时，调用 doEndTag() 方法。</strong></li>
<li>一般来说，<strong>当 WEB 容器执行完自定义标签后，标签处理器类会驻留在内存中，直至停止 WEB 应用时，WEB 容器才会调用 release() 方法</strong></li>
</ul>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-77da6d836f44e56a" alt=""></p>
<hr>
<ul>
<li><p>我们现在已经清楚了方法的执行顺序了，<strong>可 Tag 接口的源码还有 4 个变量阿，它们是用来做什么的呢？我们在编写 JSP 页面时，经常需要在页面中引入一些逻辑，例如：</strong></p>
<ul>
<li><strong>控制 JSP 页面某一部分（标签体）是否执行</strong></li>
<li><strong>控制整个 JSP 页面是否执行</strong></li>
<li><strong>控制 JSP 页面内容重复执行</strong></li>
<li><strong>修改 JSP 页面内容输出</strong></li>
</ul>
</li>
<li><p><strong>再看回 4 个变量的名字，我们可以发现，这 4 个变量就是用来做逻辑判断的</strong>！</p>
</li>
<li><p>我们来测试一下吧，<strong>在 doEndTag() 方法中，返回的是 SKIP_PAGE 变量，看下会怎么样</strong>！</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int doEndTag() throws JspException &#123;</span><br><span class="line">    return SKIP_PAGE;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们再来看一看效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-208810226431b8dd.png" alt=""></p>
<ul>
<li>好像是没什么区别！我们再查看一下源代码，<strong>发现执行完标签后，后面的代码全都没有执行！</strong></li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-394f652ceb7217d2.png" alt=""></p>
<ul>
<li><strong>doStartTag() 方法使用的是 SKIP_BODY 和 EVAL_BODY_INCLUDE 这两个变量，判断是否执行标签体的内容。</strong></li>
<li><strong>doEndTag() 方法使用的是 SKIP_PAGE 和 EVAL_PAGE 这两个变量，判断是否执行剩下页面的内容</strong></li>
<li><strong>控制 JSP 页面内容重复执行和修改 JSP 页面内容输出后面会有！</strong></li>
</ul>
<hr>
<h3 id="tld-文件详细说明"><a href="#tld-文件详细说明" class="headerlink" title="tld 文件详细说明"></a>tld 文件详细说明</h3><p><img src="https://upload-images.jianshu.io/upload_images/5291509-035d6f74091c7806" alt=""> <img src="https://upload-images.jianshu.io/upload_images/5291509-b2a2a8bdf67e0d0d" alt=""></p>
<ul>
<li>首先我们来<strong>看一下 tld 文件当前用到的内容吧</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;tlib-version&gt;1.0&lt;/tlib-version&gt;</span><br><span class="line">&lt;short-name&gt;myshortname&lt;/short-name&gt;</span><br><span class="line">&lt;uri&gt;http://mycompany.com&lt;/uri&gt;</span><br><span class="line"></span><br><span class="line">&lt;tag&gt;</span><br><span class="line">    &lt;name&gt;&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;&lt;/body-content&gt;</span><br><span class="line">&lt;/tag&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们一个一个来看：<ul>
<li><strong>shortname 推荐使用 prefix</strong></li>
<li><strong>uri 就是引入这个标签库使用的 uri</strong></li>
<li><strong>name 为标签名</strong></li>
<li><strong>tagclass 为实现类</strong></li>
<li><strong>bodycontent 为标签体的限制</strong>，它有 4 个值： <strong>EMPTY【不允许有标签体】，JSP【允许有 JSP 代码】 ，scriptless【不允许有脚本代码（也就是 &lt;%%&gt;），允许有 EL 表达式，文本，JSP 行为】 ， tagdepentend【标签体内的 JSP 代码不会被解析，直接输出文本】</strong></li>
</ul>
</li>
</ul>
<hr>
<h2 id="TagSupport-类"><a href="#TagSupport-类" class="headerlink" title="TagSupport 类"></a>TagSupport 类</h2><p><strong>大部分时候我们都不需要实现 Tag 接口来编写自定义标签，TagSupport 是 Tag 的一个模板类，实现了 pageContext，parent 的 getter、setter 方法以及一些其他的功能。我们要做的就是重写 doStartTag() 和 doEndTag() 方法</strong></p>
<ul>
<li><p>下面我们就来简单使用一下吧：</p>
</li>
<li><p><strong>继承 TagSupport 类，重写 doStartTag() 方法，比直接实现 Tag 接口简洁很多！</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Demo1 extends TagSupport &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        //获取到request对象</span><br><span class="line">        HttpServletRequest httpServletRequest = (HttpServletRequest) pageContext.getRequest();</span><br><span class="line"></span><br><span class="line">        String method = httpServletRequest.getMethod();</span><br><span class="line"></span><br><span class="line">        JspWriter jspWriter = pageContext.getOut();</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            jspWriter.write(method);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 tld 文件中描述一把</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;tag&gt;</span><br><span class="line">    &lt;name&gt;showMethod&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;tag.Demo1&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;empty&lt;/body-content&gt;</span><br><span class="line">&lt;/tag&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-d1ee4f89c07cfb77.png" alt=""></p>
<h3 id="带属性的标签"><a href="#带属性的标签" class="headerlink" title="带属性的标签"></a>带属性的标签</h3><p><strong>上面我们编写的自定义标签都没有附带属性的，我们在使用 core 标签库的时候，标签一般都带有属性</strong>。</p>
<p>其实 <strong>JSTL 标签库的原理就是自定义标签，把自定义标签搞明白了，对 JSTL 标签库的使用就有更好的理解了</strong>！</p>
<ul>
<li><p><strong>想要自定义标签带有属性也非常简单，只要在标签处理器类上加一个成员变量和 setter、getter()，再在 tld 文件中描述下该属性即可！它的原理是这样的：当标签使用到属性的时候，引擎就会调用它的 setter() 方法</strong></p>
</li>
<li><p>下面我想要完成的功能是：<strong>使用标签的人，传入一个字符串格式就可以显示想要的格式日期</strong></p>
</li>
<li><p><strong>编写标签处理器类，增加一个成员变量以及对应的 setter、getter 方法</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Demo1 extends TagSupport &#123;</span><br><span class="line"></span><br><span class="line">    //创建成员对象，对应的setter、getter方法</span><br><span class="line">    private String format = null;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        //创建日期格式化对象</span><br><span class="line">        SimpleDateFormat simpleDateFormat = new SimpleDateFormat(format);</span><br><span class="line"></span><br><span class="line">        //格式化日期并向浏览器输出</span><br><span class="line">        try &#123;</span><br><span class="line">            pageContext.getOut().write(simpleDateFormat.format(new Date()));</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getFormat() &#123;</span><br><span class="line">        return format;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setFormat(String format) &#123;</span><br><span class="line">        this.format = format;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>在 tld 文件中描述标签和属性，name 代表的是属性的名字，required 代表的是是否为必须，rtexprvalue 代表能否使用 EL 表达式</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;tag&gt;</span><br><span class="line">    &lt;name&gt;formatDate&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;tag.Demo1&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;empty&lt;/body-content&gt;</span><br><span class="line">    &lt;attribute&gt;</span><br><span class="line">        &lt;name&gt;format&lt;/name&gt;</span><br><span class="line">        &lt;required&gt;true&lt;/required&gt;</span><br><span class="line">        &lt;rtexprvalue&gt;true&lt;/rtexprvalue&gt;</span><br><span class="line">    &lt;/attribute&gt;</span><br><span class="line">&lt;/tag&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>我们来看一下效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-6dbc1f38dd6dc91b.png" alt=""> <img src="https://upload-images.jianshu.io/upload_images/5291509-7d717234ebdb22b6.png" alt=""></p>
<hr>
<h2 id="标签的继承关系"><a href="#标签的继承关系" class="headerlink" title="标签的继承关系"></a>标签的继承关系</h2><ul>
<li><strong>在深入讲解之前，我们先来看一下各种 Tag 接口、类之间的关系，这样学习下去才不会晕</strong>！</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-1263d39ee6e9f420.png" alt=""></p>
<h3 id="IterationTag-说明"><a href="#IterationTag-说明" class="headerlink" title="IterationTag 说明"></a>IterationTag 说明</h3><ul>
<li><strong>我们已经使用过了 Tag 接口和 TagSupport 类了</strong>。接下来我们看一下 IterationTag 是什么玩意。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public interface IterationTag extends Tag &#123;</span><br><span class="line">    int EVAL_BODY_AGAIN = 2;</span><br><span class="line"></span><br><span class="line">    int doAfterBody() throws JspException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>从关系图我们也可以看出，<strong>IterationTag 接口实现了 Tag 接口，InterationTag 接口和 Tag 接口最主要的区别就是多了个 doAfterBody() 方法和 EVAL_BODY_AGAIN 变量</strong></li>
<li>理解起来也很简单：<strong>当 doAfterBody() 返回的是 EVAL_BODY_AGAIN 变量，那么标签体的内容就一直循环</strong>！当然了，<strong>TagSupport 也实现了 Iteration 接口，也就是说 TagSupport 类也能完成 Iteration 接口的事情</strong>！</li>
<li>我们来使用一下吧：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Demo1 extends TagSupport &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        try &#123;</span><br><span class="line">            pageContext.getOut().write(&quot;hello&quot;);</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //执行标签体</span><br><span class="line">        return EVAL_BODY_INCLUDE;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doAfterBody() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        //标签体不断循环，直到doAfterBody()返回的是SKIP_BODY</span><br><span class="line">        return EVAL_BODY_AGAIN;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>tld 文件中描述，<strong>既然标签体有内容，就不能用 empty 了</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;tag&gt;</span><br><span class="line">    &lt;name&gt;foreverEval&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;tag.Demo1&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;tagdependent&lt;/body-content&gt;</span><br><span class="line">&lt;/tag&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>注意看横向的滑轮，已经死循环输出了：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-92fa0939537488a2.png" alt=""></p>
<ul>
<li><strong>doAfterBody() 中只要返回的是 SKPI_BODY 就退出循环，执行 doEndTag() 方法</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//定义一个变量，规定标签体循环的次数</span><br><span class="line">int x = 0;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">        pageContext.getOut().write(&quot;hello&quot;);</span><br><span class="line">    &#125; catch (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //执行标签体</span><br><span class="line">    return EVAL_BODY_INCLUDE;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public int doAfterBody() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">    x++;</span><br><span class="line">    if (x &gt;= 10) &#123;</span><br><span class="line">        return SKIP_BODY;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    //标签体不断循环，直到doAfterBody()返回的是SKIP_BODY</span><br><span class="line">    return EVAL_BODY_AGAIN;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>现在我们已经能控制循环的次数了</strong>！</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-f77a28b33bbf91b9.png" alt=""></p>
<hr>
<h3 id="BodyTag-说明"><a href="#BodyTag-说明" class="headerlink" title="BodyTag 说明"></a>BodyTag 说明</h3><p><strong>前面我们已经使用到了带标签体的自定义标签了，前面的都是只能直接输出而得不到标签体的内容，既然得不到标签体的内容，就更别说修改标签体了</strong>！</p>
<ul>
<li>此时，我们就需要 BodyTag 接口的支持了！<strong>它专门用来处理带标签体的标签</strong>，下面我们来<strong>看一下 BodyTag 的源码</strong>！</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public interface BodyTag extends IterationTag &#123;</span><br><span class="line">    /** @deprecated */</span><br><span class="line">    int EVAL_BODY_TAG = 2;</span><br><span class="line"></span><br><span class="line">    int EVAL_BODY_BUFFERED = 2;</span><br><span class="line"></span><br><span class="line">    void setBodyContent(BodyContent var1);</span><br><span class="line"></span><br><span class="line">    void doInitBody() throws JspException;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>BodyTag 多了 EVAL_BODY_BUFFERED 变量【一个已经标识过时了】，多了 setBodyContent 和 doInitBody() 两个方法</strong></li>
<li>其实<strong>使用 BodyTag 十分简单</strong><ul>
<li><strong>如果 doStartTag() 方法返回的是 EVAL_BODY_BUFFERED，把标签体的内容缓存起来</strong></li>
<li><strong>接着调用 setBodyContent() 方法和 doInitBody() 方法，封装标签体的内容到 BodyContent 对象中</strong></li>
<li><strong>接着调用 doEndTag() 方法</strong></li>
<li><strong>对于标签体的内容，我们可以通过 getBodyContenet() 来获取！</strong></li>
</ul>
</li>
<li><strong>再看回上面的关系图，BodyTag 实现了 IterationTag 和 Tag 接口，如果直接实现 BodyTag 接口做开发，要实现的方法就太多了。一般我们使用继承 BodyTag 的 BodyTagSupport 来做开发</strong></li>
</ul>
<hr>
<h3 id="BodyTagSupport-说明"><a href="#BodyTagSupport-说明" class="headerlink" title="BodyTagSupport 说明"></a>BodyTagSupport 说明</h3><ul>
<li>首先来看一下源代码吧：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class BodyTagSupport extends TagSupport implements BodyTag &#123;</span><br><span class="line">    protected BodyContent bodyContent;</span><br><span class="line"></span><br><span class="line">    public BodyTagSupport() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line">        return 2;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int doEndTag() throws JspException &#123;</span><br><span class="line">        return super.doEndTag();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setBodyContent(BodyContent b) &#123;</span><br><span class="line">        this.bodyContent = b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void doInitBody() throws JspException &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public int doAfterBody() throws JspException &#123;</span><br><span class="line">        return 0;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void release() &#123;</span><br><span class="line">        this.bodyContent = null;</span><br><span class="line">        super.release();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public BodyContent getBodyContent() &#123;</span><br><span class="line">        return this.bodyContent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public JspWriter getPreviousOut() &#123;</span><br><span class="line">        return this.bodyContent.getEnclosingWriter();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>可以发现:<strong>BodyTagSupport 主要扩充了以下的内容:</strong><ul>
<li><strong>把 BodyContent 直接定义为成员变量，在获取标签体内容的时候就不需要通过 getBodyContent() 获取了</strong></li>
<li><strong>提供获取 JspWriter 的方法，不需要从 pageConext 中获取了</strong></li>
<li><strong>以上的两个扩充都简化了我们的代码书写</strong>！</li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">protected BodyContent bodyContent;</span><br><span class="line"></span><br><span class="line">public JspWriter getPreviousOut() &#123;</span><br><span class="line">    return this.bodyContent.getEnclosingWriter();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>从 BodyTag 接口中，我就说到了：<strong>标签体的内容封装到了 BodyContent 类中，那么 BodyContent 类究竟是什么？我们来看一下源码</strong>：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public abstract class BodyContent extends JspWriter &#123;</span><br><span class="line">    private JspWriter enclosingWriter;</span><br><span class="line"></span><br><span class="line">    protected BodyContent(JspWriter e) &#123;</span><br><span class="line">        super(-2, false);</span><br><span class="line">        this.enclosingWriter = e;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void flush() throws IOException &#123;</span><br><span class="line">        throw new IOException(&quot;Illegal to flush within a custom tag&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void clearBody() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            this.clear();</span><br><span class="line">        &#125; catch (IOException var2) &#123;</span><br><span class="line">            throw new Error(&quot;internal error!;&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public abstract Reader getReader();</span><br><span class="line"></span><br><span class="line">    public abstract String getString();</span><br><span class="line"></span><br><span class="line">    public abstract void writeOut(Writer var1) throws IOException;</span><br><span class="line"></span><br><span class="line">    public JspWriter getEnclosingWriter() &#123;</span><br><span class="line">        return this.enclosingWriter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>原来 BodyContent 继承着 JspWriter，它与 JspWriter 最大的区别是：BodyContent 类的任何写入的内容并不自动地向页面输出！</strong></p>
</li>
<li><p>我们一般使用 BodyContent 都使用两个方法：</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">//将数据转变成Reader对象</span><br><span class="line">public abstract Reader getReader();</span><br><span class="line"></span><br><span class="line">//将数据转变成String对象</span><br><span class="line">public abstract String getString();</span><br></pre></td></tr></table></figure>
<ul>
<li><p>再从关系图我们可以看初，<strong>BodyTagSupport 继承了 TagSupport 类实现了 BodyTag 接口，可以说：BodyTagSupport 有着前面讲的接口和类的所有功能！</strong>。</p>
</li>
<li><p>下面我们来<strong>使用下 BodyTagSupport 将标签体的内容转成是小写的</strong>：</p>
</li>
<li><p><strong>标签处理器类</strong></p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">public class Demo1 extends BodyTagSupport &#123;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doStartTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        //想要获取到标签体的内容，就要返回EVAL_BODY_BUFFERED变量</span><br><span class="line"></span><br><span class="line">        return EVAL_BODY_BUFFERED;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public int doEndTag() throws JspException &#123;</span><br><span class="line"></span><br><span class="line">        //获取到标签体的内容</span><br><span class="line">        String value = bodyContent.getString();</span><br><span class="line"></span><br><span class="line">        //将标签体的内容转成小写并输出</span><br><span class="line">        try &#123;</span><br><span class="line">            this.getPreviousOut().write(value.toLowerCase());</span><br><span class="line">        &#125; catch (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return super.doEndTag();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>tld 文件：</strong></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;tag&gt;</span><br><span class="line">    &lt;name&gt;BodyContentToLowerCase&lt;/name&gt;</span><br><span class="line">    &lt;tag-class&gt;tag.Demo1&lt;/tag-class&gt;</span><br><span class="line">    &lt;body-content&gt;tagdependent&lt;/body-content&gt;</span><br><span class="line">&lt;/tag&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li>效果：</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/5291509-9f18a6df11400b3d.png" alt=""></p>
<hr>
<hr>
<blockquote>
<p>参考：<br>Servlet+JSP - 文集 - 简书<br><a href="https://www.jianshu.com/nb/21926044" target="_blank" rel="noopener">https://www.jianshu.com/nb/21926044</a></p>
</blockquote>

      
    </div>
    
    
    


     
    
      <div>
        
    <div style="text-align:center;color: #ccc;font-size:14px;">
        ------ 本文结束<i class="fa fa-paw"></i>感谢您的阅读 ------</div>

      </div>
    


    

    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者：</strong>
    CloudPai
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://cloudpai.site/2018/03/29/2018-03-29/" title="JSP 学习">http://cloudpai.site/2018/03/29/2018-03-29/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>
    本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！
  </li>
</ul>

      </div>
    




    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/JSP/" rel="tag"><i class="fa fa-tag"></i> JSP</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/03/28/2018-03-28-3/" rel="next" title="tomcat bio nio apr 模式性能测试">
                <i class="fa fa-chevron-left"></i> tomcat bio nio apr 模式性能测试
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/03/29/2018-03-29-1/" rel="prev" title="JSP面试总结">
                JSP面试总结 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>




  <aside id="sidebar" class="sidebar">
    
      <div id="sidebar-dimmer"></div>
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="http://p4lmrb1gp.bkt.clouddn.com/君名-squashed.jpg"
                alt="CloudPai" />
            
              <p class="site-author-name" itemprop="name">CloudPai</p>
              <p class="site-description motion-element" itemprop="description">加油(๑•̀ㅂ•́)و✧加油</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">126</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            


<div id="music163player">
    <iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=240 src="//music.163.com/outchain/player?type=0&id=2113726971&auto=0&height=430"></iframe>
</div>
<!-- 459004290 -->




            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">53</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/CloudPai" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:liupai024@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.douban.com/people/57965969/doulists/all" target="_blank" title="豆瓣">
                      
                        <i class="fa fa-fw fa-book"></i>豆瓣</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.zhihu.com/people/cloudPai/activities" target="_blank" title="知乎">
                      
                        <i class="fa fa-fw fa-edit"></i>知乎</a>
                  </span>
                
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-inline">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                友情链接
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://www.dlut.edu.cn/" title="DUT" target="_blank">DUT</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="http://www.bupt.edu.cn/" title="BUPT" target="_blank">BUPT</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://campus.alibaba.com/index.htm" title="Alibaba Group" target="_blank">Alibaba Group</a>
                  </li>
                
              </ul>
            </div>
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-第一篇【JSP-介绍、工作原理、生命周期、语法、指令、行为】"><span class="nav-text">JSP 第一篇【JSP 介绍、工作原理、生命周期、语法、指令、行为】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-JSP"><span class="nav-text">什么是 JSP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么需要-JSP"><span class="nav-text">为什么需要 JSP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#简单使用一下-JSP"><span class="nav-text">简单使用一下 JSP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-的工作原理"><span class="nav-text">JSP 的工作原理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-生命周期"><span class="nav-text">JSP 生命周期</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-的语法"><span class="nav-text">JSP 的语法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-脚本"><span class="nav-text">JSP 脚本</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-注释"><span class="nav-text">JSP 注释</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-指令"><span class="nav-text">JSP 指令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#page-指令"><span class="nav-text">page 指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#include-指令"><span class="nav-text">include 指令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#taglib-指令"><span class="nav-text">taglib 指令</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSP-行为"><span class="nav-text">JSP 行为</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#include-行为"><span class="nav-text">include 行为</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#param-行为"><span class="nav-text">param 行为</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#forward-行为"><span class="nav-text">forward 行为</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#directive-行为"><span class="nav-text">directive 行为</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#javaBean-行为"><span class="nav-text">javaBean 行为</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-第二篇【内置对象的介绍、4-种属性范围、应用场景】"><span class="nav-text">JSP 第二篇【内置对象的介绍、4 种属性范围、应用场景】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-JSP-内置对象"><span class="nav-text">什么是 JSP 内置对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#out-对象"><span class="nav-text">out 对象</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#request"><span class="nav-text">request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#response"><span class="nav-text">response</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#config"><span class="nav-text">config</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#session"><span class="nav-text">session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#application"><span class="nav-text">application</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#page"><span class="nav-text">page</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#exception"><span class="nav-text">exception</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pageContext"><span class="nav-text">pageContext</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext获取8个内置对象"><span class="nav-text">pageContext获取8个内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#pageContext作为域对象"><span class="nav-text">pageContext作为域对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#引入和跳转"><span class="nav-text">引入和跳转</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4种属性范围"><span class="nav-text">4种属性范围</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#应用场景"><span class="nav-text">应用场景</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-第三篇【JavaBean-的介绍、JSP-的行为-–JavaBean】"><span class="nav-text">JSP 第三篇【JavaBean 的介绍、JSP 的行为 –JavaBean】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-javaBean"><span class="nav-text">什么是 javaBean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么需要使用-Javabean"><span class="nav-text">为什么需要使用 Javabean</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSP-行为-–JavaBean"><span class="nav-text">JSP 行为 –JavaBean</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-useBean"><span class="nav-text">jsp:useBean</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-setProperty"><span class="nav-text">jsp:setProperty</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#jsp-getProperty"><span class="nav-text">jsp:getProperty</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-第四篇【EL-表达式介绍、获取各类数据、11-个内置对象、执行运算、回显数据、自定义函数、fn-方法库】"><span class="nav-text">JSP 第四篇【EL 表达式介绍、获取各类数据、11 个内置对象、执行运算、回显数据、自定义函数、fn 方法库】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-EL-表达式？"><span class="nav-text">什么是 EL 表达式？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么要使用-EL-表达式？"><span class="nav-text">为什么要使用 EL 表达式？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-表达式的作用"><span class="nav-text">EL 表达式的作用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#获取各类数据"><span class="nav-text">获取各类数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取域对象的数据"><span class="nav-text">获取域对象的数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取-JavaBean-的属性"><span class="nav-text">获取 JavaBean 的属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取集合的数据"><span class="nav-text">获取集合的数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EL-运算符"><span class="nav-text">EL 运算符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EL-表达式-11-个内置对象"><span class="nav-text">EL 表达式 11 个内置对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#EL-表达式回显数据"><span class="nav-text">EL 表达式回显数据</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-自定义函数"><span class="nav-text">EL 自定义函数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#EL-函数库（fn-方法库）"><span class="nav-text">EL 函数库（fn 方法库）</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP-第五篇【JSTL-的介绍、core-标签库、fn-方法库、fmt-标签库】"><span class="nav-text">JSP 第五篇【JSTL 的介绍、core 标签库、fn 方法库、fmt 标签库】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是-JSTL"><span class="nav-text">什么是 JSTL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么要使用-JSTL"><span class="nav-text">为什么要使用 JSTL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#使用-JSTL-标签库步骤："><span class="nav-text">使用 JSTL 标签库步骤：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#core-标签库"><span class="nav-text">core 标签库</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#c-out"><span class="nav-text">c:out</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-set"><span class="nav-text">c:set</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-var-属性"><span class="nav-text">使用 var 属性</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用-target-属性"><span class="nav-text">使用 target 属性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-remove"><span class="nav-text">c:remove</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-catch"><span class="nav-text">c:catch</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-if"><span class="nav-text">c:if</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-choose"><span class="nav-text">c:choose</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-forEach"><span class="nav-text">c:forEach</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-forTokens"><span class="nav-text">c:forTokens</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-import"><span class="nav-text">c:import</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-param"><span class="nav-text">c:param</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-url"><span class="nav-text">c:url</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#c-redirect"><span class="nav-text">c:redirect</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fmt-标签库"><span class="nav-text">fmt 标签库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#fn-方法库"><span class="nav-text">fn 方法库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#JSP第六篇【自定义标签之传统标签】"><span class="nav-text">JSP第六篇【自定义标签之传统标签】</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#为什么要使用自定义标签？"><span class="nav-text">为什么要使用自定义标签？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#编写自定义标签的步骤："><span class="nav-text">编写自定义标签的步骤：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#快速入门"><span class="nav-text">快速入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#标签处理类详细说明"><span class="nav-text">标签处理类详细说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tld-文件详细说明"><span class="nav-text">tld 文件详细说明</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TagSupport-类"><span class="nav-text">TagSupport 类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#带属性的标签"><span class="nav-text">带属性的标签</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#标签的继承关系"><span class="nav-text">标签的继承关系</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#IterationTag-说明"><span class="nav-text">IterationTag 说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BodyTag-说明"><span class="nav-text">BodyTag 说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#BodyTagSupport-说明"><span class="nav-text">BodyTagSupport 说明</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">CloudPai</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">Site words total count&#58;</span>
    
    <span title="Site words total count">621.1k</span>
  
</div>




<div class="powered-by">
<i class="fa fa-user-md"></i><span id="busuanzi_container_site_uv">
  本站访客数:<span id="busuanzi_value_site_uv">  </span>
</span>
</div>







  <div class="theme-info">&#12288;主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  

    
      <script id="dsq-count-scr" src="https://cloudpai.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://cloudpai.site/2018/03/29/2018-03-29/';
          this.page.identifier = '2018/03/29/2018-03-29/';
          this.page.title = 'JSP 学习';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://cloudpai.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  














  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

  <!-- <!-- <script src="https://cdn.bootcss.com/aplayer/1.6.0/APlayer.min.js"></script>

<script src="https://api.i-meto.com/music/player.js"></script> --> -->
  
  <!--移动端判断，是否引入背景-->
  <script>
  var browser={  
      versions:function(){   
             var u = navigator.userAgent, app = navigator.appVersion;   
             return {//移动终端浏览器版本信息
                  trident: u.indexOf('Trident') > -1, //IE内核
                  presto: u.indexOf('Presto') > -1, //opera内核
                  webKit: u.indexOf('AppleWebKit') > -1, //苹果、谷歌内核
                  gecko: u.indexOf('Gecko') > -1 && u.indexOf('KHTML') == -1, //火狐内核
                  mobile: !!u.match(/AppleWebKit.*Mobile.*/), //是否为移动终端
                  ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //ios终端
                  android: u.indexOf('Android') > -1 || u.indexOf('Linux') > -1, //android终端或者uc浏览器
                  iPhone: u.indexOf('iPhone') > -1 , //是否为iPhone或者QQHD浏览器
                  iPad: u.indexOf('iPad') > -1, //是否iPad
                  webApp: u.indexOf('Safari') == -1 //是否web应该程序，没有头部与底部
              };  
           }(),  
           language:(navigator.browserLanguage || navigator.language).toLowerCase()  
  }   
    if(browser.versions.mobile || browser.versions.ios || browser.versions.android ||   
      browser.versions.iPhone || browser.versions.iPad){        
               
    }else{
    document.write("<script type=\'text/javascript\'  src=\'/js/src/particle.js\'><\/script>");
    }
  </script>

  
<script src="/live2dw/lib/L2Dwidget.min.js?0c58a1486de42ac6cc1c59c7d98ae887"></script><script>L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":-80,"vOffset":-50},"mobile":{"show":false,"scale":0.2},"react":{"opacityDefault":1,"opacityOnHover":0.2}});</script></body>
</html>
