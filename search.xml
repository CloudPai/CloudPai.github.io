<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºã€‹å­¦ä¹ ç¬”è®°ä¹‹äºŒ]]></title>
    <url>%2F2018%2F03%2F06%2F2018-03-05-2%2F</url>
    <content type="text"><![CDATA[ç¬¬äºŒç«  Javaå†…å­˜åŒºåŸŸä¸Žå†…å­˜æº¢å‡ºå¼‚å¸¸ç¬¬äºŒç« ç»“æž„ï¼š Java è™šæ‹Ÿæœºåœ¨æ‰§è¡Œ Java ç¨‹åºçš„è¿‡ç¨‹ä¸­ä¼šæŠŠå®ƒæ‰€ç®¡ç†çš„å†…å­˜åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªä¸åŒçš„æ•°æ®åŒºåŸŸã€‚è¿™äº›åŒºåŸŸéƒ½æœ‰å„è‡ªçš„ç”¨é€”ï¼Œä»¥åŠåˆ›å»ºå’Œé”€æ¯æ—¶é—´ã€‚æ ¹æ® ã€ŠJava è™šæ‹Ÿæœºè§„èŒƒã€‹çš„è§„å®šï¼ŒJava è™šæ‹Ÿæœºæ‰€ç®¡ç†çš„å†…å­˜å°†ä¼šåŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªè¿è¡Œæ—¶æ•°æ®åŒºåŸŸã€‚å‚è€ƒï¼šhttps://www.jianshu.com/p/989c90f339b9 2.2 è¿è¡Œæ—¶æ•°æ®åŒºåŸŸå…·ä½“è§ä¸‹å›¾ï¼š 2.2.1 ç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counter Registerï¼‰ æ¦‚è¿°ï¼šè¯¥åŒºåŸŸæ˜¯ä¸€å—è¾ƒå°çš„å†…å­˜ç©ºé—´ï¼Œå®ƒå¯ä»¥çœ‹ä½œæ˜¯å½“å‰çº¿ç¨‹æ‰€æ‰§è¡Œçš„å­—èŠ‚ç çš„ è¡Œå·æŒ‡ç¤ºå™¨ã€‚ ä½œç”¨ï¼šé€šè¿‡æ”¹å˜è®¡æ•°å™¨çš„å€¼æ¥é€‰å–ä¸‹ä¸€æ¡éœ€è¦æ‰§è¡Œçš„å­—èŠ‚ç æŒ‡ä»¤ã€‚ï¼ˆåˆ†æ”¯ã€å¾ªçŽ¯ã€è·³è½¬ã€å¼‚å¸¸å¤„ç†ã€çº¿ç¨‹æ¢å¤ç­‰ï¼‰åŸºç¡€åŠŸèƒ½éƒ½ä¾èµ–ä¸Žå…¶å®Œæˆã€‚ ç‰¹ç‚¹ï¼š1.çº¿ç¨‹ç§æœ‰ï¼šå› ä¸º Java è™šæ‹Ÿæœºçš„å¤šçº¿ç¨‹æ˜¯é€šè¿‡çº¿ç¨‹è½®æµåˆ‡æ¢å¹¶åˆ†é…å¤„ç†å™¨æ‰§è¡Œæ—¶é—´æ¥å®žçŽ°çš„ï¼Œåœ¨æŸä¸€æ—¶åˆ»ï¼Œåªä¼šæ‰§è¡Œä¸€æ¡çº¿ç¨‹ã€‚å› æ­¤ï¼Œä¸ºäº†çº¿ç¨‹åˆ‡æ¢åŽèƒ½æ¢å¤åˆ°æ­£ç¡®çš„æ‰§è¡Œä½ç½®ï¼Œæ¯æ¡çº¿ç¨‹éƒ½éœ€è¦æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç¨‹åºè®¡æ•°å™¨ã€‚2.æ— å†…å­˜æº¢å‡ºï¼šå¦‚æžœçº¿ç¨‹æ­£åœ¨æ‰§è¡Œçš„æ˜¯ä¸€ä¸ª Java æ–¹æ³•ï¼Œè¿™ä¸ªè®¡æ•°å™¨è®°å½•çš„æ˜¯æ­£åœ¨ æ‰§è¡Œçš„è™šæ‹Ÿæœºå­—èŠ‚ç æŒ‡ä»¤çš„åœ°å€ï¼›å¦‚æžœæ­£åœ¨æ‰§è¡Œçš„æ˜¯ Native æ–¹æ³•ï¼ˆæœ¬åœ°æ–¹æ³•ï¼Œä¸€ä¸ªè°ƒç”¨éžJavaä»£ç çš„æŽ¥å£ï¼‰ï¼Œè¿™ä¸ªè®¡æ•°å™¨å€¼åˆ™ä¸ºç©ºï¼ˆUndefinedï¼‰ã€‚æ­¤å†…å­˜åŒºåŸŸæ˜¯å”¯ä¸€ä¸€ä¸ªåœ¨ Java è™šæ‹Ÿæœºç¨‹åºè§„èŒƒä¸­æ²¡æœ‰è§„å®šä»»ä½• OutOfMemoryErroræƒ…å†µçš„åŒºåŸŸã€‚ï¼ˆä¸ªäººç†è§£ï¼šå‚è€ƒC++ç†è§£æ˜¯ï¼šå½“çº¿ç¨‹ä¸­è°ƒç”¨nativeæ–¹æ³•çš„æ—¶å€™ï¼Œå½“å‰çº¿ç¨‹åº”å½“ä¼šè¢«é˜»å¡žï¼Œé‡æ–°å¯åŠ¨ä¸€ä¸ªæ–°çš„çº¿ç¨‹ï¼Œé‚£ä¹ˆè®¡æ•°å™¨ä¸ºç©ºåˆ™ä¸ä¼šå½±å“æ–°çº¿ç¨‹çš„è®¡æ•°å™¨ï¼Œç›¸äº’ç‹¬ç«‹ã€‚å½“å‰çº¿ç¨‹åº”å½“ä¼šè¢«é˜»å¡žï¼Œç›´åˆ°å¦å¤–ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œç»“æŸã€‚å½“ç„¶å‚æ•°ä¹Ÿä¼šè¢«ä¿ç•™ï¼‰ 2.2.2 Java è™šæ‹Ÿæœºæ ˆï¼ˆJava Virtual Machine Stacksï¼‰ æˆ‘ä»¬ç»å¸¸å°† Java å†…å­˜åˆ†ä¸ºå †å†…å­˜ï¼ˆHeapï¼‰å’Œæ ˆå†…å­˜ï¼ˆStackï¼‰ï¼Œè¿™ç§åˆ†æ³•ä¸­æ‰€æŒ‡çš„æ ˆå°±æ˜¯ Java è™šæ‹Ÿæœºæ ˆï¼Œæˆ–è€…è¯´æ˜¯è™šæ‹Ÿæœºæ ˆä¸­ å±€éƒ¨å˜é‡è¡¨ éƒ¨åˆ†ã€‚ æ¦‚è¿°ï¼šæè¿° Java æ–¹æ³•æ‰§è¡Œçš„å†…å­˜æ¨¡åž‹ï¼Œæ¯ä¸ªæ–¹æ³•ä»Žè°ƒç”¨ç›´è‡³æ‰§è¡Œçš„è¿‡ç¨‹ï¼Œå¯¹åº”ç€ä¸€ä¸ªæ ˆå¸§åœ¨è™šæ‹Ÿæœºæ ˆä¸­å…¥æ ˆåˆ°å‡ºæ ˆçš„è¿‡ç¨‹ã€‚ä½œç”¨ï¼šå­˜å‚¨å±€éƒ¨å˜é‡è¡¨ã€æ“ä½œæ•°æ ˆã€åŠ¨æ€é“¾æŽ¥ã€æ–¹æ³•å‡ºå£ç­‰ä¿¡æ¯ã€‚ ç‰¹ç‚¹ï¼š1.çº¿ç¨‹ç§æœ‰ã€‚2.ç”Ÿå‘½å‘¨æœŸä¸Žçº¿ç¨‹ç›¸åŒã€‚ åœ¨Javaè™šæ‹Ÿæœºè§„èŒƒä¸­ï¼Œå¯¹è¿™ä¸ªåŒºåŸŸè§„å®šäº†ä¸¤ç§å¼‚å¸¸çŠ¶å†µï¼šå¦‚æžœçº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºŽè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦ï¼Œå°†æŠ›å‡ºStackOverflowErrorå¼‚å¸¸ï¼›å¦‚æžœè™šæ‹Ÿæœºæ ˆå¯ä»¥åŠ¨æ€æ‰©å±•ï¼ˆå½“å‰å¤§éƒ¨åˆ†çš„Javaè™šæ‹Ÿæœºéƒ½å¯åŠ¨æ€æ‰©å±•ï¼Œåªä¸è¿‡Javaè™šæ‹Ÿæœºè§„èŒƒä¸­ä¹Ÿå…è®¸å›ºå®šé•¿åº¦çš„è™šæ‹Ÿæœºæ ˆï¼‰ï¼Œå¦‚æžœæ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜ï¼Œå°±ä¼šæŠ›å‡ºOutOfMemoryErrorå¼‚å¸¸ã€‚2.2.3 æœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ æ¦‚è¿°ï¼šæœ¬åœ°æ–¹æ³•æ ˆï¼ˆNative Method Stackï¼‰ä¸Žè™šæ‹Ÿæœºæ ˆæ‰€å‘æŒ¥çš„ä½œç”¨æ˜¯éžå¸¸ç›¸ä¼¼çš„ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ä¸è¿‡æ˜¯è™šæ‹Ÿæœºæ ˆä¸ºè™šæ‹Ÿæœºæ‰§è¡ŒJavaæ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯å­—èŠ‚ç ï¼‰æœåŠ¡ï¼Œè€Œæœ¬åœ°æ–¹æ³•æ ˆåˆ™ä¸ºè™šæ‹Ÿæœºä½¿ç”¨åˆ°çš„Nativeæ–¹æ³•æœåŠ¡ã€‚ ä¸Žè™šæ‹Ÿæœºæ ˆä¸€æ ·ï¼Œæœ¬åœ°æ–¹æ³•æ ˆåŒºåŸŸä¹Ÿä¼šæŠ›å‡ºStackOverflowErrorå’ŒOutOfMemoryErrorå¼‚å¸¸ã€‚ 2.2.4 Java å †ï¼ˆJava Heapï¼‰ javaå †æ˜¯æ‰€æœ‰çº¿ç¨‹å…±äº«çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œç”±è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºï¼Œå †å¾—å”¯ä¸€ç›®çš„å°±æ˜¯å­˜å‚¨å¯¹è±¡çš„å®žä¾‹ã€‚å‡ ä¹Žæ‰€æœ‰çš„å¯¹è±¡å®žä¾‹éƒ½åœ¨æ”¹å†…å­˜åŒºåŸŸåˆ†é…ï¼Œä½†æ˜¯éšç€JITç¼–è¯‘å™¨ï¼ˆå³æ—¶ç¼–è¯‘ï¼‰çš„å‘å±•åŠé€ƒé€¸åˆ†æžæŠ€æœ¯ï¼ˆåˆ†æžæŒ‡é’ˆçš„åŠ¨æ€èŒƒå›´ï¼‰çš„å‘å±•ï¼Œæ ˆä¸Šåˆ†é…ã€æ ‡é‡æ›¿æ¢å¯¼è‡´å †åˆ†é…ä¸é‚£ä¹ˆâ€œç»å¯¹â€äº†ã€‚ ä½œç”¨ï¼šæ­¤åŒºåŸŸå”¯ä¸€çš„ç›®çš„å°±æ˜¯å­˜æ”¾å¯¹è±¡å®žä¾‹ã€‚ ç‰¹ç‚¹ï¼š1.è¢«æ‰€æœ‰çº¿ç¨‹å…±äº«ã€‚2.åœ¨è™šæ‹Ÿæœºå¯åŠ¨æ—¶åˆ›å»ºã€‚ å¼‚å¸¸ç±»åž‹ å‘ç”Ÿæ¡ä»¶ OutOfMemoryError åœ¨å †ä¸­æ²¡æœ‰å†…å­˜æ¥å®Œæˆå®žä¾‹åˆ†é…ï¼Œä¸”å †æ— æ³•å†æ‰©å±•æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ åˆ’åˆ†ï¼šæ›´å¥½çš„å›žæ”¶å†…å­˜æˆ–åˆ†é…å†…å­˜ã€æ–°ç”Ÿä»£ï¼ˆEdenã€From Survivorã€To Survivorï¼‰ã€‘ã€è€å¹´ä»£ã€‘ æ–°ç”Ÿä»£ï¼šä¸»è¦å­˜æ”¾åº”ç”¨ç¨‹åºä¸­ç”Ÿå‘½å‘¨æœŸçŸ­çš„å†…å­˜å¯¹è±¡ï¼Œç»å¸¸è¢«å›žæ”¶ è€ç”Ÿä»£ï¼šä¸»è¦å­˜æ”¾åº”ç”¨ç¨‹åºä¸­ç”Ÿå‘½å‘¨æœŸé•¿çš„å†…å­˜å¯¹è±¡ å¯ç‰©ç†ä¸Šä¸è¿žç»­ï¼Œé€»è¾‘ä¸Šè¿žç»­ï¼Œé€šè¿‡-Xmx,-Xmsæ¥æŽ§åˆ¶å †çš„æ‰©å±•ã€‚ 2.2.5 æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰ æ¦‚è¿°ï¼šJava è™šæ‹Ÿæœºè§„èŒƒå°†æ–¹æ³•åŒºæè¿°ä¸ºå †çš„ä¸€ä¸ªé€»è¾‘éƒ¨åˆ†ï¼Œä½†æ˜¯å®ƒå´æœ‰ä¸€ä¸ªåˆ«åå«åš Non-Heapï¼ˆéžå †ï¼‰ï¼Œç›®çš„æ˜¯ä¸Ž Java å †åŒºåˆ†å¼€ã€‚ ä½œç”¨ï¼šå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„ï¼ˆç±»ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åŽçš„ä»£ç ï¼‰ç­‰æ•°æ®ã€‚ ç‰¹ç‚¹ï¼šçº¿ç¨‹å…±äº«ã€‚ å¼‚å¸¸ å¼‚å¸¸ç±»åž‹ å‘ç”Ÿæ¡ä»¶ OutOfMemoryError å½“æ–¹æ³•åŒºæ— æ³•æ»¡è¶³å†…å­˜åˆ†é…éœ€æ±‚æ—¶ï¼ŒæŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ å†…å­˜ï¼šJava è™šæ‹Ÿæœºè§„èŒƒå¯¹æ–¹æ³•åŒºçš„é™åˆ¶éžå¸¸å®½æ¾ï¼Œé™¤äº†å’Œ Java å †ä¸€æ ·ä¸éœ€è¦è¿žç»­çš„å†…å­˜ç©ºé—´å’Œå¯ä»¥é€‰æ‹©å›ºå®šå¤§å°æˆ–è€…å¯æ‰©å±•å¤–ï¼Œå¯ä»¥é€‰æ‹©ä¸å®žçŽ°åžƒåœ¾æ”¶é›†ã€‚ ç›¸å¯¹è€Œè¨€ï¼Œåžƒåœ¾æ”¶é›†è¡Œä¸ºåœ¨è¿™ä¸ªåŒºåŸŸæ˜¯æ¯”è¾ƒå°‘å‡ºçŽ°çš„ï¼Œè¿™ä¸ªåŒºåŸŸçš„å†…å­˜å›žæ”¶ç›®æ ‡ä¸»è¦æ˜¯é’ˆå¯¹ å¸¸é‡æ± çš„å›žæ”¶ å’Œ ç±»åž‹çš„å¸è½½ã€‚ 2.2.6 è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆRuntime Constant Poolï¼‰ æ¦‚è¿°ï¼šæ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚Class æ–‡ä»¶ä¸­é™¤äº†æœ‰ç±»çš„ï¼ˆç‰ˆæœ¬ã€å­—æ®µã€æ–¹æ³•ã€æŽ¥å£ï¼‰ç­‰æè¿°ä¿¡æ¯å¤–ï¼Œè¿˜æœ‰ä¸€é¡¹ä¿¡æ¯å°±æ˜¯å¸¸é‡æ± ã€‚ ä½œç”¨ï¼šç”¨äºŽå­˜æ”¾ç¼–è¯‘å™¨ç”Ÿæˆçš„å„ç§ å­—é¢é‡ å’Œ ç¬¦å·å¼•ç”¨ã€‚ åŠ¨æ€æ€§ï¼šJava è¯­è¨€å¹¶ä¸è¦æ±‚å¸¸é‡æ± ä¸€å®šåªæœ‰ç¼–è¯‘æœŸæ‰èƒ½äº§ç”Ÿï¼Œä¹Ÿå°±æ˜¯å¹¶éžé¢„ç½®å…¥ Class æ–‡ä»¶ä¸­å¸¸é‡æ± çš„å†…å®¹åŽæ‰èƒ½è¿›å…¥æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œè¿è¡ŒæœŸé—´ä¹Ÿå¯ä»¥å°†æ–°çš„å¸¸é‡æ”¾å…¥æ± ä¸­ï¼Œè¿™ç§ç‰¹æ€§ç”¨çš„æ¯”è¾ƒå¹¿æ³›çš„ä¾¿æ˜¯ String ç±»çš„ intern() æ–¹æ³•ã€‚ å¼‚å¸¸ å¼‚å¸¸ç±»åž‹ å‘ç”Ÿæ¡ä»¶ OutOfMemoryError å› ä¸ºæ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥å—åˆ°æ–¹æ³•åŒºå†…å­˜çš„é™åˆ¶ï¼Œå½“å¸¸é‡æ± æ— æ³•å†ç”³è¯·åˆ°å†…å­˜æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ 2.2.7 ç›´æŽ¥å†…å­˜ï¼ˆDirect Memoryï¼‰ æ¦‚è¿°ï¼šå¹¶ä¸æ˜¯è™šæ‹Ÿæœºè¿è¡Œæ—¶æ•°æ®åŒºçš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿä¸æ˜¯ Java è™šæ‹Ÿæœºè§„èŒƒä¸­å®šä¹‰çš„å†…å­˜åŒºåŸŸã€‚ä½†æ˜¯è¿™éƒ¨åˆ†å†…å­˜ä¹Ÿè¢«é¢‘ç¹åœ°ä½¿ç”¨ï¼Œè€Œä¸”ä¹Ÿå¯èƒ½å¯¼è‡´ OutOfMemoryError å¼‚å¸¸å‡ºçŽ°ã€‚ ä½œç”¨ï¼šåœ¨ JDK1.4 ä¸­æ–°åŠ å…¥äº† NIOï¼ˆNew Input/Outputï¼‰ ç±»ï¼Œå¼•å…¥äº†ä¸€ç§åŸºäºŽé€šé“ï¼ˆChannelï¼‰ä¸Žç¼“å†²åŒºï¼ˆBufferï¼‰çš„ I/O æ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ Native å‡½æ•°åº“ç›´æŽ¥åˆ†é…å †å¤–å†…å­˜ï¼Œç„¶åŽé€šè¿‡ä¸€ä¸ªå­˜å‚¨åœ¨ Java å †ä¸­çš„ DirectByteBuffer å¯¹è±¡ä½œä¸ºè¿™å—å†…å­˜çš„å¼•ç”¨è¿›è¡Œæ“ä½œã€‚è¿™æ ·èƒ½åœ¨ä¸€äº›åœºæ™¯ä¸­æ˜¾è‘—æé«˜æ€§èƒ½ï¼Œå› ä¸ºé¿å…äº†åœ¨ Java å †å’Œ Native å †ä¸­æ¥å›žå¤åˆ¶æ•°æ®ã€‚ å¼‚å¸¸ å¼‚å¸¸ç±»åž‹ å‘ç”Ÿæ¡ä»¶ OutOfMemoryError ç›´æŽ¥å†…å­˜å¹¶ä¸å—javaå †å¤§å°çš„é™åˆ¶ï¼Œåªæ˜¯å—åˆ°ç‰©ç†å†…å­˜é™åˆ¶ï¼ŒåŠ¨æ€æ‰©å±•æ—¶æ— æ³•ç”³è¯·åˆ°å†…å­˜æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ 2.3 HotSpot è™šæ‹Ÿæœºå¯¹è±¡æŽ¢ç§˜ è¿™ä¸€éƒ¨åˆ†å†…å®¹å°†ä»¥ HotSpot è™šæ‹Ÿæœºå’Œå¸¸ç”¨çš„å†…å­˜åŒºåŸŸ Java å †ä¸ºä¾‹ï¼Œé˜è¿°å¯¹è±¡åˆ†é…ã€å¸ƒå±€å’Œè®¿é—®çš„å…¨è¿‡ç¨‹ã€‚ 2.3.1 å¯¹è±¡çš„åˆ›å»º æ¦‚è¿°ï¼šJava æ˜¯ä¸€é—¨é¢å‘å¯¹è±¡çš„ç¼–ç¨‹è¯­è¨€ï¼Œåœ¨ Java ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æ— æ—¶æ— åˆ»éƒ½æœ‰å¯¹è±¡è¢«åˆ›å»ºå‡ºæ¥ã€‚åœ¨è¯­è¨€å±‚é¢ä¸Šï¼Œåˆ›å»ºå¯¹è±¡é€šå¸¸ä»…ä»…æ˜¯ä¸€ä¸ª new å…³é”®å­—è€Œå·²ï¼Œè€Œåœ¨è™šæ‹Ÿæœºä¸­å¯¹è±¡çš„åˆ›å»ºåˆ™åˆ†ä¸ºä»¥ä¸‹å‡ ä¸ªæ­¥éª¤ã€‚ è™šæ‹Ÿæœºé‡åˆ°NewæŒ‡ä»¤ é¦–å…ˆæ£€æŸ¥æŒ‡ä»¤çš„å‚æ•°èƒ½å¦åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨å¯¹åº”çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æžã€åˆå§‹åŒ–è¿‡ æ²¡æœ‰åŠ è½½ï¼Œåˆ™éœ€è¦å…ˆåŠ è½½ ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜åŒºåŸŸï¼ˆæŒ‡é’ˆç¢°æ’ž&amp;ç©ºé—²åˆ—è¡¨ï¼‰ çº¿ç¨‹å®‰å…¨ï¼ˆæ–¹æ¡ˆ1ï¼šå¯¹åˆ†é…å†…å­˜ç©ºé—´çš„åŠ¨ä½œåŒæ­¥ï¼›æ–¹æ¡ˆ2ï¼šæœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†² TLABï¼‰ å¯¹å¯¹è±¡è¿›è¡Œå¿…è¦çš„è®¾ç½® è°ƒç”¨initæ–¹æ³• ç±»åŠ è½½æ¦‚è¿°ï¼šè™šæ‹Ÿæœºé‡åˆ°ä¸€æ¡ new æŒ‡ä»¤æ—¶ï¼Œé¦–å…ˆå°†åŽ»æ£€æŸ¥æŒ‡ä»¤å‚æ•°æ˜¯å¦èƒ½åœ¨å¸¸é‡æ± ä¸­å®šä½åˆ°ä¸€ä¸ªç±»çš„ç¬¦å·å¼•ç”¨ï¼Œå¹¶ä¸”æ£€æŸ¥è¿™ä¸ªç¬¦å·å¼•ç”¨ä»£è¡¨çš„ç±»æ˜¯å¦å·²è¢«åŠ è½½ã€è§£æžå’Œåˆå§‹åŒ–è¿‡ã€‚å¦‚æžœæ²¡æœ‰ï¼Œé‚£å¿…é¡»å…ˆæ‰§è¡Œç›¸åº”çš„ç±»åŠ è½½è¿‡ç¨‹ã€‚ åˆ†é…å†…å­˜æ¦‚è¿°ï¼šåœ¨ç±»åŠ è½½æ£€æŸ¥é€šè¿‡åŽï¼ŒæŽ¥ä¸‹æ¥è™šæ‹Ÿæœºå°†ä¸ºæ–°ç”Ÿå¯¹è±¡åˆ†é…å†…å­˜ã€‚å¯¹è±¡æ‰€éœ€å†…å­˜çš„å¤§å°åœ¨ç±»åŠ è½½å®ŒæˆåŽä¾¿å¯ä»¥å®Œå…¨ç¡®å®šï¼Œä¸ºå¯¹è±¡åˆ†é…ç©ºé—´çš„ä»»åŠ¡ç­‰åŒäºŽæŠŠä¸€å—ç¡®å®šå¤§å°çš„å†…å­˜ä»Ž Java å †ä¸­åˆ’åˆ†å‡ºæ¥ã€‚ åˆ†é…æ–¹å¼ï¼š1.æŒ‡é’ˆç¢°æ’žï¼ˆBump the Pointerï¼‰ï¼šå‡è®¾ Java å †ä¸­å†…å­˜æ˜¯ç»å¯¹è§„æ•´çš„ï¼Œæ‰€æœ‰ç”¨è¿‡çš„å†…å­˜éƒ½æ”¾åœ¨ä¸€è¾¹ï¼Œç©ºé—²çš„å†…å­˜æ”¾åœ¨å¦ä¸€è¾¹ï¼Œä¸­é—´æ”¾ç€ä¸€ä¸ªæŒ‡é’ˆä½œä¸ºåˆ†ç•Œç‚¹çš„æŒ‡ç¤ºå™¨ï¼Œé‚£æ‰€åˆ†é…å†…å­˜å°±ä»…ä»…æ˜¯æŠŠå“ªä¸ªæŒ‡é’ˆå‘ç©ºé—²é‚£è¾¹æŒªåŠ¨ä¸€æ®µä¸Žå¯¹è±¡å¤§å°ç›¸ç­‰çš„è·ç¦»ã€‚2.ç©ºé—²åˆ—è¡¨ï¼ˆFree Listï¼‰ï¼šå¦‚æžœ Java å †ä¸­çš„å†…å­˜ä¸æ˜¯è§„æ•´çš„ï¼Œå·²ä½¿ç”¨çš„å†…å­˜å’Œç©ºé—²çš„å†…å­˜ç›¸äº’äº¤é”™ï¼Œé‚£å°±æ²¡æœ‰åŠžæ³•ç®€å•åœ°è¿›è¡ŒæŒ‡é’ˆç¢°æ’žäº†ï¼Œè™šæ‹Ÿæœºå°±å¿…é¡»ç»´æŠ¤ä¸€ä¸ªåˆ—è¡¨ï¼Œè®°å½•ä¸Šå“ªäº›å†…å­˜å—æ˜¯å¯ç”¨çš„ï¼Œåœ¨åˆ†é…çš„æ—¶å€™ä»Žåˆ—è¡¨ä¸­æ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºé—´åˆ’åˆ†ç»™å¯¹è±¡å®žä¾‹ï¼Œå¹¶æ›´æ–°åˆ—è¡¨ä¸Šçš„è®°å½•ã€‚é€‰æ‹©å“ªç§åˆ†é…æ–¹å¼ç”± Java å †æ˜¯å¦è§„æ•´å†³å®šï¼Œè€Œ Java å †æ˜¯å¦è§„æ•´åˆç”±æ‰€é‡‡ç”¨çš„åžƒåœ¾æ”¶é›†å™¨æ˜¯å¦å¸¦æœ‰åŽ‹ç¼©æ•´ç†åŠŸèƒ½å†³å®šã€‚å› æ­¤ï¼Œåœ¨ä½¿ç”¨ Serialã€ParNew ç­‰å¸¦ Compact è¿‡ç¨‹çš„æ”¶é›†å™¨æ—¶ï¼Œç³»ç»Ÿé‡‡ç”¨çš„åˆ†é…ç®—æ³•æ˜¯æŒ‡é’ˆç¢°æ’žï¼Œè€Œä½¿ç”¨ CMS è¿™ç§åŸºäºŽ Mark-Sweep ç®—æ³•çš„æ”¶é›†å™¨æ—¶ï¼Œé€šå¸¸é‡‡ç”¨ç©ºé—²åˆ—è¡¨ã€‚ åŒæ­¥æŽ§åˆ¶æ¦‚è¿°ï¼šå¯¹è±¡åˆ›å»ºåœ¨è™šæ‹Ÿæœºä¸­æ˜¯éžå¸¸é¢‘ç¹çš„è¡Œä¸ºï¼Œå³ä½¿æ˜¯ä»…ä»…ä¿®æ”¹ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„ä½ç½®ï¼Œåœ¨å¹¶å‘æƒ…å†µä¸‹ä¹Ÿå¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¯èƒ½å‡ºçŽ°æ­£åœ¨ç»™å¯¹è±¡ A åˆ†é…åœ°å€ï¼ŒæŒ‡é’ˆè¿˜æ²¡æ¥å¾—åŠä¿®æ”¹ï¼Œå¯¹è±¡ B åˆåŒæ—¶ä½¿ç”¨äº†åŽŸæ¥çš„æŒ‡é’ˆæ¥åˆ†é…å†…å­˜çš„æƒ…å†µã€‚è§£å†³è¿™ä¸ªé—®é¢˜æœ‰ä¸¤ç§æ–¹æ¡ˆã€‚ æ–¹æ¡ˆä¸€ï¼šå¯¹åˆ†é…å†…å­˜ç©ºé—´çš„åŠ¨ä½œè¿›è¡ŒåŒæ­¥å¤„ç†ï¼Œè™šæ‹Ÿæœºé‡‡ç”¨ CAS é…ä¸Šå¤±è´¥é‡è¯• çš„æ–¹å¼ä¿è¯æ›´æ–°æ“ä½œçš„åŽŸå­æ€§ã€‚æ–¹æ¡ˆäºŒï¼šå°†å†…å­˜åˆ†é…çš„åŠ¨ä½œæŒ‰ç…§çº¿ç¨‹åˆ’åˆ†åœ¨ä¸åŒçš„ç©ºé—´ä¸­è¿›è¡Œï¼Œæ¯ä¸ªçº¿ç¨‹åœ¨ Java å †ä¸­é¢„å…ˆåˆ†é…ä¸€å°å—å†…å­˜ï¼Œç§°ä¸º æœ¬åœ°çº¿ç¨‹åˆ†é…ç¼“å†²ï¼ˆThread Local Allocation Buffer, TLABï¼‰ ã€‚å“ªä¸ªçº¿ç¨‹éœ€è¦åˆ†é…å†…å­˜ï¼Œå°±åœ¨å“ªä¸ªçº¿ç¨‹çš„ TLAB ä¸Šåˆ†é…ï¼Œåªæœ‰ TLAB ç”¨å®Œå¹¶åˆ†é…æ–°çš„ TLAB æ—¶ï¼Œæ‰éœ€è¦åŒæ­¥é”å®šã€‚é€šè¿‡ -XX:+/-UseTLAB å‚æ•°è®¾å®šæ˜¯å¦ä½¿ç”¨ TLABã€‚ åˆå§‹åŒ–æ¦‚è¿°ï¼šå†…å­˜åˆ†é…å®ŒæˆåŽï¼Œè™šæ‹Ÿæœºéœ€è¦å°†åˆ†é…åˆ°çš„å†…å­˜ç©ºé—´éƒ½åˆå§‹åŒ–ä¸ºé›¶å€¼ï¼ˆä¸åŒ…æ‹¬å¯¹è±¡å¤´ï¼‰ï¼Œå¦‚æžœä½¿ç”¨ TLABï¼Œè¿™ä¸€è¿‡ç¨‹å°±å¯ä»¥æå‰è‡³ TLAB åˆ†é…æ—¶è¿›è¡Œã€‚ä½œç”¨ï¼šä¿è¯å¯¹è±¡çš„å®žä¾‹å­—æ®µåœ¨ Java ä»£ç ä¸­å¯ä»¥ä¸èµ‹åˆå€¼å°±ç›´æŽ¥ä½¿ç”¨ï¼Œç¨‹åºèƒ½è®¿é—®åˆ°è¿™äº›å­—æ®µçš„æ•°æ®ç±»åž‹å¯¹åº”çš„é›¶å€¼ã€‚ å¯¹è±¡å¤´ï¼ˆObject Headerï¼‰æ¦‚è¿°ï¼šæŽ¥ä¸‹æ¥ï¼Œè™šæ‹Ÿæœºè¦ä¸ºå¯¹è±¡å¤´æ•°æ®è¿›è¡Œè®¾ç½®ã€‚ï¼ˆe.g. å¯¹è±¡çš„å®žä¾‹ç±»ã€ç±»çš„å…ƒæ•°æ®ä¿¡æ¯çš„åœ°å€ã€å¯¹è±¡çš„å“ˆå¸Œç ã€å¯¹è±¡çš„ GC åˆ†ä»£å¹´é¾„ï¼‰ initæ¦‚è¿°ï¼šåœ¨ä¸Šé¢æ­¥éª¤å®ŒæˆåŽï¼Œä»Žè™šæ‹Ÿæœºçš„è§’åº¦æ¥çœ‹ï¼Œä¸€ä¸ªæ–°çš„å¯¹è±¡å·²ç»äº§ç”Ÿäº†ï¼Œä½†ä»Ž Java ç¨‹åºçš„è§’åº¦æ¥çœ‹ï¼Œå¯¹è±¡çš„åˆ›å»ºæ‰åˆšåˆšå¼€å§‹ï¼Œ&lt;init&gt; æ–¹æ³•è¿˜æ²¡æœ‰è¢«æ‰§è¡Œï¼Œæ‰€æœ‰çš„å­—æ®µè¿˜ä¸ºé›¶å€¼ã€‚ ä¸€èˆ¬æ¥è¯´ï¼Œæ‰§è¡Œ new æŒ‡ä»¤ä¹‹åŽä¼šæŽ¥ç€æ‰§è¡Œ &lt;init&gt; æ–¹æ³•ï¼Œå°†å¯¹è±¡æŒ‰ç…§æˆ‘ä»¬çš„æ„æ„¿è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·ä¸€ä¸ªçœŸæ­£çš„å¯¹è±¡æ‰ç®—å®Œå…¨äº§ç”Ÿã€‚ 2.3.2å¯¹è±¡çš„å†…å­˜å¸ƒå±€ åœ¨ HotSpot è™šæ‹Ÿæœºä¸­ï¼Œå¯¹è±¡åœ¨å†…å­˜ä¸­å­˜å‚¨çš„å¸ƒå±€å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ 3 å—åŒºåŸŸã€‚ å¯¹è±¡å¤´ï¼ˆå­˜æ”¾å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®&amp;ç±»åž‹æŒ‡é’ˆï¼‰ å®žä¾‹æ•°æ® å¯¹é½å¡«å…… 2.3.2.1 å¯¹è±¡å¤´ï¼ˆHeaderï¼‰ HotSpot è™šæ‹Ÿæœºçš„å¯¹è±¡å¤´åŒ…æ‹¬ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œå­˜å‚¨è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®çš„ï¼ˆMark Wordï¼‰ å’Œ ç±»åž‹æŒ‡é’ˆã€‚ ç¬¬ä¸€éƒ¨åˆ†ï¼šMark Word æ¦‚è¿°ï¼šç”¨äºŽå­˜å‚¨å¯¹è±¡è‡ªèº«çš„è¿è¡Œæ—¶æ•°æ®ï¼Œå¦‚ï¼ˆHashCodeã€GC åˆ†ä»£å¹´é¾„ã€é”çŠ¶æ€æ ‡å¿—ã€çº¿ç¨‹æŒæœ‰é”ã€åå‘çº¿ç¨‹IDã€åå‘æ—¶é—´æˆ³ï¼‰ï¼Œè¿™éƒ¨åˆ†æ•°æ®çš„é•¿åº¦åœ¨ 32 ä½å’Œ 64 ä½çš„è™šæ‹Ÿæœºä¸­ï¼ˆæœªå¼€å¯åŽ‹ç¼©æŒ‡é’ˆï¼‰åˆ†åˆ«ä¸º 32bit å’Œ 64bitã€‚ å†…å­˜ï¼šå¯¹è±¡éœ€è¦å­˜å‚¨çš„è¿è¡Œæ—¶æ•°æ®å¾ˆå¤šï¼Œå…¶å®žå·²ç»è¶…å‡ºäº† 32ä½ã€64ä½ Bitmap ç»“æž„æ‰€èƒ½è®°å½•çš„é™åº¦ï¼Œä½†æ˜¯å¯¹è±¡å¤´ä¿¡æ¯æ˜¯ä¸Žå¯¹è±¡è‡ªèº«å®šä¹‰çš„æ•°æ®æ— å…³çš„é¢å¤–å­˜å‚¨æˆæœ¬ï¼Œè€ƒè™‘åˆ°è™šæ‹Ÿæœºçš„ç©ºé—´æ•ˆçŽ‡ï¼ŒMark Word è¢«è®¾è®¡æˆä¸€ä¸ª éžå›ºå®šçš„æ•°æ®ç»“æž„ ä»¥ä¾¿åœ¨æžå°çš„ç©ºé—´å†…å­˜å‚¨å°½é‡å¤šçš„ä¿¡æ¯ï¼Œå®ƒä¼šæ ¹æ®å¯¹è±¡çš„çŠ¶æ€å¤ç”¨è‡ªå·±çš„å­˜å‚¨ç©ºé—´ã€‚ HotSpot è™šæ‹Ÿæœºå¯¹è±¡å¤´ Mark Word è¡¨å¦‚ä¸‹ ç¬¬äºŒéƒ¨åˆ†ï¼šç±»åž‹æŒ‡é’ˆ æ¦‚è¿°ï¼šå³å¯¹è±¡æŒ‡å‘å®ƒçš„ç±»å…ƒæ•°æ®çš„æŒ‡é’ˆï¼Œè™šæ‹Ÿæœºé€šè¿‡è¿™ä¸ªæŒ‡é’ˆæ¥ç¡®å®šè¿™ä¸ªå¯¹è±¡æ˜¯å“ªä¸ªç±»çš„å®žä¾‹ã€‚ Reminderå¹¶ä¸æ˜¯æ‰€æœ‰çš„è™šæ‹Ÿæœºå®žçŽ°éƒ½å¿…é¡»åœ¨å¯¹è±¡æ•°æ®ä¸Šä¿ç•™ç±»åž‹æŒ‡é’ˆï¼Œæ¢å¥è¯è¯´ï¼ŒæŸ¥æ‰¾å¯¹è±¡çš„å…ƒæ•°æ®å¹¶ä¸ä¸€å®šè¦ç»è¿‡å¯¹è±¡æœ¬èº«ã€‚(è§2.2.3èŠ‚) æ•°ç»„å¯¹è±¡ï¼šå¦‚æžœå¯¹è±¡æ˜¯ä¸€ä¸ª Java æ•°ç»„ï¼Œé‚£åœ¨å¯¹è±¡å¤´ä¸­è¿˜å¿…é¡»æœ‰ä¸€å—ç”¨äºŽè®°å½•æ•°ç»„é•¿åº¦çš„æ•°æ®ï¼Œå› ä¸ºè™šæ‹Ÿæœºå¯ä»¥é€šè¿‡æ™®é€š Java å¯¹è±¡çš„å…ƒæ•°æ®ä¿¡æ¯ç¡®å®š Java å¯¹è±¡çš„å¤§å°ï¼Œä½†æ˜¯ä»Žæ•°ç»„çš„å…ƒæ•°æ®ä¸­å´æ— æ³•ç¡®å®šæ•°ç»„çš„å¤§å°ã€‚ 2.3.2.2 å®žä¾‹æ•°æ®ï¼ˆInstance Dataï¼‰ æ¦‚è¿°ï¼šè¿™éƒ¨åˆ†æ˜¯å¯¹è±¡çœŸæ­£å­˜å‚¨çš„æœ‰æ•ˆä¿¡æ¯ï¼Œä¹Ÿæ˜¯åœ¨ç¨‹åºä»£ç ä¸­æ‰€å®šä¹‰çš„å„ç§ç±»åž‹å­—æ®µå†…å®¹ã€‚æ— è®ºæ˜¯ä»Žçˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ï¼Œè¿˜æ˜¯åœ¨å­ç±»ä¸­å®šä¹‰çš„ï¼Œéƒ½éœ€è¦è®°å½•èµ·æ¥ã€‚ å­˜å‚¨é¡ºåºï¼šè¿™éƒ¨åˆ†çš„å­˜å‚¨é¡ºåºä¼šå—åˆ°è™šæ‹Ÿæœº åˆ†é…ç­–ç•¥å‚æ•°ï¼ˆFieldsAllocationStyleï¼‰ å’Œå­—æ®µåœ¨ Java æºç ä¸­å®šä¹‰é¡ºåºçš„å½±å“ã€‚HotSpot è™šæ‹Ÿæœºé»˜è®¤çš„åˆ†é…ç­–ç•¥ä¸º longs/doubles =&gt; ints =&gt; shorts/chars =&gt; bytes/booleans =&gt; oopsï¼ˆOrdinary Object Pointersï¼‰ï¼Œä»Žåˆ†é…ç­–ç•¥ä¸­å¯ä»¥çœ‹å‡ºï¼Œç›¸åŒå®½åº¦çš„å­—æ®µæ€»æ˜¯è¢«åˆ†é…åˆ°ä¸€èµ·ã€‚åœ¨æ»¡è¶³è¿™ä¸ªå‰ææ¡ä»¶çš„æƒ…å†µä¸‹ï¼Œåœ¨çˆ¶ç±»ä¸­å®šä¹‰çš„å˜é‡ä¼šå‡ºçŽ°åœ¨å­ç±»ä¹‹å‰ã€‚å¦‚æžœ CompactFields å‚æ•°å€¼ä¸º trueï¼ˆé»˜è®¤ä¸º trueï¼‰ï¼Œé‚£ä¹ˆå­ç±»ä¹‹ä¸­è¾ƒçª„çš„å˜é‡ä¹Ÿå¯èƒ½ä¼šæ’å…¥åˆ°çˆ¶ç±»å˜é‡çš„ç©ºéš™ä¹‹ä¸­ã€‚ 2.3.2.3 å¯¹é½å¡«å……ï¼ˆPaddingï¼‰ æ¦‚è¿°ï¼šä¸æ˜¯å¿…ç„¶å­˜åœ¨çš„ï¼Œä¹Ÿæ²¡æœ‰ç‰¹åˆ«çš„å«ä¹‰ï¼Œå®ƒä»…ä»…èµ·ç€å ä½ç¬¦çš„ä½œç”¨ã€‚ åŽŸç†ï¼šç”±äºŽ HotSpot VM çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿè¦æ±‚ å¯¹è±¡èµ·å§‹åœ°å€å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´å€æ•°ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å¯¹è±¡çš„å¤§å°å¿…é¡»æ˜¯ 8 å­—èŠ‚çš„æ•´å€æ•°ã€‚è€Œå¯¹è±¡å¤´éƒ¨åˆ†æ­£å¥½æ˜¯ 8 å­—èŠ‚çš„æ•´å€æ•°ï¼ˆ 1 å€æˆ– 2 å€ï¼‰ï¼Œå› æ­¤ï¼Œå½“å¯¹è±¡å®žä¾‹æ•°æ®éƒ¨åˆ†æ²¡æœ‰å¯¹é½æ—¶ï¼Œå°±éœ€è¦é€šè¿‡å¯¹é½å¡«å……æ¥è¡¥å…¨ã€‚ 2.3.3 å¯¹è±¡çš„è®¿é—®å®šä½ æ¦‚è¿°ï¼šå»ºç«‹å¯¹è±¡æ˜¯ä¸ºäº†ä½¿ç”¨å¯¹è±¡ï¼Œæˆ‘ä»¬çš„ Java ç¨‹åºéœ€è¦é€šè¿‡æ ˆä¸Šçš„ reference æ•°æ®æ¥æ“ä½œå †ä¸Šçš„å…·ä½“å¯¹è±¡ã€‚ç”±äºŽ reference ç±»åž‹åœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­åªè§„å®šäº†ä¸€ä¸ªæŒ‡å‘å¯¹è±¡çš„å¼•ç”¨ï¼Œå¹¶æ²¡æœ‰å®šä¹‰è¿™ä¸ªå¼•ç”¨åº”è¯¥é€šè¿‡ä½•ç§æ–¹å¼åŽ»å®šä½ã€è®¿é—®å †ä¸­çš„å¯¹è±¡çš„å…·ä½“ä½ç½®ï¼Œæ‰€ä»¥ å¯¹è±¡è®¿é—®æ–¹å¼ä¹Ÿæ˜¯å–å†³äºŽè™šæ‹Ÿæœºå®žçŽ°è€Œå®šçš„ã€‚ç›®å‰ä¸»æµçš„è®¿é—®æ–¹å¼æœ‰ä¸¤ç§ã€‚ å¥æŸ„è®¿é—®ï¼šJava å †ä¸­å°†ä¼šåˆ’åˆ†å‡ºä¸€å—å†…å­˜æ¥ä½œä¸ºå¥æŸ„æ± ï¼Œreference ä¸­å­˜å‚¨çš„å°±æ˜¯å¯¹è±¡çš„å¥æŸ„åœ°å€ï¼Œè€Œå¥æŸ„ä¸­åŒ…å«äº†å¯¹è±¡å®žä¾‹æ•°æ®ä¸Žç±»åž‹æ•°æ®å„è‡ªçš„å…·ä½“åœ°å€ä¿¡æ¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ ç›´æŽ¥æŒ‡é’ˆï¼šJava å †å¯¹è±¡çš„å¸ƒå±€ä¸­å¿…é¡»è€ƒè™‘å¦‚ä½•æ”¾ç½®è®¿é—®ç±»åž‹æ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œ reference ä¸­å­˜å‚¨çš„ç›´æŽ¥å°±æ˜¯å¯¹è±¡åœ°å€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚ æ¯”è¾ƒï¼š1.å¥æŸ„è®¿é—®ï¼šä½¿ç”¨å¥æŸ„è®¿é—®çš„æœ€å¤§å¥½å¤„å°±æ˜¯ reference ä¸­å­˜å‚¨çš„æ˜¯ ç¨³å®šçš„ å¥æŸ„åœ°å€ï¼Œåœ¨å¯¹è±¡è¢«ç§»åŠ¨ï¼ˆåžƒåœ¾æ”¶é›†æ—¶ç§»åŠ¨å¯¹è±¡æ˜¯éžå¸¸æ™®éçš„è¡Œä¸ºï¼‰æ—¶åªä¼šæ”¹å˜å¥æŸ„ä¸­çš„å®žä¾‹æ•°æ®æŒ‡é’ˆï¼Œè€Œ reference æœ¬èº«ä¸éœ€è¦ä¿®æ”¹ã€‚2.æŒ‡é’ˆè®¿é—®ï¼šä½¿ç”¨ç›´æŽ¥è®¿é—®æœ€å¤§çš„å¥½å¤„å°±æ˜¯ é€Ÿåº¦å¿«ï¼Œå®ƒèŠ‚çœäº†ä¸€æ¬¡æŒ‡é’ˆå®šä½çš„æ—¶é—´å¼€é”€ï¼Œç”±äºŽå¯¹è±¡çš„è®¿é—®åœ¨ Java ä¸­éžå¸¸é¢‘ç¹ï¼Œå› æ­¤è¿™ç±»å¼€é”€ç§¯å°‘æˆå¤šåŽä¹Ÿæ˜¯ä¸€é¡¹éžå¸¸å¯è§‚çš„æ‰§è¡Œæˆæœ¬ã€‚ Sun HotSpot ä½¿ç”¨çš„æ˜¯ç¬¬äºŒç§æ–¹å¼è¿›è¡Œå¯¹è±¡è®¿é—®çš„ï¼Œä½†ä»Žæ•´ä¸ªè½¯ä»¶å¼€å‘çš„èŒƒå›´æ¥çœ‹ï¼Œå„ç§è¯­è¨€å’Œæ¡†æž¶ä½¿ç”¨å¥æŸ„æ¥è®¿é—®çš„æƒ…å†µä¹Ÿååˆ†å¸¸è§ã€‚ 2.4 å®žæˆ˜ï¼šOutOfMemoryError å¼‚å¸¸ åœ¨ Java è™šæ‹Ÿæœºè§„èŒƒçš„æè¿°ä¸­ï¼Œé™¤äº†ç¨‹åºè®¡æ•°å™¨å¤–ï¼Œè™šæ‹Ÿæœºå†…å­˜çš„å…¶ä»–å‡ ä¸ªè¿è¡Œæ—¶åŒºåŸŸéƒ½æœ‰å‘ç”Ÿ OutOfMemoryï¼ˆOOMï¼‰å¼‚å¸¸çš„å¯èƒ½ã€‚ ç›®çš„ï¼š1. é€šè¿‡ä»£ç éªŒè¯ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æè¿°çš„å„ä¸ªè¿è¡Œæ—¶åŒºåŸŸçš„å­˜å‚¨å†…å®¹ã€‚2. é‡åˆ°å®žé™…çš„å†…å­˜æº¢å‡ºå¼‚å¸¸æ—¶ï¼Œèƒ½æ ¹æ®å¼‚å¸¸çš„ä¿¡æ¯å¿«é€Ÿåˆ¤æ–­å“ªä¸ªåŒºåŸŸçš„å†…å­˜æº¢å‡ºã€‚3. äº†è§£ä»€ä¹ˆæ ·çš„ä»£ç å¯èƒ½ä¼šå¯¼è‡´è¿™äº›åŒºåŸŸå†…å­˜æº¢å‡ºï¼Œå¹¶äº†è§£å¦‚ä½•å¤„ç†ã€‚ VM Args è®¾ç½® Eclipse IDEï¼šDebug Configurations =&gt; Java Application =&gt; YoungGenGC =&gt; Arguments ä¸­çš„ VM arguments ä¸­è¿›è¡Œä¹¦å†™ï¼ˆä¹¦å†™å‚æ•°ä»¥ - å¼€å¤´ï¼Œä»¥ç©ºæ ¼åˆ†éš”ï¼‰ã€‚ æŽ§åˆ¶å°ï¼šç›´æŽ¥è·Ÿåœ¨ Java å‘½ä»¤ä¹‹åŽä¹¦å†™ã€‚ æœ¬äººè¿è¡Œåœ¨ Mac ç³»ç»Ÿä¸‹ï¼Œä½¿ç”¨ IDEA è¿›è¡Œé…ç½®ï¼Œæ­¥éª¤å¦‚ä¸‹æ‰€ç¤ºðŸ‘‡ã€‚ 1. æ‰“å¼€ Run Configurationsï¼ˆâŒƒ + âŒ¥ + R é€‰æ‹© 0 ï¼‰æˆ–è€…ï¼ˆâŒ˜ + â‡§ + A è¾“å…¥ run é€‰æ‹© runâ€¦ï¼‰ã€‚2. ç‚¹å‡»å¹¶æ‰“å¼€ VM optionsã€‚3. å†™å…¥è™šæ‹Ÿæœºå¯åŠ¨å‚æ•°ã€‚4.Apply å¹¶ Runã€‚ 4.1 - Java å †æº¢å‡º æ¦‚è¿°ï¼šJava å †ç”¨äºŽå­˜å‚¨å¯¹è±¡å®žä¾‹ï¼Œåªè¦ä¸æ–­åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸”ä¿è¯ GC Roots åˆ°å¯¹è±¡ä¹‹é—´æœ‰å¯è¾¾è·¯å¾„ æ¥é¿å…åžƒåœ¾å›žæ”¶æœºåˆ¶æ¸…é™¤è¿™äº›å¯¹è±¡ï¼Œé‚£ä¹ˆåœ¨å¯¹è±¡æ•°é‡åˆ°è¾¾æœ€å¤§å †çš„å®¹é‡é™åˆ¶åŽå°±ä¼šäº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚ æµ‹è¯•çŽ¯å¢ƒï¼š 12345-verbose:gc-Xms20M // æœ€å° GC å¯åŠ¨-Xmx20M // æœ€å¤§ GC å¯åŠ¨-XX:+PrintGCDetails // æ‰“å°è®¾ç½®-XX:SurvivorRatio=8 // å­˜æ´»å¯¹è±¡æ¯”çŽ‡ æµ‹è¯•ä»£ç ï¼š 12private static class OOMObject &#123;&#125; 123456public static void main(String[] args) &#123; List&lt;OOMObject&gt; list = new ArrayList&lt;&gt;(); while (true) &#123; list.add(new OOMObject()); &#125;&#125; è¿è¡Œç»“æžœï¼š 1java.lang.OutOfMemoryError: Java heap space åˆ†æžï¼šJava å †å†…å­˜çš„ OOM å¼‚å¸¸æ˜¯æ—¶æœºåº”ç”¨ä¸­å¸¸è§çš„å†…å­˜æº¢å‡ºå¼‚å¸¸æƒ…å†µã€‚å½“å‡ºçŽ° Java å †å†…å­˜æº¢å‡ºæ—¶ï¼Œå¼‚å¸¸å †æ ˆä¿¡æ¯ java.lang.OutOfMemoryError ä¼šè·Ÿç€è¿›ä¸€æ­¥æç¤º Java heap spaceã€‚ è§£å†³æ–¹å¼1. å †è½¬å‚¨å¿«ç…§ï¼šè¦è§£å†³è¿™ä¸ªåŒºåŸŸçš„å¼‚å¸¸ï¼Œä¸€èˆ¬çš„æ‰‹æ®µæ˜¯å…ˆé€šè¿‡å†…å­˜æ˜ åƒåˆ†æžå·¥å…·å¯¹ Dump å‡ºæ¥çš„å †è½¬å‚¨å¿«æ‰¾è¿›è¡Œåˆ†æžï¼Œé‡ç‚¹æ˜¯ç¡®è®¤å†…å­˜ä¸­çš„å¯¹è±¡æ˜¯å¦æ˜¯å¿…è¦çš„ï¼Œä¹Ÿå°±æ˜¯è¦åˆ†æ¸…æ¥šåˆ°åº•æ˜¯å‡ºçŽ°äº†å†…å­˜æ³„éœ²ï¼ˆMemory Leakï¼‰è¿˜æ˜¯å†…å­˜æº¢å‡ºï¼ˆMemory Overflowï¼‰ã€‚2. å†…å­˜æ³„éœ²ï¼šè¿›ä¸€æ­¥é€šè¿‡å·¥å…·æŸ¥çœ‹æ³„éœ²å¯¹è±¡åˆ° CG Roots çš„å¼•ç”¨é“¾ï¼ŒäºŽæ˜¯å°±èƒ½æ‰¾åˆ°å†…å­˜æ³„éœ²å¯¹è±¡æ˜¯é€šè¿‡æ€Žæ ·çš„è·¯å¾„ä¸Ž GC Roots ç›¸å…³è”å¹¶å¯¼è‡´åžƒåœ¾æ”¶é›†å™¨æ— æ³•è‡ªåŠ¨å›žæ”¶å®ƒä»¬çš„ã€‚æŽŒæ¡äº†æ³„éœ²å¯¹è±¡çš„ç±»åž‹ä¿¡æ¯ä»¥åŠ GC Roots å¼•ç”¨é“¾çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥æ¯”è¾ƒå‡†ç¡®åœ°å®šä½å‡ºæ³„éœ²ä»£ç çš„ä½ç½®ã€‚3. å†…å­˜æº¢å‡ºï¼šå¦‚æžœä¸å­˜åœ¨æ³„éœ²ï¼Œæ¢å¥è¯è¯´ï¼Œå°±æ˜¯å†…å­˜ä¸­çš„å¯¹è±¡ç¡®å®žéƒ½å¿…é¡»è¿˜æ´»ç€ï¼Œé‚£å°±åº”å½“æ£€æŸ¥è™šæ‹Ÿæœºçš„å †å‚æ•°ï¼ˆ-Xmx ä¸Ž -Xmsï¼‰ï¼Œä¸Žæœºå™¨ç‰©ç†å†…å­˜å¯¹è±¡çœ‹æ˜¯å¦è¿˜å¯ä»¥è°ƒå¤§ï¼Œä»Žä»£ç ä¸Šæ£€æŸ¥æ˜¯å¦å­˜åœ¨æŸäº›å¯¹è±¡ç”Ÿå‘½å‘¨æœŸè¿‡é•¿ã€æŒæœ‰çŠ¶æ€è¿‡é•¿çš„æƒ…å†µï¼Œå°è¯•å‡å°‘ç¨‹åºè¿è¡ŒæœŸçš„å†…å­˜æ¶ˆè€—ã€‚ 4.2 - è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆæº¢å‡º æ¦‚è¿°ï¼šç”±äºŽåœ¨ HotSpot è™šæ‹Ÿæœºä¸­å¹¶ä¸åŒºåˆ†è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œå› æ­¤ï¼Œå¯¹äºŽ HotSpot æ¥è¯´ï¼Œè™½ç„¶ -Xoos å‚æ•°ï¼ˆè®¾ç½®æœ¬åœ°æ–¹æ³•æ ˆå¤§å°ï¼‰å­˜åœ¨ï¼Œä½†å®žé™…ä¸Šæ˜¯æ— æ•ˆçš„ï¼Œæ ˆå®¹é‡åªç”± -Xss å‚æ•°è®¾å®šã€‚å…³äºŽè™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆï¼Œåœ¨ Java è™šæ‹Ÿæœºè§„èŒƒä¸­æè¿°äº†ä¸¤ç§å¼‚å¸¸ã€‚ å¼‚å¸¸ç±»åž‹ å‘ç”Ÿæ¡ä»¶ StackOverflowError çº¿ç¨‹è¯·æ±‚çš„æ ˆæ·±åº¦å¤§äºŽè™šæ‹Ÿæœºæ‰€å…è®¸çš„æ·±åº¦æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ OutOfMemoryError æ— æ³•ç”³è¯·åˆ°è¶³å¤Ÿçš„å†…å­˜æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ã€‚ è¿™é‡ŒæŠŠå¼‚å¸¸åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œçœ‹ä¼¼æ›´åŠ ä¸¥è°¨ï¼Œä½†å´å­˜åœ¨ä¸€äº›ç›¸äº’é‡å çš„åœ°æ–¹ï¼šæ–¹æ ˆç©ºé—´æ— æ³•ç»§ç»­åˆ†é…æ—¶ï¼Œåˆ°åº•æ˜¯å†…å­˜å¤ªå°ï¼Œè¿˜æ˜¯å·²ä½¿ç”¨çš„æ ˆç©ºé—´å¤ªå¤§ï¼Œå…¶æœ¬è´¨ä¸Šåªæ˜¯å¯¹åŒä¸€ä»¶äº‹çš„ä¸¤ç§æè¿°è€Œå·²ã€‚ 4.2.1 - StackOverflowError æµ‹è¯•çŽ¯å¢ƒï¼šåœ¨æ­¤æµ‹è¯•ä¸­ï¼Œå°†æµ‹è¯•èŒƒå›´é™åˆ¶äºŽå•çº¿ç¨‹ä¸­æ“ä½œã€‚1. ä½¿ç”¨ -Xss å‚æ•°å‡å°‘æ ˆå†…å­˜å®¹é‡ï¼Œç»“æžœæŠ›å‡º SOF å¼‚å¸¸ï¼Œå¼‚å¸¸å‡ºçŽ°æ—¶è¾“å‡ºçš„å †æ ˆæ·±åº¦ç›¸åº”ç¼©å°ã€‚2. å®šä¹‰äº†å¤§é‡çš„æœ¬åœ°å˜é‡ï¼Œå¢žå¤§æ­¤æ–¹æ³•æ ˆä¸­æœ¬åœ°å˜é‡è¡¨é•¿åº¦ã€‚ç»“æžœæŠ›å‡º SOF å¼‚å¸¸æ—¶è¾“å‡ºçš„å †æ ˆæ·±åº¦ç›¸åº”ç¼©å°ã€‚ 1VM Args: -Xss128k // æ ˆå†…å­˜å®¹é‡ æµ‹è¯•ä»£ç  12// è®°å½•å †æ ˆæ·±åº¦private int stackLength = 1; 1234public void stackLeak() &#123; stackLength++; stackLeak();&#125; 123456789public static void main(String[] args) throws Throwable &#123; JavaVMStackSOF oom = new JavaVMStackSOF(); try &#123; oom.stackLeak(); &#125; catch (Throwable e) &#123; System.out.println(&quot;Stack length: &quot; + oom.stackLength); throw e; &#125;&#125; è¿è¡Œç»“æžœ 12Stack length: 718Exception in thread &quot;main&quot; java.lang.StackOverflowError åˆ†æžï¼šåœ¨å•ä¸ªçº¿ç¨‹ä¸‹ï¼Œæ— è®ºæ˜¯ç”±äºŽæ ˆå¸§å¤ªå¤§è¿˜æ˜¯è™šæ‹Ÿæœºæ ˆå®¹é‡å¤ªå°ï¼Œå½“å†…å­˜æ— æ³•åˆ†é…çš„æ—¶å€™ï¼Œè™šæ‹ŸæœºæŠ›å‡ºçš„éƒ½æ˜¯ StackOverflowError å¼‚å¸¸ã€‚ä½†æ˜¯è¿™æ ·äº§ç”Ÿçš„å†…å­˜æº¢å‡ºå¼‚å¸¸ä¸Žæ ˆç©ºé—´æ˜¯å¦è¶³å¤Ÿå¤§å¹¶ä¸å­˜åœ¨ä»»ä½•è”ç³»ï¼Œæˆ–è€…ç¡®åˆ‡åœ°è¯´ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºæ¯ä¸ªçº¿ç¨‹çš„æ ˆåˆ†é…çš„å†…å­˜è¶Šå¤§ï¼Œåè€Œè¶Šå®¹æ˜“äº§ç”Ÿå†…å­˜æº¢å‡ºå¼‚å¸¸ã€‚ ç†è§£ï¼šæ“ä½œç³»ç»Ÿåˆ†é…ç»™æ¯ä¸ªè¿›ç¨‹çš„å†…å­˜æ˜¯æœ‰é™çš„ï¼Œè™šæ‹Ÿæœºæä¾›äº†å‚æ•°æ¥æŽ§åˆ¶ Java å †å’Œæ–¹æ³•åŒºçš„è¿™ä¸¤éƒ¨åˆ†å†…å­˜çš„æœ€å¤§å€¼ã€‚å‰©ä½™çš„å†…å­˜ -Xmsï¼ˆæœ€å¤§å †å®¹é‡ï¼‰ -MaxPermSizeï¼ˆæœ€å¤§æ–¹æ³•åŒºå®¹é‡ï¼‰ï¼Œç¨‹åºè®¡æ•°å™¨æ¶ˆè€—å†…å­˜å¾ˆå°ï¼Œå¯ä»¥å¿½ç•¥ä¸è®¡ã€‚å¦‚æžœè™šæ‹Ÿæœºè¿›ç¨‹æœ¬èº«è€—è´¹çš„å†…å­˜ä¸è®¡ç®—åœ¨å†…ï¼Œå‰©ä¸‹çš„å†…å­˜å°±ç”±è™šæ‹Ÿæœºæ ˆå’Œæœ¬åœ°æ–¹æ³•æ ˆç“œåˆ†äº†ã€‚æ¯ä¸ªçº¿ç¨‹åˆ†é…åˆ°çš„æ ˆå®¹é‡è¶Šå¤§ï¼Œå¯ä»¥å»ºç«‹çš„çº¿ç¨‹æ•°é‡è‡ªç„¶è¶Šå°‘ï¼Œå»ºç«‹çº¿ç¨‹æ—¶å°±è¶Šå®¹æ˜“æŠŠå‰©ä¸‹çš„å†…å­˜è€—å°½ã€‚ æŽ¢ç´¢ï¼šå‡ºçŽ° SOF å¼‚å¸¸æ—¶æœ‰é”™è¯¯å †æ ˆå¯ä»¥é˜…è¯»ï¼Œç›¸å¯¹æ¥è¯´ï¼Œæ¯”è¾ƒå®¹æ˜“æ‰¾åˆ°é—®é¢˜çš„æ‰€åœ¨ã€‚è€Œä¸”ï¼Œå¦‚æžœä½¿ç”¨è™šæ‹Ÿæœºé»˜è®¤å‚æ•°ï¼Œæ ˆæ·±åº¦åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ˆå› ä¸ºæ¯ä¸ªæ–¹æ³•åŽ‹å…¥æ ˆçš„å¸§å¤§å°å¹¶ä¸æ˜¯ä¸€æ ·çš„ï¼‰è¾¾åˆ° 1000 - 2000 å®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œå¯¹äºŽæ­£å¸¸çš„æ–¹æ³•è°ƒç”¨ï¼ˆåŒ…æ‹¬é€’å½’ï¼‰ï¼Œè¿™ä¸ªæ·±åº¦åº”è¯¥å®Œå…¨å¤Ÿç”¨äº†ã€‚ä½†æ˜¯ï¼Œå¦‚æžœå»ºç«‹è¿‡å¤šçº¿ç¨‹å¯¼è‡´å†…å­˜æº¢å‡ºï¼Œåœ¨ä¸èƒ½å‡å°‘çº¿ç¨‹æ•°æˆ–è€…æ›´æ¢ 64 ä½è™šæ‹Ÿæœºçš„æƒ…å†µä¸‹ï¼Œå°±åªèƒ½é€šè¿‡ å‡å°‘æœ€å¤§å † å’Œ å‡å°‘æ ˆå®¹é‡ æ¥æ¢æ›´å¤šçš„çº¿ç¨‹ã€‚ 4.2.2 - OutOfMemoryError æµ‹è¯•çŽ¯å¢ƒ 1VM Args: -Xss2M // æ ˆå†…å­˜å®¹é‡ æµ‹è¯•ä»£ç ï¼šåˆ›å»ºçº¿ç¨‹å¯¼è‡´å†…å­˜æº¢å‡ºå¼‚å¸¸ 1234private void neverStop() &#123; while (true) &#123; &#125;&#125; 123456// å¾ªçŽ¯å¼€å¯çº¿ç¨‹public void stackLeakByThread() &#123; while (true) &#123; new Thread(this::neverStop).start(); &#125;&#125; 1234public static void main(String[] args) &#123; JavaVMStackOOM oom = new JavaVMStackOOM(); oom.stackLeakByThread();&#125; è¿è¡Œç»“æžœ 1Exception in thread â€œmainâ€ java.lang.OutOfMemoryError: unable to create new native thread 4.3 - æ–¹æ³•åŒºå’Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡º æ¦‚è¿°ï¼šç”±äºŽè¿è¡Œæ—¶å¸¸é‡æ± æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤è¿™ä¸¤ä¸ªåŒºåŸŸçš„æº¢å‡ºæµ‹è¯•å°±æ”¾åœ¨ä¸€èµ·è¿›è¡Œã€‚ è„‘è¡¥ï¼šString.intern() æ˜¯ä¸€ä¸ª Native æ–¹æ³•ï¼Œå®ƒçš„ä½œç”¨æ˜¯ï¼šå¦‚æžœå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»åŒ…å«ä¸€ä¸ªç­‰äºŽæ­¤ String å¯¹è±¡çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¿”å›žä»£è¡¨æ± ä¸­è¿™ä¸ªå­—ç¬¦ä¸²çš„ String å¯¹è±¡ï¼›å¦åˆ™ï¼Œå°†æ­¤ String å¯¹è±¡åŒ…å«çš„å­—ç¬¦ä¸²æ·»åŠ åˆ°å¸¸é‡æ± ä¸­ï¼Œå¹¶ä¸”è¿”å›žæ­¤ String å¯¹è±¡çš„å¼•ç”¨ã€‚åœ¨ JDK1.6 ä»¥åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç”±äºŽå¸¸é‡æ± åˆ†é…åœ¨æ°¸ä¹…ä»£å†…ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ -XX:PermSize å’Œ -XX:MaxPermSize é™åˆ¶æ–¹æ³•åŒºçš„å¤§å°åï¼Œä»Žè€Œé—´æŽ¥é™åˆ¶å…¶ä¸­å¸¸é‡æ± çš„å®¹é‡ã€‚ 4.3.1 - OutOfMemoryError æµ‹è¯•çŽ¯å¢ƒ 12-XX:PermSize=10M // æ–¹æ³•åŒºæœ€å°å€¼-XX:MaxPermSize=10M // æ–¹æ³•åŒºæœ€å¤§å€¼ æµ‹è¯•ä»£ç  1234567public static void main(String[] args) &#123; List&lt;String&gt; list = new ArrayList&lt;&gt;(); long i = 0; while (true) &#123; list.add(String.valueOf(i++).intern()); &#125;&#125; è¿è¡Œç»“æžœ 123Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: PermGen spaceeat java.lang.String.intern(Native Method)at org.fenixsoft.oom.RuntimeConstantPoolOOM.main(RuntimeConstantPoolOOM.java:18) åˆ†æžï¼šä»Žè¿è¡Œç»“æžœä¸­å¯ä»¥çœ‹åˆ°ï¼Œè¿è¡Œæ—¶å¸¸é‡æ± æº¢å‡ºï¼Œåœ¨ OutOfMemoryError åŽé¢è·Ÿéšçš„æç¤ºä¿¡æ¯æ˜¯ PermGen spaceï¼Œè¯´æ˜Žè¿è¡Œæ—¶å¸¸é‡æ± å±žäºŽæ–¹æ³•åŒºï¼ˆHotSpot è™šæ‹Ÿæœºä¸­çš„æ°¸ä¹…ä»£ï¼‰çš„ä¸€éƒ¨åˆ†ã€‚ 4.3.2 - String å¸¸é‡æ± æµ‹è¯• ä½¿ç”¨ JDK1.7 è¿è¡Œè¿™æ®µç¨‹åºå°±ä¸ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æžœï¼Œwhile å¾ªçŽ¯å°†ä¸€ç›´è¿›è¡Œä¸‹åŽ»ã€‚å…³äºŽè¿™ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ± çš„å®žçŽ°é—®é¢˜ï¼Œè¿˜å¯ä»¥å¼•ç”³å‡ºä¸€ä¸ªæ›´æœ‰æ„æ€çš„å½±å“ã€‚ æµ‹è¯•ä»£ç  12String str1 = new StringBuilder(&quot;è®¡ç®—æœº&quot;).append(&quot;è½¯ä»¶&quot;).toString();System.out.println(str1.intern() == str1); 12String str2 = new StringBuilder(&quot;ja&quot;).append(&quot;va&quot;).toString();System.out.println(str2.intern() == str2); åˆ†æžï¼š JDK1.6ï¼šä¼šå¾—åˆ°ä¸¤ä¸ª falseï¼Œè€Œåœ¨ JDK1.7 ä¸­è¿è¡Œï¼Œä¼šå¾—åˆ°ä¸€ä¸ª true å’Œä¸€ä¸ª falseã€‚äº§ç”Ÿå·®å¼‚çš„åŽŸå› æ˜¯ï¼šæ˜¯ JDK1.6 ä¸­ intern() æ–¹æ³•ä¼šæŠŠé¦–æ¬¡é‡åˆ°çš„å­—ç¬¦ä¸²å®žä¾‹å¤åˆ¶åˆ°æ°¸ä¹…ä»£ä¸­ï¼Œè¿”å›žçš„ä¹Ÿæ˜¯æ°¸ä¹…ä»£ä¸­è¿™ä¸ªå­—ç¬¦ä¸²å®žä¾‹çš„å¼•ç”¨ï¼Œè€Œç”± StringBuilder åˆ›å»ºçš„å­—ç¬¦ä¸²å®žä¾‹åœ¨ Java å †ä¸Šï¼Œæ‰€ä»¥å¿…ç„¶ä¸æ˜¯åŒä¸€ä¸ªå¼•ç”¨ï¼Œå°†è¿”å›ž false JDK1.7ï¼šintern() å®žçŽ°ä¸ä¼šå†å¤åˆ¶å®žä¾‹ï¼Œåªæ˜¯åœ¨å¸¸é‡æ± ä¸­è®°å½•é¦–æ¬¡å‡ºçŽ°çš„å®žä¾‹å¼•ç”¨ï¼Œå› æ­¤ intern() è¿”å›žçš„å¼•ç”¨å’Œç”± StringBuilder åˆ›å»ºçš„é‚£ä¸ªå­—ç¬¦ä¸²å®žä¾‹æ˜¯åŒä¸€ä¸ªã€‚å¯¹ str2 æ¯”è¾ƒè¿”å›ž false æ˜¯å› ä¸º java è¿™ä¸ªå­—ç¬¦ä¸²åœ¨æ‰§è¡Œ StringBuilder.toString() ä¹‹å‰å·²ç»å‡ºçŽ°è¿‡ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­å·²ç»æœ‰å®ƒçš„å¼•ç”¨äº†ï¼Œä¸ç¬¦åˆé¦–æ¬¡å‡ºçŽ°çš„åŽŸåˆ™ï¼Œè€Œ è®¡ç®—æœºè½¯ä»¶ è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯é¦–æ¬¡å‡ºçŽ°çš„ï¼Œå› æ­¤è¿”å›ž trueã€‚ 4.3.3 - æµ‹è¯•è®¾è®¡æ€è·¯ æ–¹æ³•åŒºç”¨äºŽå­˜æ”¾ Class çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚ç±»åã€è®¿é—®ä¿®é¥°ç¬¦ã€å¸¸é‡æ± ã€å­—æ®µæè¿°ã€æ–¹æ³•æè¿°ç­‰ã€‚å¯¹äºŽè¿™äº›åŒºåŸŸçš„æµ‹è¯•ï¼ŒåŸºæœ¬æ€è·¯å°±æ˜¯è¿è¡Œæ—¶äº§ç”Ÿå¤§é‡çš„ç±»åŽ»å¡«æ»¡æ–¹æ³•åŒºï¼Œç›´åˆ°æº¢å‡ºã€‚å¦å¤–çš„ï¼Œç›´æŽ¥ä½¿ç”¨ Java SE API ä¹Ÿå¯ä»¥åŠ¨æ€äº§ç”Ÿç±»ï¼ˆå¦‚åå°„æ—¶çš„ GeneratedConstorAccessor å’ŒåŠ¨æ€ä»£ç†ç­‰ï¼‰ã€‚ 4.3.4 - æ€»ç»“ æ–¹æ³•åŒºæº¢å‡ºæ˜¯ä¸€ç§å¸¸è§çš„å†…å­˜æº¢å‡ºå¼‚å¸¸ï¼Œä¸€ä¸ªç±»è¦è¢«åžƒåœ¾æ”¶é›†å™¨å›žæ”¶æŽ‰ï¼Œåˆ¤å®šæ¡ä»¶æ˜¯æ¯”è¾ƒè‹›åˆ»çš„ã€‚åœ¨ç»å¸¸åŠ¨æ€ç”Ÿæˆå¤§é‡çš„ Class çš„åº”ç”¨ä¸­ï¼Œéœ€è¦ç‰¹åˆ«æ³¨æ„ç±»çš„å›žæ”¶æƒ…å†µã€‚è¿™ç±»åœºæ™¯é™¤äº†ä¸Šé¢æåˆ°çš„ç¨‹åºä½¿ç”¨äº† CGLib å­—èŠ‚ç å¢žå¼ºå’ŒåŠ¨æ€è¯­è¨€ä¹‹å¤–ï¼Œå¸¸è§çš„è¿˜æœ‰ï¼šå¤§é‡ JSP æˆ–åŠ¨æ€äº§ç”Ÿ JSP æ–‡ä»¶çš„åº”ç”¨ï¼ˆJSP ç¬¬ä¸€æ¬¡è¿è¡Œæ—¶éœ€è¦ç¼–è¯‘ä¸º Java ç±»ï¼‰ã€åŸºäºŽ OSGi åº”ç”¨ï¼ˆå³ä½¿æ˜¯åŒä¸€ä¸ªç±»æ–‡ä»¶ï¼Œè¢«ä¸åŒçš„åŠ è½½å™¨åŠ è½½ä¹Ÿä¼šè§†ä¸ºä¸åŒçš„ç±»ï¼‰ç­‰ã€‚ 4.4 - æœ¬æœºç›´æŽ¥å†…å­˜æº¢å‡º æ¦‚è¿°ï¼šDirectMemory å®¹é‡å¯ä»¥é€šè¿‡ -XX:MaxDirectMemorySize æŒ‡å®šï¼Œå¦‚æžœä¸æŒ‡å®šï¼Œåˆ™é»˜è®¤ä¸Ž Java å †æœ€å¤§å€¼ï¼ˆ-XmxæŒ‡å®šï¼‰ä¸€æ ·ï¼Œä¸‹é¢çš„æµ‹è¯•ä»£ç è¶Šè¿‡äº† DirectByteBuffer ç±»ï¼Œç›´æŽ¥é€šè¿‡åå°„èŽ·å– Unsafe å®žä¾‹è¿›è¡Œå†…å­˜åˆ†é…ï¼ˆUnsafe ç±»çš„ getUnsafe() æ–¹æ³•é™åˆ¶äº†åªæœ‰å¼•å¯¼ç±»åŠ è½½å™¨æ‰ä¼šè¿”å›žå®žä¾‹ï¼Œä¹Ÿå°±æ˜¯è®¾è®¡è€…å¸Œæœ›åªæœ‰ rt.jar ä¸­çš„ç±»æ‰èƒ½ä½¿ç”¨ Unsafe çš„åŠŸèƒ½ï¼‰ã€‚å› ä¸ºï¼Œè™½ç„¶ä½¿ç”¨ DirectByteBuffer åˆ†é…å†…å­˜ä¹Ÿä¼šæŠ›å‡ºå†…å­˜æº¢å‡ºå¼‚å¸¸ï¼Œä½†å®ƒæŠ›å‡ºå¼‚å¸¸æ—¶å¹¶æ²¡æœ‰çœŸæ­£å‘æ“ä½œç³»ç»Ÿç”³è¯·åˆ†é…å†…å­˜ï¼Œè€Œæ˜¯é€šè¿‡è®¡ç®—å¾—çŸ¥å†…å­˜æ— æ³•åˆ†é…ï¼ŒäºŽæ˜¯æ‰‹åŠ¨æŠ›å‡ºå¼‚å¸¸ï¼ŒçœŸæ­£ç”³è¯·åˆ†é…å†…å­˜çš„æ–¹æ³•æ˜¯ unfase.allocateMemory()ã€‚ æµ‹è¯•ä»£ç  1private static final int _1MB = 1024 * 1024; 12345678public static void main(String[] args) throws Exception &#123; Field unsafeField = Unsafe.class.getDeclaredFields()[0]; unsafeField.setAccessible(true); Unsafe unsafe = (Unsafe) unsafeField.get(null); while (true) &#123; unsafe.allocateMemory(_1MB); &#125;&#125; è¿è¡Œç»“æžœ 123Exception in thread &quot;main&quot; java.lang.OutOfMemoryErrorat sun.misc.Unsafe.allocateMemory(Native Method)at org.fenixsoft.oom.DMOOM.main(DMOOM.java:20) åˆ†æžï¼šç”± DirectMemory å¯¼è‡´çš„å†…å­˜æº¢å‡ºï¼Œä¸€ä¸ªæ˜Žæ˜¾çš„ç‰¹å¾æ˜¯åœ¨ Heap Dump æ–‡ä»¶ä¸­ä¸ä¼šçœ‹åˆ°æ˜Žæ˜¾çš„å¼‚å¸¸ï¼Œå¦‚æžœå‘çŽ° OOM ä¹‹åŽ Dump æ–‡ä»¶å¾ˆå°ï¼Œè€Œç¨‹åºä¸­åˆç›´æŽ¥æˆ–é—´æŽ¥ä½¿ç”¨äº† NIOï¼Œé‚£å°±å¯ä»¥è€ƒè™‘æ£€æŸ¥ä¸€ä¸‹æ˜¯ä¸æ˜¯è¿™æ–¹é¢çš„åŽŸå› ã€‚ æ‚„æ‚„è¯ ðŸŒˆ å’Œå¤§å®¶è¯´ä¸€å£°æŠ±æ­‰ï¼Œè¿™ä¹ˆä¹…æ‰å®Œæˆäº†æˆ‘çš„ç¬¬äºŒç¯‡è¯»ä¹¦ç¬”è®°ï¼Œå…¶ä¸­å¤§å®¶å¯ä»¥çœ‹åˆ°ï¼Œæ–‡å­—æ€§çš„å†…å®¹å¤šæ˜¯ä¸€æ–¹é¢ï¼ŒåŽŸä½œè€…çš„é˜è¿°ä¸­æ˜¯æœ‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯æ¯”è¾ƒä¸¥è°¨æ€§çš„ä¸”å…¨é¢æ€§çš„ï¼Œè¿™ä¹Ÿå¯¼è‡´äº†è¡Œæ–‡ä¸­çš„å†…å®¹åˆ†ç±»æ˜¯æ¯”è¾ƒæ¨¡ç³Šçš„ï¼Œè¿™ç¯‡è¯»ä¹¦ç¬”è®°æ˜¯æˆ‘åœ¨æ•´ç†è¿‡äº†ä¸€éä¹‹åŽå†æ¬¡æŒ‰ç…§å†…å®¹åˆ†ç±»æ•´ç†å‡ºæ¥çš„ã€‚ç›®çš„æ˜¯å°†åŽŸæœ¬æ•£ç¢Žçš„çŸ¥è¯†ç‚¹æ ¹æ®ä¸åŒéƒ¨åˆ†è§„æ•´åˆ°ä¸€èµ·ï¼Œå…¶ä¸­ä¹Ÿæ·±æ·±ä½“ä¼šåˆ°äº†åŽŸä½œè€…è‘—ä¹¦çš„ä¸å®œã€‚ ä¸Šä¸€ç¯‡è¯»ä¹¦ç¬”è®°å‘å¸ƒè‡³ä»Šå¤§æ¦‚ä¸€å‘¨ï¼Œæ¯å¤©éƒ½èƒ½çœ‹åˆ°é˜…è¯»é‡å’Œç‚¹èµžæ•°çš„æå‡ï¼Œè¿™æ—¶åˆ»æé†’æˆ‘è¦ç»§ç»­å†™å‡ºæ›´å¤šã€æ›´é«˜è´¨é‡çš„æ–‡ç« æ¥å’Œå¤§å®¶åˆ†äº«ï¼ŒåŒæ—¶ä¹Ÿè¡·å¿ƒæ„Ÿè°¢å…³æ³¨å’Œæ”¯æŒæˆ‘çš„ç®€å‹ï¼Œå¦‚æžœæ²¡æœ‰ä½ ä»¬æˆ‘çœŸä¸çŸ¥é“èƒ½ä¸èƒ½å®Œæˆæˆ‘åŽç»­çš„æ–‡ç« ã€‚ å…³äºŽ ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹çš„å†™ä½œæœ€è¿‘å¯èƒ½è¦æ”¾ç¼“äº†ï¼Œå› ä¸ºé©¬ä¸Šè¦å¼€å­¦äº†ï¼Œéœ€è¦æŠ•å…¥åˆ°å…¨æ–°çš„çŸ¥è¯†çš„å­¦ä¹ ä¸­åŽ»ï¼Œä½†æˆ‘ç­”åº”å¤§å®¶ä¸€å®šä¼šåœ¨ç©ºä½™æ—¶é—´å°½é‡å®Œæˆè¯¥ä¸“é¢˜çš„å†™ä½œã€‚è¿˜æœ‰æ˜¯ä¹‹å‰æ¬ å¤§å®¶çš„ ã€ŠJavaSE æˆé•¿ä¹‹è·¯ã€‹çš„éƒ¨åˆ†å†…å®¹æˆ‘ä¼šåœ¨è¿™å‡ å¤©ä¸­å°½åŠ›è¡¥å…¨ï¼Œä¹Ÿè¯·å¤§å®¶ç»§ç»­å…³æ³¨ã€‚ ä¹‹å‰å…³æ³¨äº†æˆ‘çš„ JavaSE æˆé•¿ä¹‹è·¯ ä¸“é¢˜çš„å°ä¼™ä¼´ï¼ŒæŽ¥ä¸‹æ¥çš„å‡ å¤©æˆ‘ä¹Ÿä¼šå°†æˆ‘ä¹‹å‰çš„ç¬”è®°æ•´ç†å‡ºæ¥é™†ç»­å‘å¸ƒåˆ°è¿™ä¸ªä¸“é¢˜ä¹‹ä¸­ï¼Œå¸Œæœ›èƒ½å’Œå¤§å®¶å¤šå¤šäº¤æµã€‚ å½©è›‹ ðŸ£ æœ€è¿‘åœ¨æ‹œè¯»åŒåä¸€ä¹¦ ã€Šæ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºã€‹å¹¶ä¼šä¸Žå¤§å®¶åˆ†äº«æˆ‘çš„è¯»ä¹¦ç¬”è®° æ·±å…¥ç†è§£ Java è™šæ‹Ÿæœºï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥ä¸€åŒäº¤æµè¿›æ­¥ã€‚ å¦‚æžœä½ è§‰å¾—æˆ‘çš„åˆ†äº«å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œè¯·åœ¨ä¸‹é¢ðŸ‘‡éšæ‰‹ç‚¹ä¸ªå–œæ¬¢ ðŸ’–ï¼Œä½ çš„è‚¯å®šæ‰æ˜¯æˆ‘æœ€å¤§çš„åŠ¨åŠ›ï¼Œæ„Ÿè°¢ã€‚]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Šæ·±å…¥ç†è§£javaè™šæ‹Ÿæœºã€‹å­¦ä¹ ç¬”è®°ä¹‹ä¸€]]></title>
    <url>%2F2018%2F03%2F05%2F2018-03-06%2F</url>
    <content type="text"><![CDATA[å…¨ä¹¦æ ¸å¿ƒåˆ†å¸ƒï¼š ç¬¬ä¸€ç«  èµ°è¿‘JAVA1.6 å®žæˆ˜ï¼šè‡ªå·±ç¼–è¯‘JDK(å·²æˆåŠŸç¼–è¯‘) ç–‘é—®ï¼š å°†JDKæºç è¿›è¡Œç¼–è¯‘æ˜¯åšäº†ç‚¹ä»€ä¹ˆï¼Ÿæ˜¯å°†JDKä¸­çš„.javaæ–‡ä»¶ç¼–è¯‘æˆ.classæ–‡ä»¶å—ï¼Ÿ JDKä¸­åŒ…å«å¼€å‘å·¥å…·åŒ…å’ŒJVMï¼Œä½œè€…ç¼–è¯‘å®ŒJDKä»¥åŽï¼Œç”¨çš„è¿˜æ˜¯åŽŸæ¥åŒ…ä¸­çš„JVMå—ï¼Ÿ æˆ‘ä»¬å¹³å¸¸ä½¿ç”¨çš„JDKï¼Œä¾‹å¦‚JDK1.7ä¸­ï¼Œé‡Œé¢çš„æ–‡ä»¶æ˜¯ä»¥.javaå½¢å¼å­˜åœ¨çš„è¿˜æ˜¯ä»¥.classå½¢å¼å­˜åœ¨çš„ï¼Œæˆ–è€…æ˜¯ä»¥.javaå½¢å¼å­˜åœ¨ï¼Œè¦ç”¨çš„æ—¶å€™å†ç”¨JVMåŽ»ç¼–è¯‘çš„?ç­”ï¼š JDKæ˜¯c/c++å†™çš„, ç¼–è¯‘å°±æ˜¯æŠŠJDKç¼–è¯‘æˆå¯ä»¥è¿è¡Œçš„çŠ¶æ€, å¯è¿è¡Œçš„æ„æ€æ˜¯æŒ‡å¯ä»¥ç¼–è¯‘è¿è¡Œ.javaæ–‡ä»¶. è€Œä¸€èˆ¬æƒ…å†µä¸‹å®˜æ–¹ä¸‹è½½çš„JDKéƒ½æ˜¯å·²ç»å¸®ä½ ç¼–è¯‘å¥½è€Œå·². ä½œè€…å¯ä»¥ç”¨è‡ªå·±ç¼–è¯‘çš„, ä¹Ÿå¯ä»¥ç”¨å®˜æ–¹ç¼–è¯‘å¥½çš„. è¿™ä¸ªè¦çœ‹ä¹¦ä¸­çš„è¯´æ˜Žäº† JDKæ˜¯c/c++å†™çš„, é‡Œé¢å’Œå…¶ä»–c++ç¨‹åºæ²¡ä»€ä¹ˆåŒºåˆ«, windowsä¸‹é¢æ˜¯ä¸€å †dllå’Œä¸€å †exe. ä½ è¯´çš„.javaæ–‡ä»¶æ˜¯JDKçš„åŠŸèƒ½ä¹‹ä¸€, å¸®ä½ ç¼–è¯‘javaæ–‡ä»¶æˆclass, JVMæ˜¯è¿è¡Œclassæ–‡ä»¶çš„å®¹å™¨ ä¸€ çŽ¯å¢ƒï¼š æ“ä½œç³»ç»Ÿï¼šCentOS6.8è®¡åˆ’ç¼–è¯‘çš„jdk: openjdk7çŽ°æˆçš„jdk: java version â€œ1.6.0_25â€(Java HotSpot(TM) 64-Bit Server VM (build 20.0-b11, mixed mode))jdk6ä¸‹è½½é“¾æŽ¥å¦‚æžœä½ å½“å‰çš„ç³»ç»Ÿç‰ˆæœ¬ä¸æ˜¯è¿™ä¸ªï¼Œæ²¡å…³ç³»ï¼Œåªè¦ä¸‹è½½ä¸Šè¿°ç‰ˆæœ¬å®‰è£…rpmï¼ˆé»˜è®¤å®‰è£…åˆ°/usr/javaè·¯å¾„ä¸‹ï¼‰(ä¸å¿…é…ç½®çŽ¯å¢ƒå˜é‡)å³å¯ äºŒ ç¼–è¯‘å‰å‡†å¤‡å·¥ä½œå¦‚ä¸‹123456yum install -y mercurialyum install -y ant ant-nodepsyum install -y libX11* libX*yum install -y libXi-devel libXtst-devel libXt-devel freetype* yum install -y alsa-lib-devel cups-develyum install -y gcc gcc-c++ ä¸‰ ä¸‹è½½è®¡åˆ’ç¼–è¯‘çš„openjdk7(jdkæºç ç½‘ç«™ï¼šhttp://hg.openjdk.java.net/jdk7u/ ï¼Œ ä½ å€¼å¾—æ”¶è—) 1234hg clone http://hg.openjdk.java.net/jdk7u/jdk7u-devcd jdk7u-devchmod 755 get_source.sh ./get_source.sh å›› ç¼–è¯‘4.1å‡†å¤‡å¥½ç¼–è¯‘çŽ¯å¢ƒç›¸å…³å‚æ•°è§£é‡Šå¦‚ä¸‹ï¼š 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354export LANG=C#Bootstrap JDKçš„å®‰è£…è·¯å¾„ï¼Œå¿…é¡»è®¾ç½®export ALT_BOOTDIR=/export/servers/jdk1.6.0_25/#å…è®¸è‡ªåŠ¨ä¸‹è½½ä¾èµ–export ALLOW_DOWNLOADS=true#å¹¶è¡Œç¼–è¯‘çš„çº¿æ•°ï¼Œè®¾ç½®å’Œcpuçš„æ•°é‡ä¸€è‡´å³å¯export HOTSPOT_BUILD_JOBS=2export ALT_PATALLER_COMPILE_JOBS=2#æ¯”è¾ƒæœ¬æ¬¡buildå‡ºæ¥çš„æ˜ åƒä¸Žå…ˆå‰ç‰ˆæœ¬çš„å·®å¼‚ï¼Œè¿™å¯¹æˆ‘ä»¬æ¥è¯´æ²¡æœ‰æ„ä¹‰ï¼Œexport SKIP_COMPARE_IMAGES=true#ä½¿ç”¨é¢„ç¼–è¯‘å¤´æ–‡ä»¶ï¼Œä¸åŠ è¿™ä¸ªç¼–è¯‘ä¼šæ›´æ…¢ä¸€äº›export USE_PRECOMPILED_HEADER=true#æŒ‡å®šè¦ç¼–è¯‘çš„å†…å®¹export BUILD_LANGTOOLS=trueexport BUILD_HOTSPOT=trueexport BUILD_JDK=trueexport BUILD_JAXP=falseexport BUILD_JAXWS=falseexport BUILD_CORBA=false#è¦ç¼–è¯‘çš„ç‰ˆæœ¬#export SKIP_DEBUG_BUILD=false#export SKIP_FASTDEBUG_BUILD=trueexport DEBUG_NAME=debug#å¯ä»¥é¿å¼€javawså’Œæµè§ˆå™¨Javaæ’ä»¶ä¹‹ç±»çš„éƒ¨åˆ†buildBUILD_DEPLOY=false#è®¾ç½®æˆfalseå°±ä¸ä¼šbuildå‡ºåŒ…è£…åŒ…ï¼Œå› ä¸ºåŒ…è£…åŒ…é‡Œæœ‰äº›å¥‡æ€ªçš„ä¾èµ–#ä½†æ˜¯å³ä½¿ä¸buildå‡ºå®ƒä¹Ÿå·²ç»èƒ½å¾—åˆ°å®Œæ•´çš„JDKæ˜ åƒï¼Œæ‰€ä»¥è¿˜æ˜¯åˆ«buildå®ƒå¥½äº†BUILD_INSTALL=false#ç¼–è¯‘ç»“æžœå­˜æ”¾çš„è·¯å¾„export ALT_OUTPUTDIR=/root/temp/jdk7u WARNINGS_ARE_ERRORS=#å¸è½½çŽ¯å¢ƒå˜é‡ï¼Œé¿å…è¯¡å¼‚çš„äº‹æƒ…å‘ç”Ÿunset JAVA_HOMEunset CLASSPATHunset JAVA_OPTS#make 2&gt;&amp;1 | tee $ALT_OUTPUTDIR/build.log å¥½äº†ï¼Œæˆ‘ä»¬å°†ä¸Šé¢ä¸€ç³»åˆ—çš„çŽ¯å¢ƒå˜é‡ï¼Œåˆ›å»ºçŽ¯å¢ƒæ–‡ä»¶VARæ¥ç»Ÿä¸€ç®¡ç†å§vi VAR 12345678910111213141516171819202122232425262728293031323334353637383940export LANG=Cexport ALT_BOOTDIR=/usr/java/jdk1.6.0_25export ALLOW_DOWNLOADS=trueexport HOTSPOT_BUILD_JOBS=2export ALT_PATALLER_COMPILE_JOBS=2export SKIP_COMPARE_IMAGES=trueexport USE_PRECOMPILED_HEADER=trueexport BUILD_LANGTOOLS=trueexport BUILD_HOTSPOT=trueexport BUILD_JDK=trueexport BUILD_JAXP=trueexport BUILD_JAXWS=trueexport BUILD_CORBA=true#export SKIP_DEBUG_BUILD=false#export SKIP_FASTDEBUG_BUILD=trueBUILD_DEPLOY=falseBUILD_INSTALL=falseexport ALT_OUTPUTDIR=/root/temp/jdk7u #export CORBA_DIST=$ALT_OUTPUTDIR/corba/dist#export JAXP_DIST=$ALT_OUTPUTDIR/jaxp/dist#export JAXWS_DIST=$ALT_OUTPUTDIR/jaxws/distunset JAVA_HOMEunset CLASSPATHunset JAVA_OPTS ä½¿ä¹‹ç”Ÿæ•ˆ. VAR 4.2æ£€æµ‹è®¾ç½®æ˜¯å¦å…¨éƒ¨æ­£ç¡®make sanityå½“çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºæ—¶åˆ™è¡¨ç¤ºæˆåŠŸ 123456789101112131415161718192021Build Machine Information: build machine = workstation.centos.vbirdBuild Directory Structure: CWD = /root/temp/jdk7u-dev TOPDIR = . LANGTOOLS_TOPDIR = ./langtools JAXP_TOPDIR = ./jaxp JAXWS_TOPDIR = ./jaxws CORBA_TOPDIR = ./corba HOTSPOT_TOPDIR = ./hotspot JDK_TOPDIR = ./jdk â€¦â€¦Sanity check passed. 4.3çœŸæ­£å¼€å§‹ç¼–è¯‘make (å‘½ä»¤ç­‰åŒäºŽmake all) æˆåŠŸçš„æ ‡å¿— 12345678910111213#-- Build times ----------Target all_product_buildStart 2018-03-06 21:03:26End 2018-03-06 21:20:0900:02:02 corba00:05:08 hotspot00:00:16 jaxp00:00:19 jaxws00:08:34 jdk00:00:23 langtools00:16:43 TOTAL-------------------------make[1]: Leaving directory `/home/cloudpai/Downloads/jdk7u-dev' 4.4æµ‹è¯•è‡ªå·±ç¼–è¯‘å‡ºæ¥çš„jdkå§æ­£ç¡®ç¼–è¯‘åŽï¼Œå¯ä»¥æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤éªŒè¯ 1234[cloudpai@hadoop000 bin]$ /home/cloudpai/app/jdk7u/j2sdk-image/bin/java -versionopenjdk version "1.7.0-internal"OpenJDK Runtime Environment (build 1.7.0-internal-cloudpai_2018_03_06_21_03-b00)OpenJDK 64-Bit Server VM (build 24.80-b07, mixed mode) OKï¼Œåˆ°äº›å°±å¤§åŠŸå‘Šæˆäº†ã€‚ äº” å¯èƒ½å‡ºçŽ°çš„é”™è¯¯/usr/bin/ld: cannot find -lX11 collect2: ld returned 1 exit statusè§£å†³åŠžæ³•yum install -y libX11* /bin/sh: line 0: cd: /NOT-SET/re/jdk/1.7.0/promoted/latest/binaries/linux-amd64: No such file or directory make[4]: *** [/root/temp/jdk7u/tmp/java/components_imported] Error 1è§£å†³åŠžæ³•VARæ–‡ä»¶ç¡®è®¤æ‰§è¡Œè¿‡äº†ï¼Œæ­£ç¡®çš„å§¿åŠ¿. VAR å‚è€ƒåšå®¢ï¼šhttp://blog.csdn.net/hl_java/article/details/76691321 ç”±1.6.4å¾—æˆ‘ä»¬å¾—åˆ°äº†è‡ªå·±çš„è™šæ‹Ÿæœº1.7.0-internal-cloudpai_2018_03_06_21_03-b00 çŽ°åœ¨æˆ‘ä»¬è¦å°†JVMè¿è¡Œèµ·æ¥ï¼š åœ¨å¤§å¤šæ•°æ—¶å€™ï¼Œå¦‚æžœæˆ‘ä»¬å¹¶ä¸å…³å¿ƒJDKä¸­HotSpotè™šæ‹Ÿæœºä»¥å¤–çš„å†…å®¹ï¼Œåªæƒ³å•ç‹¬ç¼–è¯‘ HotSpotè™šæ‹Ÿæœºçš„è¯ï¼ˆä¾‹å¦‚è°ƒè¯•è™šæ‹Ÿæœºæ—¶ï¼Œæ¯æ¬¡æ”¹åŠ¨ç¨‹åºéƒ½æ‰§è¡Œæ•´ä¸ªOpenJDKçš„Makefileï¼Œé€Ÿ åº¦è‚¯å®šå—ä¸äº†ï¼‰ï¼Œé‚£ä¹ˆä½¿ç”¨hotspot/makeç›®å½•ä¸‹çš„Makefileè¿›è¡Œæ›¿æ¢å³å¯ï¼Œå…¶ä»–å‚æ•°è®¾ç½®ä¸Žå‰ é¢æ˜¯ä¸€è‡´çš„ï¼Œè¿™æ—¶å€™è™šæ‹Ÿæœºçš„è¾“å‡ºç»“æžœå­˜æ”¾åœ¨build/hotspot/outputdir/bsd_amd64_compiler2ç›®å½•(åœ¨ä¸åŒæœºå™¨ä¸Šï¼Œæœ€åŽä¸€ä¸ªç›®å½•åç§°ä¼šæœ‰æ‰€å·®åˆ«ï¼Œbsdè¡¨ç¤ºMac OSç³»ç»Ÿï¼ˆå†…æ ¸ä¸º FreeBSDï¼‰ï¼Œamd64è¡¨ç¤ºæ˜¯64ä½JDKï¼ˆ32ä½æ˜¯x86ï¼‰ï¼Œcompiler2è¡¨ç¤ºæ˜¯Server VMï¼ˆClient VMè¡¨ ç¤ºæ˜¯compiler1ï¼‰ã€‚) ä¸­ï¼Œè¿›å…¥åŽå¯ä»¥è§åˆ°ä»¥ä¸‹å‡ ä¸ªç›®å½•ã€‚ åœ¨è·¯å¾„ï¼š/home/cloudpai/app/jdk7u/hotspot/outputdir/linux_amd64_compiler2 12345678910[cloudpai@hadoop000 linux_amd64_compiler2]$ lltotal 48drwxrwxr-x. 2 cloudpai cloudpai 4096 Mar 6 21:06 debugdrwxrwxr-x. 2 cloudpai cloudpai 4096 Mar 6 21:06 fastdebugdrwxrwxr-x. 7 cloudpai cloudpai 4096 Mar 6 21:06 generateddrwxrwxr-x. 2 cloudpai cloudpai 4096 Mar 6 21:06 jvmgdrwxrwxr-x. 2 cloudpai cloudpai 4096 Mar 6 21:06 optimizeddrwxrwxr-x. 3 cloudpai cloudpai 20480 Mar 6 21:11 productdrwxrwxr-x. 2 cloudpai cloudpai 4096 Mar 6 21:06 profiled-rw-rw-r--. 1 cloudpai cloudpai 1778 Mar 6 21:06 shared_dirs.lst è¿™äº›ç›®å½•å¯¹åº”äº†ä¸åŒçš„ä¼˜åŒ–çº§åˆ«ï¼Œä¼˜åŒ–çº§åˆ«è¶Šé«˜ï¼Œæ€§èƒ½è‡ªç„¶å°±è¶Šå¥½ï¼Œä½†æ˜¯è¾“å‡ºä»£ç ä¸Žæº ç çš„å·®è·å°±è¶Šå¤§ï¼Œéš¾äºŽè°ƒè¯•ï¼Œå…·ä½“å“ªä¸ªç›®å½•æœ‰å†…å®¹ï¼Œå–å†³äºŽmakeå‘½ä»¤åŽé¢çš„å‚æ•°ã€‚ åœ¨ç¼–è¯‘ç»“æŸä¹‹åŽã€è¿è¡Œè™šæ‹Ÿæœºä¹‹å‰ï¼Œè¿˜è¦æ‰‹å·¥ç¼–è¾‘ç›®å½•ä¸‹çš„env.shæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶ç”±ç¼– è¯‘è„šæœ¬è‡ªåŠ¨äº§ç”Ÿï¼Œç”¨äºŽè®¾ç½®è™šæ‹Ÿæœºçš„çŽ¯å¢ƒå˜é‡ï¼Œé‡Œé¢å·²ç»å‘å¸ƒäº†â€œJAVA_HOMEã€ CLASSPATHã€HOTSPOT_BUILD_USERâ€3ä¸ªçŽ¯å¢ƒå˜é‡ï¼Œ è¿˜è¦åœ¨åœ¨productä¸‹è¾¹ï¼ˆçœ‹ç½‘ä¸Šéƒ½æ˜¯åœ¨jvmgä¸‹è¾¹ï¼Œå¯æˆ‘çš„jvmgä¸‹è¾¹æ²¡æœ‰gammaï¼Œä¸çŸ¥é“ä»€ä¹ˆæƒ…å†µï¼‰çš„env.shä¸‹åŠ å…¥ï¼š 123456export JAVA_HOME=/usr/java/jdk1.6.0_25export PATH=$JAVA_HOME/bin:$PATHLD_LIBRARY_PATH=.:$&#123;JAVA_HOME&#125;/jre/lib/amd64/native_threads:$&#123;JAVA_HOME&#125;/jre/lib/amd64:export LD_LIBRARY_PATH ç„¶åŽæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¯åŠ¨è™šæ‹Ÿæœºï¼ˆè¿™æ—¶çš„å¯åŠ¨å™¨åä¸ºgammaï¼‰ï¼Œè¾“å‡ºç‰ˆæœ¬å·ã€‚ 12../env.sh ./gamma-version æœ€åŽè¿è¡Œè™šæ‹ŸæœºæˆåŠŸï¼ï¼ 12345[cloudpai@hadoop000 product]$ ./gamma -versionUsing java runtime at: /usr/java/jdk1.6.0_25/jrejava version &quot;1.6.0_25&quot;Java(TM) SE Runtime Environment (build 1.6.0_25-b06)OpenJDK 64-Bit Server VM (build 24.80-b07, mixed mode) 1.6.5 JVM åœ¨IDEå·¥å…·ä¸­è¿›è¡Œæºç è°ƒè¯•]]></content>
      <tags>
        <tag>JVM</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java1.8 å¸®åŠ©æ–‡æ¡£]]></title>
    <url>%2F2018%2F03%2F05%2F2018-03-05-1%2F</url>
    <content type="text"><![CDATA[java 1.6 å¸®åŠ©æ–‡æ¡£ä¸­æ–‡é“¾æŽ¥ï¼šhttp://download.csdn.net/detail/qw599186875/9608735è‹±æ–‡Java1.8 å¸®åŠ©æ–‡æ¡£è‹±æ–‡ä¸­æ–‡ â€“ è°·æ­Œç‰ˆåœ¨çº¿ç‰ˆ: https://blog.fondme.cn/apidoc/jdk-1.8-google/ä¸‹è½½é“¾æŽ¥ï¼šhttp://download.csdn.net/detail/qw599186875/9802192]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¤§åž‹ç½‘ç«™æž¶æž„æŠ€èƒ½å›¾è°±ï¼ˆJavaç‰ˆï¼‰]]></title>
    <url>%2F2018%2F03%2F05%2F2018-03-05%2F</url>
    <content type="text"><![CDATA[æ¯å¤©éƒ½è¦æœ‰è¿›æ­¥ï¼]]></content>
      <tags>
        <tag>java</tag>
        <tag>å›¾è°±</tag>
        <tag>web</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[workflowå·¥ä½œæµ]]></title>
    <url>%2F2018%2F03%2F04%2F2018-03-04%2F</url>
    <content type="text"><![CDATA[å·¥ä½œæµè„šæœ¬æµ‹è¯•ï¼šæµ‹è¯•æˆåŠŸ~æ™šå®‰~~]]></content>
      <tags>
        <tag>workflow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Scratchç¼–ç¨‹æŽ¢ç©¶]]></title>
    <url>%2F2018%2F03%2F02%2F2018-03-02%2F</url>
    <content type="text"><![CDATA[è½¬è½½è‡ªï¼šå„¿ç«¥ä½¿ç”¨Scratchç¼–ç¨‹æ—¶ï¼Œä¸Žç¨‹åºå‘˜åœ¨å·¥ä½œä¸­çš„ç¼–ç¨‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ - Milo Yipçš„å›žç­” - çŸ¥ä¹Žhttps://www.zhihu.com/question/42012520/answer/310430799]]></content>
      <tags>
        <tag>scratch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[2018æ‹œå¹´ç¥­å•å“]]></title>
    <url>%2F2018%2F03%2F01%2F2018-03-01-1%2F</url>
    <content type="text"><![CDATA[2018æ‹œå¹´ç¥­å•å“ä¼ é€é—¨ï¼š 1.ã€é€†æµªåƒç§‹ã€‘av20204904 2.ã€å¦‚æžœæˆ‘çš„ä¸€ç”Ÿåªéœ€è¦åšä¸€ä»¶äº‹ â€” Bilibili Zeitgeist 2017ã€‘av20203478 3.ã€æ¢¦æƒ³å°å‰§åœº-é—å¤±çš„å®ç‰©ã€‘av20203610 4.ã€å£è¢‹ç«žæŠ€åœºãƒ¼å†°ä¸Žé“ä¹‹æ­Œã€‘av20203938 5.ã€ç›¸é‡day by dayã€‘av20203945 6.ã€ä¸Šæµ·ä¸€å¤œã€‘av20204014 7.ã€ç¥žé¬¼æ‹æ›²ã€‘av20204051 8.ã€UPä¸»çš„å¥‡å¦™å†’é™©ä¹‹å‹‡è€…ä¼ è¯´ã€‘av20204517 9.ã€æˆ‘çš„ç ´çƒ‚ä¹‹æŽ€èµ·æ³¢æ¾œã€‘av20204332 10.ã€paletteã€‘av20204403 11.ã€å¹¿å‘Šé«˜æ‰‹ã€‘av20204701 12.ã€æ»‘ç¨½å›å¤§å†’é™©ã€‘av20204534 13.ã€journeyã€‘av20204614 14.ã€å…¨é æˆ‘å‹¤åŠ³çš„æ‰‹ã€‘av20204705 15.ã€æ¼”å¥åŒºçš„å·å¿ƒè®¡åˆ’ã€‘av20204824 16.ã€ä¹’ä¹“å¸å›½ã€‘av20205319 17.ã€é¬¼ç•œå¤§æˆ˜ä¹‹çœŸç›¸é»Žæ˜Žã€‘av20205316 18.ã€å¦‚ä½•ç¿»æ‹ä¸€ä¸ªCGçŸ­ç‰‡ã€‘av20205314 19.ã€å¦å…‹å¤§æˆ˜ã€‘av20205375 20.ã€æ˜Ÿç©ºèŠ±ç«ã€‘av20203411 å½©è›‹ã€ä¸¾å¤´ä¸‰å°ºæœ‰ç¥žæ˜Žã€‘av16201808]]></content>
      <tags>
        <tag>bilibili</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[blogs ä¸Šçš„æ ‡ç­¾tagå‚æ•°]]></title>
    <url>%2F2018%2F03%2F01%2F2018-03-01%2F</url>
    <content type="text"><![CDATA[12345678910---title: Macç»ˆç«¯ç¿»å¢™tags: Linux&amp;Unixcategories: Linux&amp;Unixcomments: trueabbrlink: 745a6d7date: 2016-11-24 18:26:33updated: 2016-11-24 18:26:33copyright: true---]]></content>
      <tags>
        <tag>mac</tag>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[éœ€è¦è¿›è¡Œçš„æ”¹è¿›]]></title>
    <url>%2F2018%2F03%2F01%2F%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8C%E7%9A%84%E6%94%B9%E8%BF%9B%2F</url>
    <content type="text"><![CDATA[TODOï¼š æµ‹è¯•gitçš„å¤‡ä»½åŠŸèƒ½ å­¦ä¹  Alfred workflowå®žçŽ°æ‰“å¼€é‡å¯ä»»æ„åº”ç”¨ è„šæœ¬å®žçŽ°æ¸…ç†æµè§ˆå™¨ç¼“å­˜]]></content>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[macä½¿ç”¨]]></title>
    <url>%2F2018%2F02%2F28%2F2018-02-28%2F</url>
    <content type="text"><![CDATA[Macç³»ç»Ÿå¦‚ä½•æ˜¾ç¤ºéšè—æ–‡ä»¶ï¼Ÿä»¥â€.â€å¼€å¤´çš„éšè—æ–‡ä»¶å¦‚ä½•åœ¨MACç³»ç»Ÿä¸‹æ˜¾ç¤ºï¼Ÿ ç­”ï¼šCommand+Shift+. å¯ä»¥æ˜¾ç¤ºéšè—æ–‡ä»¶ã€æ–‡ä»¶å¤¹ï¼Œå†æŒ‰ä¸€æ¬¡ï¼Œæ¢å¤éšè—ï¼›finderä¸‹ä½¿ç”¨Command+Shift+G å¯ä»¥å‰å¾€ä»»ä½•æ–‡ä»¶å¤¹ï¼ŒåŒ…æ‹¬éšè—æ–‡ä»¶å¤¹ã€‚ æ˜¾ç¤º éšè—æ–‡ä»¶ 1234567#æ˜¾ç¤ºå…¨éƒ¨æ–‡ä»¶defaults write com.apple.finder AppleShowAllFiles -bool trueosascript -e 'tell application "Finder" to quit'#ä¸æ˜¾ç¤ºå…¨éƒ¨æ–‡ä»¶defaults write com.apple.finder AppleShowAllFiles -bool falseosascript -e 'tell application "Finder" to quit']]></content>
      <tags>
        <tag>mac</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[gitæ“ä½œ]]></title>
    <url>%2F2018%2F02%2F28%2F2018-02-28-1%2F</url>
    <content type="text"><![CDATA[åˆ›å»ºçš„ä»“åº“ï¼šé»˜è®¤masterå…‹éš†çš„ä»“åº“ï¼šé»˜è®¤originï¼ˆæºï¼‰ git add å¼€å§‹è·Ÿè¸ªä¸€ä¸ªæ–°æ–‡ä»¶git statusæ˜¾ç¤ºgitçŠ¶æ€ git commitæäº¤æ›´æ–° git diffï¼šæ¯”è¾ƒå·¥ä½œåŒºå’Œç¼“å­˜åŒºçš„ä¸åŒã€‚git diff --cachedï¼šæ¯”è¾ƒç¼“å­˜åŒºå’Œä»“åº“çš„ä¸åŒã€‚ git pull å‘½ä»¤è‡ªåŠ¨æŠ“å–æ•°æ®ä¸‹æ¥ï¼Œç„¶åŽå°†è¿œç«¯åˆ†æ”¯è‡ªåŠ¨åˆå¹¶åˆ°æœ¬åœ°ä»“åº“ä¸­å½“å‰åˆ†æ”¯ git push [remote-name] [branch-name] å¦‚æžœè¦æŠŠæœ¬åœ°çš„ master åˆ†æ”¯æŽ¨é€åˆ° origin æœåŠ¡å™¨ä¸Šï¼ˆå†æ¬¡è¯´æ˜Žä¸‹ï¼Œå…‹éš†æ“ä½œä¼šè‡ªåŠ¨ä½¿ç”¨é»˜è®¤çš„ master å’Œ origin åå­—ï¼‰ï¼Œå¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼šgit push origin master git logæ˜¾ç¤ºä»Žæœ€è¿‘åˆ°æœ€è¿œçš„æäº¤æ—¥å¿—ã€‚åŒ…å«æ¯ä¸ªæäº¤çš„SHA1æ ¡éªŒå’Œã€ä½œè€…çš„åå­—å’Œé‚®ç®±ã€æäº¤æ—¶é—´ä»¥åŠæäº¤è¯´æ˜Žç­‰ã€‚gitkä½¿ç”¨å›¾å½¢åŒ–å·¥å…·æŸ¥é˜…æäº¤åŽ†å² git commit --amendä¿®æ”¹æœ€åŽä¸€æ¬¡æäº¤ git reset HEAD &lt;file&gt;...å–æ¶ˆå·²ç»æš‚å­˜çš„æ–‡ä»¶ Git åˆ†æ”¯git branchåˆ›å»ºä¸€ä¸ªæ–°çš„åˆ†æ”¯ git commit -a -m &#39;made other changes&#39; æäº¤åˆ†æ”¯git mergetoolè°ƒç”¨ä¸€ä¸ªå¯è§†åŒ–çš„åˆå¹¶å·¥å…·å¹¶å¼•å¯¼ä½ è§£å†³æ‰€æœ‰å†²çª gitå­¦ä¹ é“¾æŽ¥]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[blogé€šè¿‡gitå¤‡ä»½ä¸Žæ¢å¤çš„æœ€ä¼˜æ“ä½œ]]></title>
    <url>%2F2018%2F02%2F28%2Fblog%E9%80%9A%E8%BF%87git%E5%A4%87%E4%BB%BD%E4%B8%8E%E6%81%A2%E5%A4%8D%E7%9A%84%E6%9C%80%E4%BC%98%E6%93%8D%E4%BD%9C%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ï¼šHexoç”Ÿæˆçš„æ–‡ä»¶é‡Œé¢æ˜¯æœ‰ä¸€ä¸ª.gitignoreçš„ï¼Œæ‰€ä»¥å®ƒçš„æœ¬æ„åº”è¯¥ä¹Ÿæ˜¯æƒ³æˆ‘ä»¬æŠŠè¿™äº›æ–‡ä»¶æ”¾åˆ°GitHubä¸Šå­˜æ”¾çš„ã€‚è¿™ä¸ªæ—¶å€™å°±å¯ä»¥ç”¨åˆ†æ”¯çš„æ€è·¯ï¼ä¸€ä¸ªåˆ†æ”¯ç”¨æ¥å­˜æ”¾Hexoç”Ÿæˆçš„ç½‘ç«™åŽŸå§‹çš„æ–‡ä»¶ï¼Œå¦ä¸€ä¸ªåˆ†æ”¯ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„é™æ€ç½‘é¡µã€‚ç‰¹åˆ«ç®€æ´ã€‚ å…³äºŽæ­å»ºçš„æµç¨‹ åˆ›å»ºä»“åº“ï¼Œhttp://CrazyMilk.github.ioï¼› åˆ›å»ºä¸¤ä¸ªåˆ†æ”¯ï¼šmaster ä¸Ž hexoï¼› è®¾ç½®hexoä¸ºé»˜è®¤åˆ†æ”¯ï¼ˆå› ä¸ºæˆ‘ä»¬åªéœ€è¦æ‰‹åŠ¨ç®¡ç†è¿™ä¸ªåˆ†æ”¯ä¸Šçš„Hexoç½‘ç«™æ–‡ä»¶ï¼‰ï¼› ä½¿ç”¨git clone git@github.com:CrazyMilk/CrazyMilk.github.io.gitæ‹·è´ä»“åº“ï¼› åœ¨æœ¬åœ°http://CrazyMilk.github.io ä»“åº“æ–°å»ºä¸€ä¸ªæ–‡ä»¶åŽï¼Œè¿›å…¥æ–‡ä»¶ä¸­ã€‚åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹é€šè¿‡Git bashä¾æ¬¡æ‰§è¡Œnpm install hexoã€hexo initã€npm install å’Œ npm install hexo-deployer-gitï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”æ˜¾ç¤ºä¸ºhexoï¼‰; ä¿®æ”¹_config.ymlä¸­çš„deployå‚æ•°ï¼Œåˆ†æ”¯åº”ä¸ºmasterï¼› ä¾æ¬¡æ‰§è¡Œgit add .ã€git commit -m â€œâ€¦â€ã€git push origin hexoæäº¤ç½‘ç«™ç›¸å…³çš„æ–‡ä»¶ï¼› æ‰§è¡Œhexo g -dç”Ÿæˆç½‘ç«™å¹¶éƒ¨ç½²åˆ°GitHubä¸Šã€‚è¿™æ ·ä¸€æ¥ï¼Œåœ¨GitHubä¸Šçš„http://CrazyMilk.github.ioä»“åº“å°±æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼Œä¸€ä¸ªhexoåˆ†æ”¯ç”¨æ¥å­˜æ”¾ç½‘ç«™çš„åŽŸå§‹æ–‡ä»¶ï¼Œä¸€ä¸ªmasteråˆ†æ”¯ç”¨æ¥å­˜æ”¾ç”Ÿæˆçš„é™æ€ç½‘é¡µã€‚ å…³äºŽæ—¥å¸¸çš„æ”¹åŠ¨æµç¨‹ åœ¨æœ¬åœ°å¯¹åšå®¢è¿›è¡Œä¿®æ”¹ï¼ˆæ·»åŠ æ–°åšæ–‡ã€ä¿®æ”¹æ ·å¼ç­‰ç­‰ï¼‰åŽï¼Œé€šè¿‡ä¸‹é¢çš„æµç¨‹è¿›è¡Œç®¡ç†ã€‚ ä¾æ¬¡æ‰§è¡Œgit add .ã€git commit -m â€œâ€¦â€ã€git push origin hexoæŒ‡ä»¤å°†æ”¹åŠ¨æŽ¨é€åˆ°GitHubï¼ˆæ­¤æ—¶å½“å‰åˆ†æ”¯åº”ä¸ºhexoï¼‰ï¼› ç„¶åŽæ‰æ‰§è¡Œhexo g -då‘å¸ƒç½‘ç«™åˆ°masteråˆ†æ”¯ä¸Šã€‚è™½ç„¶ä¸¤ä¸ªè¿‡ç¨‹é¡ºåºè°ƒè½¬ä¸€èˆ¬ä¸ä¼šæœ‰é—®é¢˜ï¼Œä¸è¿‡é€»è¾‘ä¸Šè¿™æ ·çš„é¡ºåºæ˜¯ç»å¯¹æ²¡é—®é¢˜çš„ï¼ˆä¾‹å¦‚çªç„¶æ­»æœºè¦é‡è£…äº†ï¼Œæ‚²å‚¬â€¦.çš„æƒ…å†µï¼Œè°ƒè½¬é¡ºåºå°±æœ‰é—®é¢˜äº†ï¼‰ã€‚ æœ¬åœ°èµ„æ–™ä¸¢å¤±åŽçš„æµç¨‹å½“é‡è£…ç”µè„‘ä¹‹åŽï¼Œæˆ–è€…æƒ³åœ¨å…¶ä»–ç”µè„‘ä¸Šä¿®æ”¹åšå®¢ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹åˆ—æ­¥éª¤ï¼š ä½¿ç”¨git clone git@github.com:CrazyMilk/CrazyMilk.github.io.gitæ‹·è´ä»“åº“ï¼ˆé»˜è®¤åˆ†æ”¯ä¸ºhexoï¼‰ï¼› åœ¨æœ¬åœ°æ–°æ‹·è´çš„http://CrazyMilk.github.ioæ–‡ä»¶å¤¹ä¸‹é€šè¿‡Git bashä¾æ¬¡æ‰§è¡Œä¸‹åˆ—æŒ‡ä»¤ï¼šnpm install hexoã€npm installã€npm install hexo-deployer-gitï¼ˆè®°å¾—ï¼Œä¸éœ€è¦hexo initè¿™æ¡æŒ‡ä»¤ï¼‰ã€‚ å…¶å®žåªè¦æŠŠhexoå’Œéœ€è¦æ¯ä¸ªæ’ä»¶éƒ½å†™å…¥åˆ°package.jsonä¸­ï¼ˆå¹³å¸¸å®‰è£…æ—¶åŠ â€“saveå‚æ•°ä¼šè‡ªåŠ¨å†™å…¥ï¼‰ï¼Œé‚£ä¹ˆgit cloneä¸‹æ¥ä¹‹åŽï¼Œåªè¦ä¸€å¥npm installå°±èƒ½è£…å¥½hexoå’Œæ‰€æœ‰çš„ä¾èµ–ï¼Œå¼€ç®±å³ç”¨ ^_^ è¿ç§»æºç åº“ä¸€å¼€å§‹ç”¨äº†è¯¥æ–¹æ³•ï¼ŒåŽæ¥æ„è¯†åˆ°å¤‡ä»½åˆ°githubåˆ†æ”¯çš„åšå®¢æºç ä¹Ÿæ˜¯publicçš„ï¼ŒåŽæ¥æ”¹ä¸ºå¤‡ä»½åˆ°å¼€æºä¸­å›½gitç§æœ‰åº“äº† å‚è€ƒ1ï¼šGitHub Pages + Hexoæ­å»ºåšå®¢å‚è€ƒ2ï¼šä½¿ç”¨hexoï¼Œå¦‚æžœæ¢äº†ç”µè„‘æ€Žä¹ˆæ›´æ–°åšå®¢ï¼Ÿ - CrazyMilkçš„å›žç­” - çŸ¥ä¹Ž]]></content>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢æ ·å¼æ”¹è¿›æ‚è®°]]></title>
    <url>%2F2018%2F02%2F27%2F%E5%8D%9A%E5%AE%A2%E6%A0%B7%E5%BC%8F%E6%94%B9%E8%BF%9B%E6%9D%82%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[è¯„è®ºåŒºæ ·å¼ä¿®æ”¹ï¼šæ–‡ä»¶ä½ç½®ï¼šthemes/next/source/css/_common/components/comments.styl ä¿®æ”¹å†…å®¹ï¼š 1234.comments &#123; background white; opacity:0.8;&#125; ç§»åŠ¨ç«¯ä¸åŠ è½½èƒŒæ™¯å›¾ä¸€ç‚¹ä¼˜åŒ–ï¼Œç§»åŠ¨ç«¯ä¸åŠ è½½èƒŒæ™¯å›¾ã€‚åœ¨_layout.swigåº•éƒ¨L2Dwidget.init({"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/z16.model.json"},"display":{"superSample":2,"width":150,"height":300,"position":"right","hOffset":-80,"vOffset":-50},"mobile":{"show":false,"scale":0.2},"react":{"opacityDefault":1,"opacityOnHover":0.2}});æ ‡ç­¾å‰ï¼ŒåŠ ä¸Šç§»åŠ¨ç«¯æµè§ˆå™¨å†…æ ¸åˆ¤æ–­è¯­å¥ï¼Œå½“ä¸ºPCç«¯æµè§ˆå™¨æ—¶ï¼ŒåŠ è½½èƒŒæ™¯js 123456789101112131415161718192021222324252627&lt;!--ç§»åŠ¨ç«¯åˆ¤æ–­ï¼Œæ˜¯å¦å¼•å…¥èƒŒæ™¯--&gt;&lt;script&gt;var browser=&#123; versions:function()&#123; var u = navigator.userAgent, app = navigator.appVersion; return &#123;//ç§»åŠ¨ç»ˆç«¯æµè§ˆå™¨ç‰ˆæœ¬ä¿¡æ¯ trident: u.indexOf('Trident') &gt; -1, //IEå†…æ ¸ presto: u.indexOf('Presto') &gt; -1, //operaå†…æ ¸ webKit: u.indexOf('AppleWebKit') &gt; -1, //è‹¹æžœã€è°·æ­Œå†…æ ¸ gecko: u.indexOf('Gecko') &gt; -1 &amp;&amp; u.indexOf('KHTML') == -1, //ç«ç‹å†…æ ¸ mobile: !!u.match(/AppleWebKit.*Mobile.*/), //æ˜¯å¦ä¸ºç§»åŠ¨ç»ˆç«¯ ios: !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/), //iosç»ˆç«¯ android: u.indexOf('Android') &gt; -1 || u.indexOf('Linux') &gt; -1, //androidç»ˆç«¯æˆ–è€…ucæµè§ˆå™¨ iPhone: u.indexOf('iPhone') &gt; -1 , //æ˜¯å¦ä¸ºiPhoneæˆ–è€…QQHDæµè§ˆå™¨ iPad: u.indexOf('iPad') &gt; -1, //æ˜¯å¦iPad webApp: u.indexOf('Safari') == -1 //æ˜¯å¦webåº”è¯¥ç¨‹åºï¼Œæ²¡æœ‰å¤´éƒ¨ä¸Žåº•éƒ¨ &#125;; &#125;(), language:(navigator.browserLanguage || navigator.language).toLowerCase() &#125; if(browser.versions.mobile || browser.versions.ios || browser.versions.android || browser.versions.iPhone || browser.versions.iPad)&#123; &#125;else&#123; document.write("&lt;script type=\'text/javascript\' src=\'/js/src/particle.js\'&gt;&lt;\/script&gt;"); &#125;&lt;/script&gt;]]></content>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ðŸŽµè®°å½•ç‚¹æ»´ç”Ÿæ´»]]></title>
    <url>%2F2018%2F02%2F24%2F%F0%9F%8E%B5%E8%AE%B0%E5%BD%95%E7%82%B9%E6%BB%B4%E7%94%9F%E6%B4%BB%2F</url>
    <content type="text"><![CDATA[è®°å½•ç‚¹æ»´ç”Ÿæ´»ã€ŠBINGBIANç—…å˜ã€‹æ­Œæ›²ä¸é”™ï¼Œæ›²è°ƒæœ‰äº›å¿§ä¼¤ [00:00.21]ç½—ä¹‹è±ª - BINGBIANç—…å˜ [00:01.87]è¯ï¼šCubi/Fi9 [00:02.76]æ›²ï¼šJurrivh [00:03.72]æ··éŸ³ï¼šFi9 [00:19.36][02:01.33][03:09.30]æœ‰å¤©æˆ‘ç¡é†’çœ‹åˆ°æˆ‘çš„èº«è¾¹æ²¡æœ‰ä½  [00:23.52][02:05.53][03:13.50]åœ¨æˆ‘çš„å³è¾¹æ˜¯ä½ æ›¾ç»å–œæ¬¢çš„çŽ©å…· [00:27.75][02:09.76][03:17.66]å¯å½“æˆ‘ç«™èµ·èº«æ¥åœ¨æˆ¿é—´é‡Œå¯»æ‰¾ä½  [00:32.04][02:14.00][03:21.93]ç•™ä¸‹çš„åªæœ‰å¸¦ç€ä½ å‘³é“çš„ä¸€å°ä¿¡ [00:36.50][02:18.48][03:26.35]å°±åœ¨æ˜¨å¤©è¿˜ä¸€èµ·çœ‹æˆ‘ä»¬çš„ç…§ç‰‡ [00:40.47][02:22.48][03:30.46]å¯çŽ°åœ¨è®©æˆ‘æ„Ÿè§‰åƒçƒ‚å‰§é‡Œçš„ä¸»æ¼” [00:44.74][02:26.71][03:34.69]ä¸ºä»€ä¹ˆè¿™ç§äº‹æƒ…ä¼šå‘ç”Ÿåœ¨æˆ‘èº«è¾¹ [00:48.97][02:31.00][03:38.92]æ˜¯ä¸æ˜¯è€å¤©æ²¡èƒ½çœ‹åˆ°å¯¹ä½ çš„ç–¯ç™« [00:54.46]è¿˜æƒ³ç€ åˆ›é€ ä½ çš„å®‡å®™ [00:56.53]ä½†çŽ°åœ¨ å·²ç»è¢«æˆ‘æ¸…ç©º [00:58.57]ä½ è®©æˆ‘ æ•´ä¸ªäººéƒ½å†°å†» [01:00.68]è¿˜æ€Žä¹ˆ å†æ¬¡ä¸ºä½ å¿ƒåŠ¨ [01:02.88]Wake me ä¸æ˜¯ä½ çš„æ„æ„¿ [01:04.97]ç¦»å¼€æˆ‘ å¼€å§‹æ–°çš„èµ·ç‚¹ [01:07.12]å¯èƒ½æˆ‘ è¿˜ä¼šå¯¹ä½ è´ªæ‹ [01:09.30]è°è®©ä½  æ›¾ç»è®©æˆ‘ç–¯ç™« [01:11.18]ç–¯ç™« é‚£ä¹Ÿæ˜¯è¿‡åŽ»çš„ç”»é¢ [01:14.54]çœ‹å¾€åŽçš„å‡ å¤© [01:16.72]æˆ‘çŒœä½ ä¹Ÿä¸ä¼šå‡ºçŽ° [01:18.78]æˆ‘å›žæƒ³è¿™å‡ å¹´ [01:20.93]å°±åƒæ˜¯è¦å‘½çš„ç—…å˜ [01:23.16]ä½ å¯èƒ½å¬ä¸è§ [01:25.16]æ¥è‡ªæˆ‘å¯¹ä½ çš„æŒ‚å¿µ [01:27.53]å¯èƒ½æœ‰ç‚¹ç´¯ [01:28.85]è§‰å¾—å¯¹ä¸å¯¹è¿™æ˜¯ç¬¬å‡ æ¬¡åœ¨ä¸ºä½ å®¿é†‰ [01:31.98]æ²¡äº†æˆ‘è‚©è†€ [01:33.08]ä½ åœ¨è°èº«æ—ä¹°çš„ç¤¼ç‰©å˜æˆäº†ç° [01:35.99]æ›¾ç»æˆ‘å¤šæƒ³ [01:37.25]æŠŠä½ å˜æ¼‚äº®çœ‹ç€åˆ«äººç¾¡æ…•ä½ çš„æ¨¡æ · [01:40.50]æ²¡å…³ç³»æœ‰å°ç†Šé™ªç€ä½ çœ‹æœˆäº® [01:44.40]æˆ‘å·²ç»çœ‹åˆ°è·Ÿä½ æ–­ç”µçš„è¿‡ç¨‹ [01:46.96]ä½†æˆ‘å‡è£…çœ‹ä¸è§ [01:48.76]æ˜¯ä¸æ˜¯è¦æˆ‘å˜å¾—åƒä¸ªåŽ‰é¬¼ [01:50.96]æ‰èƒ½è¿›å…¥ä½ çš„ä¸–ç•Œ [01:52.95]ä¸ºä»€ä¹ˆä¸è¯´å†è§ [01:54.31]æˆ‘çŒœä½ åº”è¯¥æ˜¯ä¸å°å¿ƒçš„å¿˜è®° [01:57.04]éƒ½æ— æ‰€è°“ä¹Ÿæœ‰ç‚¹ç´¯ [01:59.09]ä¹Ÿå¯ä»¥å¼€å§‹æ–°çš„è®°å¿† [02:35.19]æˆ‘ä¸èƒ½å¤Ÿåœæ­¢å•Š [02:37.43]è¿™äº›å¹´æˆ‘å¯¹ä½ çš„ç–¯ç™« [02:39.49]æˆ´ä¸Šé‚£æ¡å›´å·¾å§ [02:41.59]åœ¨æ¯ä¸ªå¯’é£Žåˆºéª¨çš„å†¬å¤© [02:43.92]æ¯æ¬¡é€ä½ å›žå®¶ä½ æŠ±ç€æˆ‘ [02:45.63]ä¸ç»æ„é—´åˆè§¦ç¢°åˆ°ä½ çš„æ‰‹ [02:48.10]ä½ ç©¿è£™å­çœ¨çœ¼ç› æœ›ç€æˆ‘ [02:50.52]è®©æˆ‘æ¯æ¬¡å¿ƒåŠ¨çš„çž¬é—´ [02:52.49]é‚£æ¡åå­—è·¯å£ [02:54.39]å§‹ç»ˆæœ‰ä½ èº«ä¸Šçš„æ°”å‘³ [02:57.00]è½¦æ°´é©¬é¾™è¿‡åŽçš„è·¯ç¯ä¸‹çš„èº«å½± [03:00.10]åˆä¼šæ˜¯è° [03:00.83]ä»–æƒ³è¯´æˆ‘çœŸçš„ [03:02.01]å–œæ¬¢ä½ ä½†æ˜¯æ¯æ¬¡æ¬²è¨€åˆé—­å˜´ [03:05.57]é‚£æ—¶è’å”çš„ç”·å­© [03:07.64]åˆæµ‘æµŠäº†å‡ å² var ap = new APlayer({ element: document.getElementById("aplayer0"), narrow: false, autoplay: false, showlrc: 2, music: { title: "BINGBIANç—…å˜", author: "Cubi / Fi9æ±Ÿæ¾ˆ", url: "http://p4lmrb1gp.bkt.clouddn.com/Cubi,Aydo$,BRGang%20-%20BINGBIAN%E7%97%85%E5%8F%98.mp3", pic: "http://p4lmrb1gp.bkt.clouddn.com/BINGBIAN%E7%97%85%E5%8F%98.jpg", } }); window.aplayers || (window.aplayers = []); window.aplayers.push(ap);]]></content>
      <tags>
        <tag>æ‚è®°</tag>
        <tag>éŸ³ä¹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æˆ‘çš„blogè‡ªåŠ¨å‘å¸ƒè„šæœ¬]]></title>
    <url>%2F2018%2F02%2F23%2Fmac%E6%89%A7%E8%A1%8Cshell%E8%84%9A%E6%9C%AC%E9%81%87%E5%88%B0%E7%9A%84%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86%2F</url>
    <content type="text"><![CDATA[é‡åˆ°çš„å‘ï¼š -bash: ./install.sh: /bin/bash: bad interpreter: Operation not permittedå‡ºçŽ°è¿™ä¸ªé—®é¢˜çš„ä¸»è¦åŽŸå› æ˜¯ï¼š-rwxrwxrwx@ æ–‡ä»¶çš„å±žæ€§æœ€åŽå¸¦ä¸ª@ï¼Œè¿™ä¸ª@ä»£è¡¨çš„æ˜¯æ›´å¤šçš„ä¸€äº›å±žæ€§ï¼Œå…·ä½“å«ä¹‰ä¸å¤ªæ¸…æ¥šï¼Œä½†æœ‰å®ƒå°±æ˜¯æ‰§è¡Œä¸äº†è§£å†³ï¼šå¯ä»¥ç”¨è¿™ä¸ªå‘½ä»¤æ¥åŽ»é™¤è¿™ä¸ªå±žæ€§ï¼šxattr -d com.apple.quarantine ./*åŽæ¥è¿›å…¥ç›®å½•å‘çŽ°ç›®å½•ä¸‹é¢çš„æ–‡ä»¶è¿˜æ˜¯å¸¦æœ‰@å±žæ€§ï¼Œæˆ‘ä»¬åˆ°æ ¹ç›®å½•åŠ ä¸€ä¸ª-rå°±å¥½äº†ï¼šxattr -d -r com.apple.quarantine ./* æˆ‘çš„blogè‡ªåŠ¨å‘å¸ƒè„šæœ¬:blog_publish.sh 123456789#!/bin/bashsay "blogs updating"cd /Users/pailiu/Library/Mobile\ Documents/iCloud~com~coderforart~iOS~MWeb/Documents/mweb_documents_library/Bloghexo clean &amp;&amp; hexo g &amp;&amp; hexo dsay "blogs published"rm -rf /Users/pailiu/Library/Caches/Google/Chrome/Profile\ 1/*open -a "/Applications/Google Chrome.app" 'http://cloudpai.site/'# hexo server]]></content>
      <tags>
        <tag>shell</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[åšå®¢æ’å…¥éŸ³é¢‘ã€è§†é¢‘]]></title>
    <url>%2F2018%2F02%2F22%2F%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2%E8%BF%87%E7%A8%8B%E6%9D%82%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[ä¸ºäº†é¿å…åŽæœŸå¤–é“¾å¤±æ•ˆï¼Œå¯ä»¥å°†è§†é¢‘ã€éŸ³é¢‘å›¾ç‰‡ç­‰èµ„æºä¼ è‡³ä¸ƒç‰›äº‘ç­‰cdnæœåŠ¡å™¨ä¸Šï¼Œä»Žä¸­èŽ·å–å¤–é“¾ã€‚ å¸¸ç”¨æŽ’ç‰ˆï¼šå±…ä¸­ï¼š 1&lt;center&gt; &lt;/center&gt; æ’å…¥å›¾ç‰‡ï¼šæœ‰å°ºå¯¸è¦æ±‚æ—¶ï¼š 1&lt;img src="http://p4lmrb1gp.bkt.clouddn.com/15194033640468.jpg" width="80%" height="80%"&gt; æ— å°ºå¯¸è¦æ±‚æ—¶å¿«é€Ÿæ’å…¥ï¼ˆmdæ ¼å¼ï¼‰ï¼š 1![](http://p4lmrb1gp.bkt.clouddn.com/15194033640468.jpg) æ’å…¥éŸ³ä¹ç½‘æ˜“äº‘éŸ³ä¹å¤–é“¾èŽ·å–ï¼šè§å®˜ç½‘ä¿®æ”¹åšå®¢éŸ³ä¹æ’­æ”¾å™¨æ­Œæ›²è·¯å¾„ï¼š/Blog/themes/hexo-theme-next-master/layout/_macro/sidebar.swig qqéŸ³ä¹å¤–é“¾èŽ·å–ï¼š http://www.qqmusic.cc/æ’å…¥éŸ³é¢‘æ’­æ”¾å™¨ä»£ç ï¼š 1&lt;audio src="http://mp3.qqmusic.cc/yq/211758246.mp3" controls="controls"&gt;&lt;/audio&gt; hexo-tag-aplayerï¼šåšå®¢ä¸­æ’å…¥è‡ªå®šä¹‰éŸ³ä¹ å®‰è£…æˆåŠŸåŽï¼Œåœ¨ Markdown æ–‡æ¡£ä¸­æ·»åŠ æ¯”å¦‚æ·»åŠ å¦‚ä¸‹ä»£ç ä½¿ç”¨hexo-tag-aplayer å‚æ•°12345678title ï¼šéŸ³ä¹æ ‡é¢˜authorï¼šéŸ³ä¹ä½œè€…urlï¼šéŸ³ä¹æ–‡ä»¶ç½‘å€picture_urlï¼šå¯é€‰ï¼ŒéŸ³ä¹å›¾ç‰‡ç½‘å€narrowï¼šå¯é€‰ï¼Œçª„æ¬¾å¼autoplayï¼šå¯é€‰ï¼Œè‡ªåŠ¨æ’­æ”¾éŸ³ä¹ï¼Œä¸æ”¯æŒç§»åŠ¨æµè§ˆå™¨width:xxxï¼šå¯é€‰ï¼Œå‰ç¼€width:ï¼Œæ’­æ”¾å™¨å®½åº¦ï¼ˆé»˜è®¤å€¼ï¼š100ï¼…ï¼‰lrc:xxxï¼šå¯é€‰ï¼Œå‰ç¼€lrc:ï¼ŒLRCæ–‡ä»¶url ç¤ºä¾‹: 1&#123;% aplayer &quot;Caffeine&quot; &quot;Jeff Williams&quot; &quot;caffeine.mp3&quot; &quot;picture.jpg&quot; &quot;lrc:caffeine.txt&quot; %&#125; [ti:æ˜¥æ„çº¢åŒ… (Vocaloid Ver.)] [ar:ä¹æ­£ç»«/å¿ƒåŽ/æ´›å¤©ä¾] [al:æ˜¥æ„çº¢åŒ…] [by:] [offset:0] [00:00.29]æ˜¥æ„çº¢åŒ… (Vocaloid Ver.) - ä¹æ­£ç»«/å¿ƒåŽ/æ´›å¤©ä¾ [00:00.89]è¯ï¼šæ³ é¸¢YOUSA [00:01.05]æ›²ï¼šWingç¿¼ [00:01.18]ç¼–æ›²ï¼šWingç¿¼ [00:01.95]å°éº¦é¢åŒ…é¥º å–œè‰²ä¸Šçœ‰æ¢¢ [00:05.78]ç‚¹æŸ³ç¿  ç”»æ˜¥æ™“ [00:08.85] [00:10.08]æ‰¾æ—§æ ·é“œæ¿ç©¿ä¸€ä¸²å‰å…† [00:14.20]æŠŠæ˜¥æ„è£…æ»¡çº¢åŒ… [00:17.86] [00:37.11]å»Šä¸‹çš„å°é˜¿å¦¹æ‘‡å¤´æ™ƒè„‘ [00:41.25]æœ›ç€ç“¦ä¸Šçš„ç¢Žå˜´å®¶é›€ [00:44.76] [00:45.56]é—®å®ƒä»¬æ˜¥æ—¥çš„é¸Ÿå„¿ ä½•æ—¶æ‰èƒ½åˆ° [00:49.81] [00:50.35]ç©¿è¡—æœå··æ²¿è·¯æ‰¾ [00:53.26] [00:53.76]çœ‹é‚»å®¶çš„è€äººæ‘˜ä¸‹æ¯¡å¸½ [00:57.88]è™½æ˜¯è„±åŽ»å†¬è¡£è¿˜å°šæ—© [01:01.89]å®°é¸¡é¸­ èµ·ç‚‰ç¶ æ­å¼€è‡ªå®¶é™ˆé…¿ [01:07.91]å·å·å°ä¸€ç“¢ [01:09.81] [01:13.01]å¤§é¬¼å« å°é¬¼å« é‚ªç¥Ÿå“å¾—è·Œå€’ [01:16.73]è¯¥ç”¨ä»€ä¹ˆæ¸…æ‰« é”£é¼“éž­ç‚® [01:20.58] [01:21.30]å°å­©å„¿ å¿«æ¥çž§ åˆ«å†äººå †èƒ¡é—¹ [01:24.85] [01:25.43]åªæœ‰å¬è¯ä¹–å·§ æ¥å¹´æ‰èƒ½é•¿é«˜ [01:29.08] [01:30.21]å’Œçº¸æµ† é‡‡æœ±ç ‚ æ”’ä¸€æ‘žæ˜¥è”å å¥½ [01:34.25]å‰ªé‡‘èŠ± æŸ“çº¢æ–™ [01:36.24]å†ç³Šä¸€ä¸ªå››æ–¹å°åŒ… [01:37.98] [01:38.56]å¯¹èŠ±è°ƒ æŠ„ç«¥è°£ å†™ä¸€ä¸²å‰ç¥¥å®‰å¥½ [01:42.51]æ‰¶æ­£äº†å°é¢ ç”»ä¸Šæ˜¥æ¥åˆ° [01:46.14]ä¸€ç‰‡ç¿ è‰²è‘±è‘±æ˜Žå¿«åˆè·³è·ƒ [01:50.13]å‡ ç“£æµ·æ£ å±±èŒ¶èŠ±å„¿ç›¸æ˜ ç¬‘ [01:54.29]å†è˜¸æµ“å¢¨æ½¦è‰æ·»åªç‡•å­é—¹ [01:58.48]çº¢ç»³ç»• æ¥å°ä¸€ä¸ªå¤§çº¢åŒ… [02:02.83] [02:19.34]æ‰¾ä¸€å¼ æ™’çƒ«çš„æ¿å‡³æ­‡è„š [02:22.80] [02:23.58]çœ‹ä½ çœ¼ä¸‹åˆå¸ƒæ»¡æ“åŠ³ [02:27.59]ç¼–ç»‡æ©™é»„è“ç»¿æŠŠçƒ¦æ¼å…¨éƒ¨å¿˜æŽ‰ [02:32.00] [02:32.65]æŠ¬æ‰‹æ§ä¸€æŠŠçº¢æž£ [02:34.70] [02:35.97]éª—æ€•ç”Ÿçš„å°å¦¹ç‚¹ç¯ç¡è§‰ [02:40.05]ä¼šæœ‰é¬¼ç¥Ÿåœ¨å¤œæ™šæ¥åˆ° [02:43.55] [02:44.13]å¥¹æ…Œå¼  æˆ‘å·ç¬‘ è¿žè¯´ä¸æ€•ä¸æ€• [02:50.16]è®©æˆ‘åŽ»èµ¶è·‘ [02:52.62] [02:55.34]å·¦æ­è‚© å³å¸®è…” [02:57.19]æŒ¤å…‘è¿Ÿæ¥çš„å¤§å¿™äºº [02:59.59]ç¤¼ç‰©æœªåˆ° äººæ€Žèƒ½åˆ° [03:03.02] [03:03.62]è¡¨å«‚åµ å¤§èˆ…é—¹ è¿žå¤©åœ°å–³å–³å« [03:07.03] [03:07.71]æˆ‘è£…ä½œå¬ä¸åˆ° ç›˜åæŠŠç¢—æ²¿æ•² [03:11.35] [03:12.37]è¸©é«˜è·· æŠ“èŠ±åŒ… æ’©ä¸€æŒ‚çº¢è¡£éž­ç‚® [03:16.52]æ‰“å¹´ç³• ä¸²è¾£æ¤’ [03:18.59]æŠ¹èŠ±æˆ‘çš„èƒ­è„‚ç²‰è† [03:20.67]ä¾ƒå…«å¦ è®²å°é“ ç­‰æ¯ä¸­èŒ¶é…’å‡å°‘ [03:24.79]å°†æ‰‹ä¸Šçº¢åŒ… å¡žè¿›ä½ æ£‰è¢„ [03:28.05] [03:28.60]ä½ é€å‰ç¥¥å¦‚æ„ å¹¸ç¦å¿«æ¥åˆ° [03:32.57]æˆ‘é€ç™¾å¹´é¡ºé‚ ä¸æ€•è¢«ç«çƒ§ [03:36.57]å†æ±‚æ¥å¹´ç”Ÿè¾° æ·»ä¸€åˆ†ç¾Žè²Œ [03:40.74]æ‹±æ‰‹æ‘‡ åŒéž ä¸€èº¬å¯¹çœ¼ç¬‘ [03:44.55] [03:47.29]å°éº¦é¢åŒ…é¥º å–œè‰²ä¸Šçœ‰æ¢¢ [03:51.29]ç‚¹æŸ³ç¿  ç”»æ˜¥æ™“ [03:55.45]æ‰¾æ—§æ ·é“œæ¿ç©¿ä¸€ä¸²å‰å…† [03:59.58]æŠŠæ˜¥æ„èµ ä¸Žæ˜Žæœ [04:03.12] [04:04.16]å·¦æ­è‚© å³å¸®è…” çƒ­é—¹è¯ä¸è§å°‘ [04:08.24]ä½ æ¥è’¸ æˆ‘æ¥æŒ‘ å¡žæ»¡å˜´çš„çŽ‰ç±³åŒ… [04:12.41]å¹²æŸ´çƒ§ ç«ç„°é«˜ çƒ¦å¿ƒäº‹å·²å¯¥å¯¥ [04:16.05] [04:16.66]çœ¯çœ¼çž§ æŠŠçº¢åŒ…å¡žè¿›ä½ æ£‰è¢„ [04:20.59]ä¸€ç‰‡ç¿ è‰²è‘±è‘± æ˜Žå¿«åˆè·³è·ƒ [04:24.66]å‡ ç“£æµ·æ£ å±±èŒ¶ èŠ±å„¿ç›¸æ˜ ç¬‘ [04:28.80]å°ç€å‰ç¥¥å¦‚æ„ å¹¸ç¦å¿«æ¥åˆ° [04:32.97]çº¢ç»³ç»• æ‹†å¼€æ˜¥æ„å¤§çº¢åŒ… var ap = new APlayer({ element: document.getElementById("aplayer1"), narrow: false, autoplay: false, showlrc: 2, music: { title: "æ˜¥æ„çº¢åŒ…", author: "ä¸‰æ— MarBlue,ç¥–å¨…çº³æƒœ,æ³ é¸¢yousa", url: "http://p4lmrb1gp.bkt.clouddn.com/%E4%B8%89%E6%97%A0MarBlue,%E7%A5%96%E5%A8%85%E7%BA%B3%E6%83%9C,%E6%B3%A0%E9%B8%A2yousa%20-%20%E6%98%A5%E6%84%8F%E7%BA%A2%E5%8C%85.mp3", pic: "http://p4lmrb1gp.bkt.clouddn.com/%E6%98%A5%E6%84%8F%E7%BA%A2%E5%8C%85.jpg", } }); window.aplayers || (window.aplayers = []); window.aplayers.push(ap); æ’­æ”¾åˆ—è¡¨123456789101112131415161718192021222324252627&#123;% aplayerlist %&#125;&#123; "narrow": false, // Optional, narrow style "autoplay": true, // Optional, autoplay song(s), not supported by mobile browsers "mode": "random", // Optional, play mode, can be `random` `single` `circulation`(loop) `order`(no loop), default: `circulation` "showlrc": 3, // Optional, show lrc, can be 1, 2, 3 "mutex": true, // Optional, pause other players when this player playing "theme": "#e6d0b2", // Optional, theme color, default: #b7daff "preload": "metadata", // Optional, the way to load music, can be 'none' 'metadata' 'auto', default: 'auto' "listmaxheight": "513px", // Optional, max height of play list "music": [ &#123; "title": "CoCo", "author": "Jeff Williams", "url": "caffeine.mp3", "pic": "caffeine.jpeg", "lrc": "caffeine.txt" &#125;, &#123; "title": "ã‚¢ã‚¤ãƒ­ãƒ‹", "author": "é¹¿ä¹ƒ", "url": "irony.mp3", "pic": "irony.jpg" &#125; ]&#125;&#123;% endaplayerlist %&#125; æ’å…¥è§†é¢‘ï¼švideo æ ‡ç­¾ï¼š 123&lt;video src="http://lxqncdn.miaopai.com/stream/BvmaXK2X49guVi4ehlOjjQ__.mp4" width="100%" height="100%" controls="controls"&gt;Your browser does not support the video tag.&lt;/video&gt; embedæ ‡ç­¾ï¼š 1&lt;embed src="http://player.youku.com/player.php/Type/Folder/Fid/27690810/Ob/1/sid/XMTY1MTI3NjMyNA==/v.swf" quality="high" width="480" height="400" align="middle" allowScriptAccess="always" allowFullScreen="true" mode="transparent" type="application/x-shockwave-flash"&gt;&lt;/embed&gt; iframeæ ‡ç­¾ï¼š 1&lt;iframe height=498 width=510 src="http://player.youku.com/embed/XMTY1MTI3NjMyNA==" frameborder=0 allowfullscreen&gt;&lt;/iframe&gt;]]></content>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
</search>
